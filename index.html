<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>In-App Template Gallery · SJ × CleverTap</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@600;700;800&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
/* ═══════════════════════════════════════════════════
   DESIGN SYSTEM
   Aesthetic: Dark Editorial Portfolio
   Inspired by: Obys (type), Oaks (space), Redis (dark authority), Injoy (warmth)
   ═══════════════════════════════════════════════════ */
:root {
  --bg: #08080A; --s1: #0E0E11; --s2: #141418; --s3: #1A1A1F;
  --s4: #242429; --s5: #2F2F36; --s6: #3F3F46;
  --border: rgba(255,255,255,.05); --border2: rgba(255,255,255,.08);
  --border3: rgba(255,255,255,.14);
  --t1: #F4F4F5; --t2: #A1A1AA; --t3: #71717A; --t4: #52525B;
  --accent: #F59E0B; --accent2: #EAB308; --accentA: rgba(245,158,11,.08);
  --accentGlow: rgba(245,158,11,.15);
  --emerald: #34D399; --rose: #FB7185; --sky: #38BDF8; --violet: #A78BFA;
  --pink: #F472B6; --orange: #FB923C; --indigo: #818CF8; --teal: #2DD4BF;
  --display: 'Syne', 'Georgia', serif;
  --body: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --mono: 'JetBrains Mono', 'SF Mono', Menlo, monospace;
  --r1: 10px; --r2: 14px; --r3: 20px; --r4: 28px;
  --ease: cubic-bezier(.22,1,.36,1);
  --ease-out: cubic-bezier(.0,0,.2,1);
  --ease-spring: cubic-bezier(.34,1.56,.64,1);
}
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { background: var(--bg); color: var(--t1); font-family: var(--body); -webkit-font-smoothing: antialiased; scroll-behavior: smooth; }
body { min-height: 100vh; overflow-x: hidden; }
::selection { background: var(--accent); color: #000; }
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--s5); border-radius: 3px; }
input, select, button, textarea { font-family: inherit; }
a { color: inherit; text-decoration: none; }

/* ═══ NOISE TEXTURE ═══ */
body::before { content:''; position:fixed; inset:0; z-index:9999; pointer-events:none; opacity:.025;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* ═══════════════════════════════════════════════════
   HEADER
   ═══════════════════════════════════════════════════ */
.hdr { position:sticky; top:0; z-index:200; background:rgba(8,8,10,.7); backdrop-filter:blur(24px) saturate(1.5); -webkit-backdrop-filter:blur(24px) saturate(1.5); border-bottom:1px solid var(--border); }
.hdr-inner { max-width:1440px; margin:0 auto; padding:0 clamp(20px,3vw,40px); height:56px; display:flex; align-items:center; gap:16px; }
.logo { display:flex; align-items:center; gap:10px; flex-shrink:0; cursor:pointer; }
.logo-mark { width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg,var(--accent) 0%,#EF4444 100%); display:grid; place-items:center; transition:transform .2s var(--ease); }
.logo:hover .logo-mark { transform:rotate(-8deg) scale(1.05); }
.logo-mark svg { width:14px; height:14px; fill:#000; }
.logo-txt { font-family:var(--display); font-size:14px; font-weight:700; letter-spacing:-.3px; }
.logo-txt span { font-family:var(--body); color:var(--t4); font-weight:400; font-size:12px; margin-left:6px; }
.search-wrap { flex:1; max-width:340px; position:relative; margin-left:auto; }
.search-wrap svg { position:absolute; left:12px; top:50%; transform:translateY(-50%); color:var(--t4); pointer-events:none; width:14px; height:14px; }
.search { width:100%; padding:8px 14px 8px 34px; background:var(--s2); border:1px solid var(--border); border-radius:var(--r1); color:var(--t1); font-size:13px; outline:none; transition:border-color .2s, box-shadow .2s; }
.search:focus { border-color:var(--accent); box-shadow:0 0 0 3px var(--accentA); }
.search::placeholder { color:var(--t4); }
.hdr-count { font-size:11.5px; color:var(--t4); font-weight:500; font-variant-numeric:tabular-nums; flex-shrink:0; letter-spacing:.5px; }

/* ═══════════════════════════════════════════════════
   HERO — Split Layout
   ═══════════════════════════════════════════════════ */
.hero { max-width:1440px; margin:0 auto; padding:clamp(48px,8vw,100px) clamp(20px,3vw,40px) 0; display:grid; grid-template-columns:1fr 1fr; gap:40px; align-items:center; min-height:min(80vh,700px); }
.hero-left { }
.hero-label { display:inline-flex; align-items:center; gap:8px; font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:2px; color:var(--accent); margin-bottom:24px; opacity:0; animation:fadeIn .6s .2s var(--ease-out) forwards; }
.hero-label::before { content:''; width:24px; height:1px; background:var(--accent); }
.hero h1 { font-family:var(--display); font-size:clamp(36px,5.5vw,72px); font-weight:800; letter-spacing:-2px; line-height:1.0; opacity:0; animation:fadeIn .6s .35s var(--ease-out) forwards; }
.hero h1 em { font-style:normal; display:block; background:linear-gradient(135deg,var(--accent) 20%,#F97316 60%,#EF4444 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
.hero-sub { font-size:clamp(14px,1.2vw,16.5px); color:var(--t2); margin-top:20px; line-height:1.7; max-width:460px; font-weight:300; opacity:0; animation:fadeIn .6s .5s var(--ease-out) forwards; }
.hero-cta { display:inline-flex; align-items:center; gap:8px; margin-top:32px; padding:12px 28px; background:var(--t1); color:var(--bg); font-size:13.5px; font-weight:600; border-radius:99px; cursor:pointer; border:none; transition:all .2s var(--ease); opacity:0; animation:fadeIn .6s .65s var(--ease-out) forwards; }
.hero-cta:hover { transform:translateY(-1px); box-shadow:0 8px 30px rgba(255,255,255,.1); }
.hero-cta svg { width:16px; height:16px; transition:transform .2s; }
.hero-cta:hover svg { transform:translateX(3px); }

/* Stacked phones on right */
.hero-right { position:relative; height:420px; display:flex; align-items:center; justify-content:center; opacity:0; animation:fadeIn .8s .4s var(--ease-out) forwards; }
.hero-phone { position:absolute; width:180px; height:340px; border-radius:24px; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.04); transition:transform .4s var(--ease), box-shadow .4s; cursor:pointer; }
.hero-phone:hover { z-index:10 !important; box-shadow:0 24px 70px rgba(0,0,0,.6), 0 0 0 1px rgba(255,255,255,.08); }
.hero-phone:nth-child(1) { transform:rotate(-8deg) translateX(-100px) translateY(10px); z-index:3; }
.hero-phone:nth-child(2) { transform:rotate(0deg) translateX(0) translateY(-15px); z-index:4; }
.hero-phone:nth-child(3) { transform:rotate(7deg) translateX(100px) translateY(5px); z-index:2; }
.hero-phone:nth-child(1):hover { transform:rotate(-4deg) translateX(-100px) translateY(5px) scale(1.04); }
.hero-phone:nth-child(2):hover { transform:rotate(0deg) translateX(0) translateY(-20px) scale(1.04); }
.hero-phone:nth-child(3):hover { transform:rotate(3deg) translateX(100px) translateY(0) scale(1.04); }
.hero-phone-inner { width:100%; height:100%; display:flex; flex-direction:column; justify-content:flex-end; padding:16px; position:relative; }
.hero-phone-label { font-size:11px; font-weight:600; color:#fff; text-shadow:0 1px 8px rgba(0,0,0,.4); position:relative; z-index:2; }
.hero-phone-brand { font-size:10px; color:rgba(255,255,255,.7); margin-top:2px; position:relative; z-index:2; }
.hp-quiz { background:linear-gradient(170deg,#0142AF 0%,#033A94 40%,#022B6E 100%); }
.hp-fortune { background:linear-gradient(135deg,#DC2626 0%,#B91C1C 50%,#991B1B 100%); }
.hp-calc { background:linear-gradient(135deg,#E87722 0%,#D4631A 100%); }

/* Floating animation */
@keyframes float1 { 0%,100%{transform:rotate(-8deg) translateX(-100px) translateY(10px)} 50%{transform:rotate(-8deg) translateX(-100px) translateY(0)} }
@keyframes float2 { 0%,100%{transform:rotate(0) translateX(0) translateY(-15px)} 50%{transform:rotate(0) translateX(0) translateY(-25px)} }
@keyframes float3 { 0%,100%{transform:rotate(7deg) translateX(100px) translateY(5px)} 50%{transform:rotate(7deg) translateX(100px) translateY(-5px)} }
.hero-phone:nth-child(1) { animation:float1 5s ease-in-out infinite; }
.hero-phone:nth-child(2) { animation:float2 6s ease-in-out infinite; }
.hero-phone:nth-child(3) { animation:float3 5.5s ease-in-out infinite; }
.hero-phone:hover { animation-play-state:paused !important; }

@keyframes fadeIn { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }

/* ═══════════════════════════════════════════════════
   STATS STRIP
   ═══════════════════════════════════════════════════ */
.stats { max-width:1440px; margin:0 auto; padding:60px clamp(20px,3vw,40px) 0; }
.stats-inner { display:flex; gap:0; border-top:1px solid var(--border2); border-bottom:1px solid var(--border2); }
.stat-item { flex:1; padding:24px 0; text-align:center; position:relative; }
.stat-item + .stat-item::before { content:''; position:absolute; left:0; top:20%; height:60%; width:1px; background:var(--border2); }
.stat-num { font-family:var(--display); font-size:clamp(28px,3vw,42px); font-weight:800; letter-spacing:-1px; background:linear-gradient(135deg,var(--t1),var(--t2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
.stat-label { font-size:12px; color:var(--t3); margin-top:4px; letter-spacing:.5px; text-transform:uppercase; font-weight:500; }

/* ═══════════════════════════════════════════════════
   FEATURED SPOTLIGHT
   ═══════════════════════════════════════════════════ */
.spotlight { max-width:1440px; margin:0 auto; padding:80px clamp(20px,3vw,40px) 0; }
.spotlight-label { font-family:var(--display); font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:2px; color:var(--accent); margin-bottom:12px; }
.spotlight-title { font-family:var(--display); font-size:clamp(22px,2.5vw,32px); font-weight:700; letter-spacing:-.5px; margin-bottom:8px; }
.spotlight-desc { font-size:14px; color:var(--t2); margin-bottom:40px; font-weight:300; }

.spotlight-stage { display:grid; grid-template-columns:1fr 400px; gap:48px; align-items:start; }
.spotlight-phone-wrap { display:flex; justify-content:center; position:sticky; top:80px; }
.spotlight-phone { width:300px; height:580px; border-radius:36px; border:3px solid var(--s4); background:#000; position:relative; overflow:hidden; box-shadow:0 30px 80px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.03), 0 0 120px rgba(245,158,11,.04); }
.spotlight-phone::before { content:''; position:absolute; top:8px; left:50%; transform:translateX(-50%); width:80px; height:22px; background:#000; border-radius:0 0 14px 14px; z-index:5; }
.spotlight-phone iframe { width:100%; height:100%; border:none; background:#fff; }

.spotlight-list { display:flex; flex-direction:column; gap:8px; }
.spot-card { padding:20px 24px; border-radius:var(--r2); border:1px solid var(--border); cursor:pointer; transition:all .25s var(--ease); position:relative; overflow:hidden; }
.spot-card::before { content:''; position:absolute; left:0; top:0; bottom:0; width:3px; border-radius:0 3px 3px 0; background:var(--accent); opacity:0; transition:opacity .2s; }
.spot-card:hover, .spot-card.active { background:var(--s2); border-color:var(--border2); }
.spot-card.active::before { opacity:1; }
.spot-card-top { display:flex; align-items:center; gap:12px; }
.spot-card-icon { font-size:20px; }
.spot-card-name { font-family:var(--display); font-size:14.5px; font-weight:700; letter-spacing:-.2px; }
.spot-card-brand { font-size:12px; color:var(--t3); font-weight:400; margin-left:auto; }
.spot-card-desc { font-size:12.5px; color:var(--t2); margin-top:8px; line-height:1.5; font-weight:300; }
.spot-card-tag { display:inline-block; font-size:10px; font-weight:500; padding:3px 8px; border-radius:6px; margin-top:10px; }

/* ═══════════════════════════════════════════════════
   TICKER MARQUEE
   ═══════════════════════════════════════════════════ */
.ticker-section { padding:72px 0; overflow:hidden; position:relative; }
.ticker-section::before, .ticker-section::after { content:''; position:absolute; top:0; bottom:0; width:120px; z-index:2; pointer-events:none; }
.ticker-section::before { left:0; background:linear-gradient(90deg,var(--bg),transparent); }
.ticker-section::after { right:0; background:linear-gradient(270deg,var(--bg),transparent); }
.ticker-track { display:flex; gap:12px; width:max-content; animation:marquee 80s linear infinite; }
.ticker-track:hover { animation-play-state:paused; }
@keyframes marquee { 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }

.ticker-item { flex-shrink:0; width:200px; height:108px; border-radius:var(--r2); padding:16px; display:flex; flex-direction:column; justify-content:space-between; cursor:pointer; transition:transform .25s var(--ease), box-shadow .25s; position:relative; }
.ticker-item:hover { transform:translateY(-4px) scale(1.02); box-shadow:0 12px 40px rgba(0,0,0,.4); }
.ti-icon { font-size:22px; opacity:.8; }
.ti-name { font-size:11.5px; font-weight:600; color:rgba(0,0,0,.85); line-height:1.3; }
.ti-brand { font-size:10px; color:rgba(0,0,0,.5); margin-top:1px; }

/* Category palette for ticker items */
.tc-quiz { background:linear-gradient(135deg,#FDE68A,#FCD34D); }
.tc-gamification { background:linear-gradient(135deg,#A7F3D0,#6EE7B7); }
.tc-loyalty { background:linear-gradient(135deg,#DDD6FE,#C4B5FD); }
.tc-commerce { background:linear-gradient(135deg,#FECDD3,#FDA4AF); }
.tc-interactive { background:linear-gradient(135deg,#BAE6FD,#7DD3FC); }
.tc-content { background:linear-gradient(135deg,#FED7AA,#FDBA74); }
.tc-animation { background:linear-gradient(135deg,#E5E7EB,#D1D5DB); }
.tc-foundational { background:linear-gradient(135deg,#C7D2FE,#A5B4FC); }

/* ═══════════════════════════════════════════════════
   GALLERY SECTION
   ═══════════════════════════════════════════════════ */
.gallery { max-width:1440px; margin:0 auto; padding:0 clamp(20px,3vw,40px) 100px; }
.gallery-hdr { display:flex; align-items:flex-end; justify-content:space-between; margin-bottom:12px; }
.gallery-title { font-family:var(--display); font-size:clamp(22px,2.5vw,32px); font-weight:700; letter-spacing:-.5px; }
.gallery-count { font-size:12px; color:var(--t4); font-weight:500; }

/* Filters */
.filters { display:flex; gap:6px; flex-wrap:wrap; margin-bottom:24px; padding-bottom:24px; border-bottom:1px solid var(--border); }
.pill { padding:7px 16px; border-radius:99px; font-size:12px; font-weight:500; color:var(--t3); background:transparent; border:1px solid var(--border); cursor:pointer; transition:all .2s var(--ease); user-select:none; white-space:nowrap; }
.pill:hover { color:var(--t2); border-color:var(--border2); background:var(--s2); }
.pill.on { background:var(--t1); color:var(--bg); border-color:var(--t1); font-weight:600; }
.pill .ct { opacity:.45; margin-left:4px; font-weight:400; }

/* Grid */
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:10px; }
.card { background:var(--s1); border:1px solid var(--border); border-radius:var(--r2); padding:20px; cursor:pointer; transition:all .25s var(--ease); position:relative; overflow:hidden; opacity:0; animation:cardIn .4s var(--ease-out) forwards; }
.card::after { content:''; position:absolute; left:0; top:0; bottom:0; width:3px; background:var(--cardAccent, var(--s5)); border-radius:0 3px 3px 0; opacity:0; transition:opacity .2s; }
.card::before { content:''; position:absolute; inset:0; border-radius:var(--r2); opacity:0; transition:opacity .25s; background:radial-gradient(500px circle at var(--mx,50%) var(--my,50%),rgba(255,255,255,.025),transparent 40%); pointer-events:none; }
.card:hover { border-color:var(--border2); transform:translateY(-2px); }
.card:hover::before { opacity:1; }
.card:hover::after { opacity:1; }
@keyframes cardIn { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }

.card-top { display:flex; align-items:flex-start; gap:12px; margin-bottom:10px; }
.card-icon { width:40px; height:40px; border-radius:11px; display:grid; place-items:center; font-size:19px; flex-shrink:0; }
.card-meta { flex:1; min-width:0; }
.card-name { font-family:var(--display); font-size:14px; font-weight:700; line-height:1.3; letter-spacing:-.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.card-brand { font-size:12px; color:var(--t3); margin-top:2px; font-weight:400; }
.card-desc { font-size:12.5px; color:var(--t2); line-height:1.6; margin-bottom:14px; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; font-weight:300; }
.card-foot { display:flex; align-items:center; gap:6px; flex-wrap:wrap; }
.badge { font-size:10px; font-weight:500; padding:3px 9px; border-radius:6px; white-space:nowrap; }
.badge-size { color:var(--t4); background:var(--s2); }
.empty-state { grid-column:1/-1; text-align:center; padding:80px 20px; color:var(--t3); font-size:14px; }

/* ═══════════════════════════════════════════════════
   DETAIL OVERLAY
   ═══════════════════════════════════════════════════ */
.overlay { position:fixed; inset:0; z-index:500; background:var(--bg); display:flex; flex-direction:column; transform:translateX(100%); transition:transform .4s var(--ease); will-change:transform; }
.overlay.open { transform:translateX(0); }

.d-hdr { padding:0 clamp(16px,2vw,28px); height:56px; display:flex; align-items:center; gap:12px; border-bottom:1px solid var(--border); flex-shrink:0; }
.d-back { display:flex; align-items:center; gap:5px; font-size:13px; font-weight:500; color:var(--t2); background:none; border:none; cursor:pointer; padding:7px 12px; border-radius:var(--r1); transition:all .15s; }
.d-back:hover { background:var(--s2); color:var(--t1); }
.d-back svg { width:15px; height:15px; }
.d-info { flex:1; min-width:0; }
.d-title { font-family:var(--display); font-size:14px; font-weight:700; letter-spacing:-.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.d-sub { font-size:11px; color:var(--t3); font-weight:400; }
.d-actions { display:flex; gap:6px; flex-shrink:0; }

.btn { display:inline-flex; align-items:center; gap:5px; padding:7px 14px; font-size:12px; font-weight:500; border-radius:var(--r1); border:1px solid var(--border); background:transparent; color:var(--t2); cursor:pointer; transition:all .15s; white-space:nowrap; }
.btn:hover { border-color:var(--border2); color:var(--t1); background:var(--s2); }
.btn svg { width:13px; height:13px; flex-shrink:0; }
.btn-accent { background:var(--t1); color:var(--bg); border-color:var(--t1); }
.btn-accent:hover { background:#E4E4E7; border-color:#E4E4E7; color:var(--bg); }

.d-body { flex:1; display:flex; overflow:hidden; }

/* Phone Preview */
.pv { flex:0 0 420px; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:28px; background:var(--s1); border-right:1px solid var(--border); }
.pv-phone { width:300px; height:580px; border-radius:36px; border:3px solid var(--s4); background:#000; position:relative; overflow:hidden; box-shadow:0 24px 70px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.03); }
.pv-phone::before { content:''; position:absolute; top:8px; left:50%; transform:translateX(-50%); width:80px; height:22px; background:#000; border-radius:0 0 14px 14px; z-index:5; }
.pv-phone iframe { width:100%; height:100%; border:none; background:#fff; }
.pv-btns { margin-top:16px; display:flex; gap:6px; }

/* Editor Panel */
.ed { flex:1; display:flex; flex-direction:column; overflow:hidden; }
.ed-tabs { display:flex; border-bottom:1px solid var(--border); padding:0 20px; flex-shrink:0; }
.ed-tab { padding:14px 16px; font-size:12.5px; font-weight:500; color:var(--t3); cursor:pointer; border-bottom:2px solid transparent; transition:all .15s; }
.ed-tab:hover { color:var(--t2); }
.ed-tab.on { color:var(--t1); border-color:var(--accent); }
.ed-body { flex:1; overflow:hidden; position:relative; }
.ed-panel { position:absolute; inset:0; overflow-y:auto; padding:20px; display:none; }
.ed-panel.on { display:block; }

/* Config fields */
.cfg-empty { color:var(--t3); font-size:13px; line-height:1.7; padding:16px; }
.cfg-empty b { color:var(--t2); }
.cfg-group { margin-bottom:20px; }
.cfg-group-title { font-family:var(--display); font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:1px; color:var(--t3); margin-bottom:10px; padding-bottom:6px; border-bottom:1px solid var(--border); }
.cfg-field { margin-bottom:10px; }
.cfg-label { font-size:11px; font-weight:500; color:var(--t3); margin-bottom:4px; font-family:var(--body); letter-spacing:.3px; }
.cfg-input { width:100%; padding:8px 12px; background:var(--s2); border:1px solid var(--border); border-radius:8px; color:var(--t1); font-size:12.5px; outline:none; transition:border-color .15s; }
.cfg-input:focus { border-color:var(--accent); }
textarea.cfg-input { resize:vertical; font-family:var(--body); line-height:1.5; }
.cfg-color-wrap { display:flex; gap:8px; align-items:center; }
.cfg-color-swatch { width:34px; height:34px; border-radius:8px; border:1px solid var(--border2); cursor:pointer; flex-shrink:0; overflow:hidden; }
.cfg-color-swatch input[type="color"] { opacity:0; width:100%; height:100%; cursor:pointer; }

/* Code View */
.code-bar { display:flex; gap:6px; margin-bottom:14px; }
.code-area { font-family:var(--mono); font-size:11px; line-height:1.7; color:var(--t2); white-space:pre-wrap; word-break:break-all; background:var(--s1); border:1px solid var(--border); border-radius:var(--r1); padding:16px; max-height:calc(100vh - 180px); overflow:auto; tab-size:2; }

/* Toast */
.toast { position:fixed; bottom:28px; left:50%; transform:translateX(-50%) translateY(80px); background:var(--t1); color:var(--bg); padding:10px 24px; border-radius:99px; font-size:13px; font-weight:500; z-index:9999; transition:transform .35s var(--ease-spring); box-shadow:0 8px 30px rgba(0,0,0,.3); pointer-events:none; }
.toast.show { transform:translateX(-50%) translateY(0); }

/* Footer */
.footer { border-top:1px solid var(--border); padding:40px clamp(20px,3vw,40px); max-width:1440px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:16px; }
.footer-left { font-size:12px; color:var(--t4); }
.footer-left b { color:var(--t3); font-weight:500; }
.footer-right { font-size:11px; color:var(--t4); }

/* ═══════════════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════════════ */
@media (max-width:1024px) {
  .hero { grid-template-columns:1fr; min-height:auto; padding-bottom:20px; }
  .hero-right { height:280px; }
  .hero-phone { width:140px; height:260px; border-radius:20px; }
  .spotlight-stage { grid-template-columns:1fr; }
  .spotlight-phone-wrap { position:relative; top:auto; order:2; padding:20px 0; }
  .spotlight-phone { width:260px; height:500px; }
  .spotlight-list { order:1; }
}
@media (max-width:900px) {
  .d-body { flex-direction:column; }
  .pv { flex:0 0 auto; border-right:none; border-bottom:1px solid var(--border); padding:20px; }
  .pv-phone { width:240px; height:460px; border-radius:28px; }
  .d-actions { display:none; }
}
@media (max-width:640px) {
  .hdr-inner { gap:8px; }
  .logo-txt span { display:none; }
  .hero { padding-top:40px; }
  .hero-right { height:220px; }
  .hero-phone { width:110px; height:200px; border-radius:16px; }
  .hero-phone:nth-child(1) { animation:none; transform:rotate(-8deg) translateX(-70px) translateY(10px); }
  .hero-phone:nth-child(2) { animation:none; transform:rotate(0) translateX(0) translateY(-10px); }
  .hero-phone:nth-child(3) { animation:none; transform:rotate(7deg) translateX(70px) translateY(5px); }
  .stats-inner { flex-direction:column; }
  .stat-item + .stat-item::before { display:none; }
  .stat-item { padding:14px 0; border-bottom:1px solid var(--border); }
  .spotlight-phone { width:220px; height:420px; border-radius:24px; }
  .grid { grid-template-columns:1fr; }
  .ticker-item { width:160px; height:90px; padding:12px; }
  .pv { padding:14px; }
  .pv-phone { width:200px; height:380px; border-radius:24px; }
  .ed-panel { padding:14px; }
  .footer { flex-direction:column; text-align:center; }
}

/* Loading & Spinner */
.spinner { width:22px; height:22px; border:2px solid var(--s5); border-top-color:var(--accent); border-radius:50%; animation:spin .6s linear infinite; }
@keyframes spin { to{transform:rotate(360deg)} }
.loading-center { display:flex; align-items:center; justify-content:center; height:100%; }
</style>
</head>
<body>

<!-- ═══ HEADER ═══ -->
<header class="hdr">
  <div class="hdr-inner">
    <div class="logo" onclick="scrollTo({top:0,behavior:'smooth'})">
      <div class="logo-mark"><svg viewBox="0 0 24 24"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg></div>
      <div class="logo-txt">Template Gallery<span>by SJ</span></div>
    </div>
    <div class="search-wrap">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
      <input class="search" id="search" type="text" placeholder="Search templates, brands, categories…">
    </div>
    <div class="hdr-count" id="counter"></div>
  </div>
</header>

<!-- ═══ HERO ═══ -->
<section class="hero">
  <div class="hero-left">
    <div class="hero-label">CleverTap Custom HTML In-App</div>
    <h1>Production-ready<em>in-app templates</em></h1>
    <p class="hero-sub">67 templates across 30+ brands. Browse, preview in a phone mockup, customize the CONFIG, and copy the code — all from one place.</p>
    <button class="hero-cta" onclick="document.getElementById('gallerySection').scrollIntoView({behavior:'smooth'})">
      Browse all templates
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
    </button>
  </div>
  <div class="hero-right">
    <div class="hero-phone" data-k="cdg-zig-driver-quiz">
      <div class="hero-phone-inner hp-quiz">
        <div class="hero-phone-label">Personality Quiz</div>
        <div class="hero-phone-brand">CDG Zig</div>
      </div>
    </div>
    <div class="hero-phone" data-k="cny-angbao-fortune">
      <div class="hero-phone-inner hp-fortune">
        <div class="hero-phone-label">Ang Bao Fortune</div>
        <div class="hero-phone-brand">CNY</div>
      </div>
    </div>
    <div class="hero-phone" data-k="insurance-switching-calculator">
      <div class="hero-phone-inner hp-calc">
        <div class="hero-phone-label">Switching Calculator</div>
        <div class="hero-phone-brand">FWD / PolicyStreet</div>
      </div>
    </div>
  </div>
</section>

<!-- ═══ STATS ═══ -->
<section class="stats">
  <div class="stats-inner">
    <div class="stat-item"><div class="stat-num">67</div><div class="stat-label">Templates</div></div>
    <div class="stat-item"><div class="stat-num">30+</div><div class="stat-label">Brands</div></div>
    <div class="stat-item"><div class="stat-num">8</div><div class="stat-label">Categories</div></div>
    <div class="stat-item"><div class="stat-num">100%</div><div class="stat-label">Copy-paste ready</div></div>
  </div>
</section>

<!-- ═══ FEATURED SPOTLIGHT ═══ -->
<section class="spotlight">
  <div class="spotlight-label">Editor's Picks</div>
  <div class="spotlight-title">Templates worth exploring first</div>
  <div class="spotlight-desc">Handpicked to show the range — from complex quiz engines to instant gamification.</div>
  <div class="spotlight-stage">
    <div class="spotlight-phone-wrap">
      <div class="spotlight-phone">
        <iframe id="spotFrame" sandbox="allow-scripts allow-same-origin"></iframe>
      </div>
    </div>
    <div class="spotlight-list" id="spotList"></div>
  </div>
</section>

<!-- ═══ TICKER ═══ -->
<section class="ticker-section">
  <div class="ticker-track" id="ticker"></div>
</section>

<!-- ═══ GALLERY ═══ -->
<section class="gallery" id="gallerySection">
  <div class="gallery-hdr">
    <div class="gallery-title">All templates</div>
    <div class="gallery-count" id="gridCount"></div>
  </div>
  <div class="filters" id="filters"></div>
  <div class="grid" id="grid"></div>
</section>

<!-- ═══ FOOTER ═══ -->
<footer class="footer">
  <div class="footer-left">Built with <b>Claude</b> · Designed for <b>CleverTap</b> Custom HTML In-App</div>
  <div class="footer-right">67 templates · 30+ brands · by SJ</div>
</footer>

<!-- ═══ DETAIL OVERLAY ═══ -->
<div class="overlay" id="overlay">
  <div class="d-hdr">
    <button class="d-back" id="backBtn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>Back</button>
    <div class="d-info">
      <div class="d-title" id="dTitle"></div>
      <div class="d-sub" id="dSub"></div>
    </div>
    <div class="d-actions">
      <button class="btn" id="dlBtn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><path d="M7 10l5 5 5-5"/><path d="M12 15V3"/></svg>Download</button>
      <button class="btn btn-accent" id="cpBtn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>Copy HTML</button>
    </div>
  </div>
  <div class="d-body">
    <div class="pv">
      <div class="pv-phone">
        <iframe id="pFrame" sandbox="allow-scripts allow-same-origin"></iframe>
      </div>
      <div class="pv-btns">
        <button class="btn" id="refBtn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 102.13-9.36L1 10"/></svg>Refresh</button>
        <button class="btn" id="dlBtn2"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><path d="M7 10l5 5 5-5"/><path d="M12 15V3"/></svg>Download</button>
        <button class="btn btn-accent" id="cpBtn2"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>Copy</button>
      </div>
    </div>
    <div class="ed">
      <div class="ed-tabs">
        <div class="ed-tab on" data-t="cfg">Customize</div>
        <div class="ed-tab" data-t="code">Source Code</div>
      </div>
      <div class="ed-body">
        <div class="ed-panel on" id="cfgPanel" data-t="cfg"></div>
        <div class="ed-panel" id="codePanel" data-t="code">
          <div class="code-bar">
            <button class="btn btn-accent" id="cpBtn3"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>Copy</button>
            <button class="btn" id="dlBtn3"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><path d="M7 10l5 5 5-5"/><path d="M12 15V3"/></svg>Download</button>
          </div>
          <pre class="code-area" id="codeArea"></pre>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// ═══════════════════════════════════════════════════
// DATA
// ═══════════════════════════════════════════════════
var T = [
  {k:"cdg-zig-driver-quiz",f:"cdg-zig-driver-quiz.html",type:"Personality Quiz",brand:"CDG Zig",cat:"Quiz & Survey",desc:"Singapore driver personality quiz with branching logic",sz:42},
  {k:"raa-driver-quiz-v2",f:"raa-driver-quiz-v2.html",type:"Personality Quiz",brand:"RAA",cat:"Quiz & Survey",desc:"What kind of driver are you? — branching quiz",sz:38},
  {k:"cny-snack-quiz",f:"cny-snack-quiz.html",type:"Personality Quiz",brand:"CNY",cat:"Quiz & Survey",desc:"What CNY snack matches your personality?",sz:40},
  {k:"eatigo-quiz-final",f:"eatigo-quiz-final.html",type:"Story Adventure Quiz",brand:"Eatigo",cat:"Quiz & Survey",desc:"Enneagram diner spirit — choose-your-adventure quiz",sz:125},
  {k:"policystreet-trivia-quiz",f:"policystreet-trivia-quiz.html",type:"Trivia Quiz",brand:"PolicyStreet",cat:"Quiz & Survey",desc:"Insurance knowledge trivia challenge",sz:33},
  {k:"catchplay-poll",f:"catchplay-poll.html",type:"Quick Poll",brand:"CATCHPLAY+",cat:"Quiz & Survey",desc:"Single-tap movie preference poll",sz:22},
  {k:"eatigo-emoji-pulse",f:"eatigo-emoji-pulse.html",type:"Emoji Reaction",brand:"Eatigo",cat:"Quiz & Survey",desc:"Post-dining emoji sentiment pulse",sz:17},
  {k:"miso-sentiment-survey",f:"miso-sentiment-survey.html",type:"Sentiment Survey",brand:"Miso",cat:"Quiz & Survey",desc:"Korean-style satisfaction survey",sz:38},
  {k:"hola-exit-survey",f:"hola-exit-survey.html",type:"Exit Intent Survey",brand:"Hola Health",cat:"Quiz & Survey",desc:"Bottom-sheet radio exit survey",sz:7},
  {k:"yes-drag-rank",f:"yes-drag-rank.html",type:"Drag-to-Rank",brand:"Yes 5G",cat:"Quiz & Survey",desc:"Drag & reorder priority ranking",sz:25},
  {k:"f4-nps-collector",f:"f4-nps-collector.html",type:"NPS Collector",brand:"Generic",cat:"Quiz & Survey",desc:"Net Promoter Score rating widget",sz:14},
  {k:"f6-app-rating-prompt",f:"f6-app-rating-prompt.html",type:"App Rating Prompt",brand:"Generic",cat:"Quiz & Survey",desc:"Star-rating app store prompt",sz:14},
  {k:"cny-angbao-fortune",f:"cny-angbao-fortune.html",type:"Ang Bao Fortune",brand:"CNY",cat:"Gamification",desc:"Interactive red packet fortune reveal",sz:67},
  {k:"evercare-fortune",f:"evercare-fortune.html",type:"Daily Fortune",brand:"Evercare",cat:"Gamification",desc:"Wellness fortune cookie with daily wisdom",sz:46},
  {k:"jod-scratch-card",f:"jod-scratch-card.html",type:"Scratch Card",brand:"Jod",cat:"Gamification",desc:"Canvas scratch-to-reveal coupon",sz:17},
  {k:"easybook-mystery-box",f:"easybook-mystery-box.html",type:"Mystery Box",brand:"Easybook",cat:"Gamification",desc:"Rarity-tier travel reward reveal",sz:29},
  {k:"m1-memory-match",f:"m1-memory-match.html",type:"Memory Match",brand:"M1",cat:"Gamification",desc:"4\u00d74 card flip memory game",sz:23},
  {k:"ole777-prediction",f:"ole777-prediction.html",type:"Prediction Game",brand:"OLE777",cat:"Gamification",desc:"Sports match outcome predictions",sz:29},
  {k:"pizzahut-advent-calendar",f:"pizzahut-advent-calendar.html",type:"Advent Calendar",brand:"Pizza Hut",cat:"Gamification",desc:"7 Days of Deals reveal calendar",sz:27},
  {k:"socialgood-spin-wheel",f:"socialgood-spin-wheel.html",type:"Spin-to-Win Wheel",brand:"SocialGood",cat:"Gamification",desc:"Crypto cashback prize wheel",sz:26},
  {k:"catchplay-badges",f:"catchplay-badges.html",type:"Badge Trophy Wall",brand:"CATCHPLAY+",cat:"Loyalty & Progress",desc:"Achievement gallery with rarity tiers",sz:10},
  {k:"fwd-omne-streak-frame",f:"fwd-omne-streak-frame.html",type:"Streak Tracker",brand:"FWD Omne",cat:"Loyalty & Progress",desc:"Daily streak flame counter",sz:33},
  {k:"kttipay-milestone",f:"kttipay-milestone.html",type:"Milestone Progress",brand:"KttiPay",cat:"Loyalty & Progress",desc:"Spend-to-unlock tier rewards",sz:24},
  {k:"omoway-milestone-ring",f:"omoway-milestone-ring.html",type:"Milestone Ring",brand:"OMOWAY",cat:"Loyalty & Progress",desc:"Circular free-shipping progress",sz:31},
  {k:"neuron-leaderboard",f:"neuron-leaderboard.html",type:"Leaderboard",brand:"Neuron",cat:"Loyalty & Progress",desc:"Competitive rider rankings board",sz:25},
  {k:"neuron-onboarding",f:"neuron-onboarding.html",type:"Onboarding Checklist",brand:"Neuron",cat:"Loyalty & Progress",desc:"Feature discovery setup flow",sz:11},
  {k:"rease-daily-quest",f:"rease-daily-quest.html",type:"Daily Quest",brand:"Rease",cat:"Loyalty & Progress",desc:"Checklist of daily actions for points",sz:27},
  {k:"tunetalk-stamp-card",f:"tunetalk-stamp-card.html",type:"Stamp Card",brand:"Tune Talk",cat:"Loyalty & Progress",desc:"Digital loyalty stamp collection",sz:29},
  {k:"f12-reward-tier-progress",f:"f12-reward-tier-progress.html",type:"Reward Tier Progress",brand:"Generic",cat:"Loyalty & Progress",desc:"Visual tier progression tracker",sz:13},
  {k:"bondblox-calculator",f:"bondblox-calculator.html",type:"Savings Calculator",brand:"BondbloX",cat:"Interactive Tool",desc:"Bond yield vs savings comparison tool",sz:26},
  {k:"bondblox-pledge",f:"bondblox-pledge.html",type:"Goal Pledge",brand:"BondbloX",cat:"Interactive Tool",desc:"Investment commitment device",sz:8},
  {k:"insurance-switching-calculator",f:"insurance-switching-calculator.html",type:"Switching Calculator",brand:"FWD / PolicyStreet",cat:"Interactive Tool",desc:"Insurance cost-switching analysis",sz:46},
  {k:"ohmyhome-before-after",f:"ohmyhome-before-after.html",type:"Before/After Reveal",brand:"OhMyHome",cat:"Interactive Tool",desc:"Renovation slider comparison",sz:38},
  {k:"tantan-plan-compare",f:"tantan-plan-compare.html",type:"Plan Comparison",brand:"TanTan",cat:"Interactive Tool",desc:"Side-by-side plan feature matrix",sz:21},
  {k:"catchplay-wrapped",f:"catchplay-wrapped.html",type:"Year-in-Review Wrapped",brand:"CATCHPLAY+",cat:"Content & Social",desc:"Personal viewing stats showcase",sz:23},
  {k:"easybook-social-proof",f:"easybook-social-proof.html",type:"Social Proof Ticker",brand:"Easybook",cat:"Content & Social",desc:"Live booking activity toast",sz:5},
  {k:"socar-stories",f:"socar-stories.html",type:"Stories Carousel",brand:"SOCAR",cat:"Content & Social",desc:"Instagram-style photo stories",sz:268},
  {k:"socialgood-team-challenge",f:"socialgood-team-challenge.html",type:"Team Challenge",brand:"SocialGood",cat:"Content & Social",desc:"Collective crypto earning goal",sz:8},
  {k:"trevo-pip-recs",f:"trevo-pip-recs.html",type:"PIP Recommendations",brand:"TREVO",cat:"Content & Social",desc:"Branching video content recommendations",sz:25},
  {k:"f5-testimonial-carousel",f:"f5-testimonial-carousel.html",type:"Testimonial Carousel",brand:"Generic",cat:"Content & Social",desc:"Auto-rotating customer testimonials",sz:12},
  {k:"finn-flash",f:"finn-flash.html",type:"Flash Notification",brand:"FINN",cat:"Commerce",desc:"Auto-dismiss salary alert banner",sz:5},
  {k:"whirlpool-flash-drop",f:"whirlpool-flash-drop.html",type:"Flash Sale Countdown",brand:"Whirlpool HK",cat:"Commerce",desc:"Limited-time urgency countdown timer",sz:37},
  {k:"zeil-swipe-cards",f:"zeil-swipe-cards.html",type:"Swipe Cards",brand:"ZEIL",cat:"Commerce",desc:"Tinder-style product discovery swipe",sz:28},
  {k:"f1-marquee-promo-banner",f:"f1-marquee-promo-banner.html",type:"Marquee Promo Banner",brand:"Generic",cat:"Commerce",desc:"Scrolling promotional banner strip",sz:10},
  {k:"f2-pricing-card-trio",f:"f2-pricing-card-trio.html",type:"Pricing Card Trio",brand:"Generic",cat:"Commerce",desc:"Three-tier pricing comparison cards",sz:14},
  {k:"f14-winback-card",f:"f14-winback-card.html",type:"Win-back Card",brand:"Generic",cat:"Commerce",desc:"Re-engagement offer with urgency",sz:12},
  {k:"f15-3d-tilt-card",f:"f15-3d-tilt-card.html",type:"3D Tilt Card",brand:"Generic",cat:"Commerce",desc:"Gyroscope-responsive product card",sz:13},
  {k:"f3-faq-accordion",f:"f3-faq-accordion.html",type:"FAQ Accordion",brand:"Generic",cat:"Foundational",desc:"Expandable question-answer panels",sz:16},
  {k:"f8-trust-badge-strip",f:"f8-trust-badge-strip.html",type:"Trust Badge Strip",brand:"Generic",cat:"Foundational",desc:"Security and trust indicator badges",sz:9},
  {k:"f9-bento-grid-showcase",f:"f9-bento-grid-showcase.html",type:"Bento Grid Showcase",brand:"Generic",cat:"Foundational",desc:"Magazine-style bento feature grid",sz:9},
  {k:"f10-notification-toast",f:"f10-notification-toast.html",type:"Notification Toast",brand:"Generic",cat:"Foundational",desc:"Stackable notification toast system",sz:12},
  {k:"f11-feature-spotlight",f:"f11-feature-spotlight.html",type:"Feature Spotlight",brand:"Generic",cat:"Foundational",desc:"Single-feature highlight with CTA",sz:9},
  {k:"a1-clippath-tier-morph",f:"a1-clippath-tier-morph.html",type:"Clip-path Tier Morph",brand:"Generic",cat:"Animation Toolkit",desc:"CSS clip-path morphing between tiers",sz:15},
  {k:"a2-gsap-stats-showcase",f:"a2-gsap-stats-showcase.html",type:"GSAP Stats Counter",brand:"Generic",cat:"Animation Toolkit",desc:"Animated number counters with GSAP",sz:11},
  {k:"a3-parallax-product-hero",f:"a3-parallax-product-hero.html",type:"Parallax Product Hero",brand:"Generic",cat:"Animation Toolkit",desc:"Multi-layer parallax scroll effect",sz:17},
  {k:"a4-scroll-driven-story",f:"a4-scroll-driven-story.html",type:"Scroll-driven Story",brand:"Generic",cat:"Animation Toolkit",desc:"Scroll-triggered narrative animation",sz:14},
  {k:"a5-swipe-plan-browser",f:"a5-swipe-plan-browser.html",type:"Swipe Plan Browser",brand:"Generic",cat:"Animation Toolkit",desc:"Horizontal swipe card plan selector",sz:14},
  {k:"a6-kinetic-type-reveal",f:"a6-kinetic-type-reveal.html",type:"Kinetic Type Reveal",brand:"Generic",cat:"Animation Toolkit",desc:"Animated typography entrance effect",sz:11},
  {k:"a7-glassmorphism-timer",f:"a7-glassmorphism-timer.html",type:"Glassmorphism Timer",brand:"Generic",cat:"Animation Toolkit",desc:"Frosted glass countdown timer",sz:14},
  {k:"a8-tap-unlock-gate",f:"a8-tap-unlock-gate.html",type:"Tap-to-Unlock Gate",brand:"Generic",cat:"Animation Toolkit",desc:"Interactive tap gate mechanic",sz:16},
  {k:"a9-dual-view-toggle",f:"a9-dual-view-toggle.html",type:"Dual View Toggle",brand:"Generic",cat:"Animation Toolkit",desc:"Before/after view toggle switch",sz:13},
  {k:"a10-lottie-onboarding",f:"a10-lottie-onboarding.html",type:"Lottie Onboarding",brand:"Generic",cat:"Animation Toolkit",desc:"Animated onboarding with Lottie",sz:10},
  {k:"a11-svg-progress-ring",f:"a11-svg-progress-ring.html",type:"SVG Progress Ring",brand:"Generic",cat:"Animation Toolkit",desc:"Circular SVG progress indicator",sz:14},
  {k:"a12-card-flip-offer",f:"a12-card-flip-offer.html",type:"Card Flip Offer",brand:"Generic",cat:"Animation Toolkit",desc:"3D card flip reveal animation",sz:15},
  {k:"a13-particle-celebration",f:"a13-particle-celebration.html",type:"Particle Celebration",brand:"Generic",cat:"Animation Toolkit",desc:"Canvas particle burst effect",sz:15},
  {k:"a14-horizontal-snap-carousel",f:"a14-horizontal-snap-carousel.html",type:"Snap Carousel",brand:"Generic",cat:"Animation Toolkit",desc:"CSS snap-scroll horizontal carousel",sz:12},
  {k:"a15-gradient-text-hero",f:"a15-gradient-text-hero.html",type:"Gradient Text Hero",brand:"Generic",cat:"Animation Toolkit",desc:"Animated gradient text effect",sz:11}
];

var CAT = {
  "Quiz & Survey":     {rgb:"234,179,8",  bg:"rgba(234,179,8,.08)",  tc:"tc-quiz",         accent:"#EAB308"},
  "Gamification":      {rgb:"52,211,153", bg:"rgba(52,211,153,.08)", tc:"tc-gamification",  accent:"#34D399"},
  "Loyalty & Progress":{rgb:"167,139,250",bg:"rgba(167,139,250,.08)",tc:"tc-loyalty",       accent:"#A78BFA"},
  "Interactive Tool":  {rgb:"56,189,248", bg:"rgba(56,189,248,.08)", tc:"tc-interactive",   accent:"#38BDF8"},
  "Content & Social":  {rgb:"251,146,146",bg:"rgba(251,146,146,.08)",tc:"tc-content",       accent:"#FB9292"},
  "Commerce":          {rgb:"244,114,182",bg:"rgba(244,114,182,.08)",tc:"tc-commerce",      accent:"#F472B6"},
  "Foundational":      {rgb:"129,140,248",bg:"rgba(129,140,248,.08)",tc:"tc-foundational",  accent:"#818CF8"},
  "Animation Toolkit": {rgb:"156,163,175",bg:"rgba(156,163,175,.08)",tc:"tc-animation",     accent:"#9CA3AF"}
};

var ICONS = {
  "Personality Quiz":"\u{1F9E0}","Story Adventure Quiz":"\u{1F3AD}","Trivia Quiz":"\u{1F4A1}",
  "Quick Poll":"\u{1F4CA}","Emoji Reaction":"\u{1F60B}","Sentiment Survey":"\u{1F4CB}",
  "Exit Intent Survey":"\u{1F44B}","Drag-to-Rank":"\u{2195}\uFE0F","NPS Collector":"\u{2B50}",
  "App Rating Prompt":"\u{1F31F}","Ang Bao Fortune":"\u{1F9E7}","Daily Fortune":"\u{1F52E}",
  "Scratch Card":"\u{1F3AB}","Mystery Box":"\u{1F381}","Memory Match":"\u{1F0CF}",
  "Prediction Game":"\u{26BD}","Advent Calendar":"\u{1F384}","Spin-to-Win Wheel":"\u{1F3B0}",
  "Badge Trophy Wall":"\u{1F3C6}","Streak Tracker":"\u{1F525}","Milestone Progress":"\u{1F3AF}",
  "Milestone Ring":"\u{1F48D}","Leaderboard":"\u{1F947}","Onboarding Checklist":"\u{2705}",
  "Daily Quest":"\u{2694}\uFE0F","Stamp Card":"\u{1F4E8}","Reward Tier Progress":"\u{1F4C8}",
  "Savings Calculator":"\u{1F4B0}","Goal Pledge":"\u{1F91D}","Switching Calculator":"\u{1F4B1}",
  "Before/After Reveal":"\u{1F3E0}","Plan Comparison":"\u{2696}\uFE0F",
  "Year-in-Review Wrapped":"\u{1F3AC}","Social Proof Ticker":"\u{1F514}",
  "Stories Carousel":"\u{1F4F1}","Team Challenge":"\u{1F465}","PIP Recommendations":"\u{1F3AC}",
  "Testimonial Carousel":"\u{1F4AC}","Flash Notification":"\u{26A1}",
  "Flash Sale Countdown":"\u{23F0}","Swipe Cards":"\u{1F4AB}",
  "Marquee Promo Banner":"\u{1F4E2}","Pricing Card Trio":"\u{1F4B3}",
  "Win-back Card":"\u{1F49C}","3D Tilt Card":"\u{1F4A0}",
  "FAQ Accordion":"\u{2753}","Trust Badge Strip":"\u{1F6E1}\uFE0F",
  "Bento Grid Showcase":"\u{1F371}","Notification Toast":"\u{1F514}",
  "Feature Spotlight":"\u{1F4A1}",
  "Clip-path Tier Morph":"\u{2728}","GSAP Stats Counter":"\u{1F4CA}",
  "Parallax Product Hero":"\u{1F30C}","Scroll-driven Story":"\u{1F4DC}",
  "Swipe Plan Browser":"\u{1F4F1}","Kinetic Type Reveal":"\u{1F520}",
  "Glassmorphism Timer":"\u{23F3}","Tap-to-Unlock Gate":"\u{1F513}",
  "Dual View Toggle":"\u{1F504}","Lottie Onboarding":"\u{1F3A8}",
  "SVG Progress Ring":"\u{2B55}","Card Flip Offer":"\u{1F3B4}",
  "Particle Celebration":"\u{1F389}","Snap Carousel":"\u{27A1}\uFE0F",
  "Gradient Text Hero":"\u{1F308}"
};

// Featured picks
var FEATURED = [
  {k:"eatigo-quiz-final", why:"Most complex — 125KB Enneagram quiz engine"},
  {k:"cny-angbao-fortune", why:"Interactive red packet with fortune reveal animations"},
  {k:"socialgood-spin-wheel", why:"Classic spin-to-win with crypto cashback rewards"},
  {k:"insurance-switching-calculator", why:"Professional financial tool with 3-year projections"},
  {k:"socar-stories", why:"Instagram Stories-style carousel for car sharing"},
  {k:"zeil-swipe-cards", why:"Tinder-style swipe for product discovery"}
];

// State
var activeCat = "All", searchTerm = "", curKey = null, srcCache = {}, modCache = {};

// ═══════════════════════════════════════════════════
// FEATURED SPOTLIGHT
// ═══════════════════════════════════════════════════
function buildSpotlight() {
  var list = document.getElementById("spotList");
  list.innerHTML = FEATURED.map(function(ft, i) {
    var t = T.find(function(x){ return x.k === ft.k; });
    if (!t) return "";
    var c = CAT[t.cat] || CAT["Foundational"];
    return '<div class="spot-card' + (i===0?' active':'') + '" data-k="' + t.k + '">' +
      '<div class="spot-card-top">' +
        '<span class="spot-card-icon">' + (ICONS[t.type]||"\u{1F4C4}") + '</span>' +
        '<span class="spot-card-name">' + t.type + '</span>' +
        '<span class="spot-card-brand">' + t.brand + '</span>' +
      '</div>' +
      '<div class="spot-card-desc">' + ft.why + '</div>' +
      '<span class="spot-card-tag badge" style="color:rgb('+c.rgb+');background:'+c.bg+'">' + t.cat + '</span>' +
    '</div>';
  }).join("");

  // Load first
  loadSpotlight(FEATURED[0].k);

  list.querySelectorAll(".spot-card").forEach(function(card) {
    card.addEventListener("click", function() {
      list.querySelectorAll(".spot-card").forEach(function(x){ x.classList.remove("active"); });
      card.classList.add("active");
      loadSpotlight(card.dataset.k);
    });
    // Double click opens detail
    card.addEventListener("dblclick", function() { openDetail(card.dataset.k); });
  });
}

function loadSpotlight(key) {
  var frame = document.getElementById("spotFrame");
  if (srcCache[key]) {
    frame.srcdoc = srcCache[key];
  } else {
    var t = T.find(function(x){ return x.k === key; });
    if (!t) return;
    frame.srcdoc = '<div style="display:flex;align-items:center;justify-content:center;height:100%;font-family:sans-serif;color:#999;font-size:13px">Loading\u2026</div>';
    fetch("templates/" + t.f).then(function(r){ return r.text(); }).then(function(src) {
      srcCache[key] = src;
      frame.srcdoc = src;
    });
  }
}

// ═══════════════════════════════════════════════════
// TICKER
// ═══════════════════════════════════════════════════
function buildTicker() {
  var track = document.getElementById("ticker");
  var items = T.concat(T);
  track.innerHTML = items.map(function(t) {
    var c = CAT[t.cat] || CAT["Foundational"];
    return '<div class="ticker-item ' + c.tc + '" data-k="' + t.k + '">' +
      '<div class="ti-icon">' + (ICONS[t.type]||"\u{1F4C4}") + '</div>' +
      '<div><div class="ti-name">' + t.type + '</div><div class="ti-brand">' + t.brand + '</div></div></div>';
  }).join("");
  track.querySelectorAll(".ticker-item").forEach(function(c) {
    c.addEventListener("click", function(){ openDetail(c.dataset.k); });
  });
}

// ═══════════════════════════════════════════════════
// FILTERS + GRID
// ═══════════════════════════════════════════════════
function buildFilters() {
  var cats = {};
  T.forEach(function(t){ cats[t.cat] = (cats[t.cat]||0)+1; });
  var wrap = document.getElementById("filters");
  var html = '<div class="pill on" data-cat="All">All<span class="ct">'+T.length+'</span></div>';
  Object.keys(cats).sort(function(a,b){ return cats[b]-cats[a]; }).forEach(function(c) {
    html += '<div class="pill" data-cat="'+c+'">'+c+'<span class="ct">'+cats[c]+'</span></div>';
  });
  wrap.innerHTML = html;
  wrap.querySelectorAll(".pill").forEach(function(p) {
    p.addEventListener("click", function() {
      wrap.querySelectorAll(".pill").forEach(function(x){ x.classList.remove("on"); });
      p.classList.add("on");
      activeCat = p.dataset.cat;
      renderGrid();
    });
  });
}

function getFiltered() {
  return T.filter(function(t) {
    if (activeCat !== "All" && t.cat !== activeCat) return false;
    if (searchTerm) {
      var s = searchTerm.toLowerCase();
      return (t.type+" "+t.brand+" "+t.cat+" "+t.desc+" "+t.k).toLowerCase().indexOf(s) !== -1;
    }
    return true;
  });
}

function renderGrid() {
  var items = getFiltered(), grid = document.getElementById("grid");
  document.getElementById("counter").textContent = items.length + " / " + T.length;
  document.getElementById("gridCount").textContent = items.length + " templates";
  if (!items.length) { grid.innerHTML = '<div class="empty-state">No templates match your search.</div>'; return; }
  grid.innerHTML = items.map(function(t,i) {
    var c = CAT[t.cat] || CAT["Foundational"];
    return '<div class="card" data-k="'+t.k+'" style="animation-delay:'+Math.min(i*18,350)+'ms;--cardAccent:'+c.accent+'">' +
      '<div class="card-top"><div class="card-icon" style="background:'+c.bg+'">'+(ICONS[t.type]||"\u{1F4C4}")+'</div>' +
      '<div class="card-meta"><div class="card-name">'+t.type+'</div><div class="card-brand">'+t.brand+'</div></div></div>' +
      '<div class="card-desc">'+t.desc+'</div>' +
      '<div class="card-foot"><span class="badge" style="color:rgb('+c.rgb+');background:'+c.bg+'">'+t.cat+'</span>' +
      '<span class="badge badge-size">'+t.sz+' KB</span></div></div>';
  }).join("");
  grid.querySelectorAll(".card").forEach(function(c) {
    c.addEventListener("mousemove", function(e) {
      var r = c.getBoundingClientRect();
      c.style.setProperty("--mx",(e.clientX-r.left)+"px");
      c.style.setProperty("--my",(e.clientY-r.top)+"px");
    });
    c.addEventListener("click", function(){ openDetail(c.dataset.k); });
  });
}

// ═══════════════════════════════════════════════════
// DETAIL VIEW
// ═══════════════════════════════════════════════════
function getSrc() { return modCache[curKey] || srcCache[curKey] || ""; }

function openDetail(key) {
  curKey = key;
  var t = T.find(function(x){ return x.k === key; });
  if (!t) return;
  document.getElementById("dTitle").textContent = t.type + "  \u00b7  " + t.brand;
  document.getElementById("dSub").textContent = t.f + "  \u00b7  " + t.sz + " KB";
  document.getElementById("overlay").classList.add("open");
  document.body.style.overflow = "hidden";
  setTab("cfg");
  if (srcCache[key]) {
    loadPreview(getSrc()); buildConfig(key,getSrc()); renderCode(getSrc());
  } else {
    document.getElementById("pFrame").srcdoc = '<div style="display:flex;align-items:center;justify-content:center;height:100%;font-family:sans-serif;color:#999;font-size:13px">Loading\u2026</div>';
    document.getElementById("cfgPanel").innerHTML = '<div class="loading-center"><div class="spinner"></div></div>';
    fetch("templates/"+t.f).then(function(r){ return r.text(); }).then(function(src) {
      srcCache[key] = src;
      if (curKey===key) { loadPreview(getSrc()); buildConfig(key,getSrc()); renderCode(getSrc()); }
    }).catch(function() {
      document.getElementById("pFrame").srcdoc = '<div style="display:flex;align-items:center;justify-content:center;height:100%;font-family:sans-serif;color:#c00;font-size:13px;padding:20px;text-align:center">Failed to load.<br>Check /templates/ folder.</div>';
    });
  }
}

function closeDetail() {
  document.getElementById("overlay").classList.remove("open");
  document.body.style.overflow = "";
  document.getElementById("pFrame").srcdoc = "";
  curKey = null;
}

function loadPreview(s) { document.getElementById("pFrame").srcdoc = s; }
function renderCode(s) { document.getElementById("codeArea").textContent = s; }

// ═══════════════════════════════════════════════════
// CONFIG EDITOR
// ═══════════════════════════════════════════════════
function buildConfig(key, src) {
  var panel = document.getElementById("cfgPanel");
  var match = src.match(/((?:const|var|let)\s+CONFIG\s*=\s*)\{/);
  if (!match) { panel.innerHTML = '<div class="cfg-empty">No CONFIG block found.<br>Use the <b>Source Code</b> tab to edit directly.</div>'; return; }
  var start = src.indexOf(match[0]), braceStart = src.indexOf("{",start);
  var depth=0, i=braceStart, configStr="";
  for (; i<src.length; i++) { if(src[i]==="{") depth++; if(src[i]==="}") depth--; if(depth===0){configStr=src.substring(braceStart,i+1);break;} }
  var config;
  try { config = new Function("return "+configStr)(); } catch(e) { panel.innerHTML = '<div class="cfg-empty">CONFIG found but couldn\'t parse.<br>Edit in <b>Source Code</b> tab.</div>'; return; }
  var html = "";
  function renderFields(obj,prefix) {
    Object.keys(obj).forEach(function(k) {
      var val=obj[k], path=prefix?prefix+"."+k:k, label=k.replace(/([A-Z])/g," $1").replace(/_/g," ").trim();
      if (val!==null && typeof val==="object" && !Array.isArray(val)) {
        html += '<div class="cfg-group"><div class="cfg-group-title">'+label+'</div>'; renderFields(val,path); html += '</div>';
      } else if (typeof val==="boolean") {
        html += '<div class="cfg-field"><label class="cfg-label">'+label+'</label><select class="cfg-input" data-path="'+path+'" data-type="bool"><option value="true"'+(val?' selected':'')+'>true</option><option value="false"'+(!val?' selected':'')+'>false</option></select></div>';
      } else if (typeof val==="number") {
        html += '<div class="cfg-field"><label class="cfg-label">'+label+'</label><input class="cfg-input" data-path="'+path+'" data-type="num" type="number" value="'+val+'"></div>';
      } else if (typeof val==="string" && /^#[0-9a-f]{3,8}$/i.test(val)) {
        html += '<div class="cfg-field"><label class="cfg-label">'+label+'</label><div class="cfg-color-wrap"><div class="cfg-color-swatch" style="background:'+val+'"><input type="color" value="'+val+'" data-path="'+path+'" data-type="color"></div><input class="cfg-input" data-path="'+path+'" data-type="str" value="'+escA(val)+'" style="flex:1"></div></div>';
      } else if (Array.isArray(val)) {
        html += '<div class="cfg-field"><label class="cfg-label">'+label+' (array)</label><input class="cfg-input" data-path="'+path+'" data-type="arr" value="'+escA(JSON.stringify(val))+'"></div>';
      } else {
        var long = typeof val==="string" && val.length>60;
        html += long ? '<div class="cfg-field"><label class="cfg-label">'+label+'</label><textarea class="cfg-input" data-path="'+path+'" data-type="str" rows="3">'+escH(String(val))+'</textarea></div>'
                     : '<div class="cfg-field"><label class="cfg-label">'+label+'</label><input class="cfg-input" data-path="'+path+'" data-type="str" value="'+escA(String(val))+'"></div>';
      }
    });
  }
  renderFields(config,"");
  panel.innerHTML = html;
  panel.querySelectorAll("[data-path]").forEach(function(el) { el.addEventListener("input",function(){ applyConfig(key,config,panel); }); });
}

function applyConfig(key,config,panel) {
  panel.querySelectorAll("[data-path]").forEach(function(el) {
    var path=el.dataset.path.split("."), t=el.dataset.type, val;
    if(t==="bool") val=el.value==="true"; else if(t==="num") val=parseFloat(el.value)||0;
    else if(t==="color") { val=el.value; el.closest(".cfg-color-swatch").style.background=val; }
    else if(t==="arr") { try{val=JSON.parse(el.value);}catch(e){return;} } else val=el.value;
    var obj=config; for(var i=0;i<path.length-1;i++) obj=obj[path[i]]; obj[path[path.length-1]]=val;
  });
  var src=srcCache[key], match=src.match(/((?:const|var|let)\s+CONFIG\s*=\s*)\{/);
  if(!match) return;
  var start=src.indexOf(match[0]), bs=src.indexOf("{",start), depth=0, end=bs;
  for(;end<src.length;end++){if(src[end]==="{")depth++;if(src[end]==="}")depth--;if(depth===0)break;}
  var newSrc = src.substring(0,bs)+JSON.stringify(config,null,2)+src.substring(end+1);
  modCache[key]=newSrc; loadPreview(newSrc); renderCode(newSrc);
}

// ═══════════════════════════════════════════════════
// UTILITIES
// ═══════════════════════════════════════════════════
function setTab(t) {
  document.querySelectorAll(".ed-tab").forEach(function(x){ x.classList.toggle("on",x.dataset.t===t); });
  document.querySelectorAll(".ed-panel").forEach(function(x){ x.classList.toggle("on",x.dataset.t===t); });
}
function escH(s) { var d=document.createElement("div"); d.textContent=s; return d.innerHTML; }
function escA(s) { return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"); }
function toast(m) { var t=document.getElementById("toast"); t.textContent=m; t.classList.add("show"); setTimeout(function(){t.classList.remove("show");},2200); }
function copyText(t) { navigator.clipboard.writeText(t).then(function(){toast("Copied to clipboard");}); }
function dlFile(n,c) { var b=new Blob([c],{type:"text/html"}),a=document.createElement("a"); a.href=URL.createObjectURL(b); a.download=n; a.click(); URL.revokeObjectURL(a.href); toast("Downloaded "+n); }

// ═══════════════════════════════════════════════════
// INIT
// ═══════════════════════════════════════════════════
buildSpotlight();
buildTicker();
buildFilters();
renderGrid();

document.getElementById("search").addEventListener("input",function(e){ searchTerm=e.target.value; renderGrid(); });
document.getElementById("backBtn").addEventListener("click",closeDetail);
document.addEventListener("keydown",function(e){ if(e.key==="Escape"&&curKey) closeDetail(); });

["cpBtn","cpBtn2","cpBtn3"].forEach(function(id){ document.getElementById(id).addEventListener("click",function(){ if(curKey) copyText(getSrc()); }); });
["dlBtn","dlBtn2","dlBtn3"].forEach(function(id){ document.getElementById(id).addEventListener("click",function(){ if(curKey){var t=T.find(function(x){return x.k===curKey;}); dlFile(t?t.f:"template.html",getSrc());} }); });
document.getElementById("refBtn").addEventListener("click",function(){ if(curKey){modCache[curKey]=null; loadPreview(getSrc()); buildConfig(curKey,getSrc()); renderCode(getSrc()); toast("Reset to original");} });
document.querySelectorAll(".ed-tab").forEach(function(tab){ tab.addEventListener("click",function(){setTab(tab.dataset.t);}); });
document.querySelectorAll(".hero-phone").forEach(function(p){ p.addEventListener("click",function(){openDetail(p.dataset.k);}); });

// Color sync
document.addEventListener("input",function(e) {
  if(e.target.type==="color"&&e.target.dataset.path) {
    var wrap=e.target.closest(".cfg-color-wrap");
    if(wrap){var txt=wrap.querySelector('input.cfg-input[data-type="str"]'); if(txt){txt.value=e.target.value; txt.dispatchEvent(new Event("input"));}}
  }
});
</script>
</body>
</html>
