<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    const CONFIG = {
      includeDismissButton: true,

      brand: {
        name: "Tune Talk",
        primary: "#E11D48",
        primaryLight: "#FB7185",
        dark: "#0A0A0F",
        darkCard: "#141420",
        text: "#FFFFFF",
      },

      loyalty: {
        headline: "Your Rewards Status",
        programName: "TuneTalk Rewards",
      },

      user: {
        name: "Sarah",
        currentPoints: 2750,
        currentTier: "silver", // matches a tier id below
      },

      tiers: [
        {
          id: "bronze",
          name: "Bronze",
          emoji: "ðŸ¥‰",
          color: "#CD7F32",
          threshold: 0,
          benefits: ["1GB bonus data/month", "Birthday reward"],
        },
        {
          id: "silver",
          name: "Silver",
          emoji: "ðŸ¥ˆ",
          color: "#94A3B8",
          threshold: 1500,
          benefits: ["3GB bonus data/month", "Priority support", "10% top-up bonus"],
        },
        {
          id: "gold",
          name: "Gold",
          emoji: "ðŸ¥‡",
          color: "#F59E0B",
          threshold: 4000,
          benefits: ["5GB bonus data/month", "Free roaming days", "20% top-up bonus", "Exclusive deals"],
        },
        {
          id: "platinum",
          name: "Platinum",
          emoji: "ðŸ’Ž",
          color: "#8B5CF6",
          threshold: 8000,
          benefits: ["Unlimited bonus data", "Free intl calls 60min", "VIP support line", "All deals unlocked"],
        },
      ],

      cta: {
        text: "Earn More Points",
        url: "tunetalk://rewards/earn",
      },

      events: {
        tierViewed:     "TierProgress_Viewed",
        tierCTA:        "TierProgress_CTA_Clicked",
        tierDismissed:  "TierProgress_Dismissed",
      },
    };
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700;800&display=swap">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --primary:#E11D48;--primary-light:#FB7185;
      --dark:#0A0A0F;--dark-card:#141420;
      --text:#FFF;--text-muted:rgba(255,255,255,.4);
      --border:rgba(255,255,255,.06);
    }
    body{
      background:var(--dark);min-height:100vh;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      font-family:'DM Sans',sans-serif;color:var(--text);
      padding:44px 20px 32px;overflow:hidden;
    }
    .dismiss{position:fixed;top:12px;right:12px;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:rgba(255,255,255,.4);font-size:18px;cursor:pointer;z-index:100;display:flex;align-items:center;justify-content:center}.dismiss:active{transform:scale(.9)}

    @keyframes fadeIn{to{opacity:1}}
    @keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}

    .content{width:100%;max-width:360px}

    /* Header */
    .header{text-align:center;margin-bottom:24px}
    .h-program{
      font-size:10px;font-weight:800;letter-spacing:1.5px;text-transform:uppercase;
      color:var(--primary-light);margin-bottom:6px;
      opacity:0;animation:fadeIn .4s .1s ease forwards;
    }
    .h-headline{font-size:22px;font-weight:800;margin-bottom:4px;opacity:0;animation:fadeIn .5s .2s ease forwards}
    .h-points{
      font-size:14px;color:var(--text-muted);
      opacity:0;animation:fadeIn .5s .3s ease forwards;
    }
    .h-points strong{color:var(--text);font-weight:800;font-size:18px}

    /* Tier track */
    .tier-track-wrap{
      margin-bottom:24px;
      opacity:0;animation:fadeIn .5s .4s ease forwards;
    }

    .tier-nodes{
      display:flex;justify-content:space-between;align-items:flex-end;
      margin-bottom:8px;position:relative;
    }
    .tier-node{
      display:flex;flex-direction:column;align-items:center;
      position:relative;z-index:2;
    }
    .tn-emoji{font-size:24px;margin-bottom:4px;transition:transform .3s;opacity:.35}
    .tn-emoji.active{opacity:1;transform:scale(1.2)}
    .tn-emoji.reached{opacity:.7}
    .tn-name{font-size:10px;font-weight:700;color:var(--text-muted);transition:color .3s}
    .tn-name.active{color:var(--text);font-weight:800}
    .tn-threshold{font-size:9px;color:rgba(255,255,255,.2);margin-top:1px}

    /* Progress bar */
    .progress-track{
      width:100%;height:6px;border-radius:3px;
      background:rgba(255,255,255,.06);
      position:relative;overflow:hidden;
    }
    .progress-fill{
      height:100%;border-radius:3px;
      width:0%;transition:width 1.2s cubic-bezier(.16,1,.3,1);
      position:relative;
    }
    /* Shimmer on fill */
    .progress-fill::after{
      content:'';position:absolute;top:0;bottom:0;left:0;right:0;
      background:linear-gradient(90deg,transparent 30%,rgba(255,255,255,.25) 50%,transparent 70%);
      animation:barShimmer 2s infinite;
    }
    @keyframes barShimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}

    /* Tier dots on track */
    .tier-dots{
      display:flex;justify-content:space-between;
      position:relative;top:-10px;padding:0 1px;
      pointer-events:none;
    }
    .tier-dot{
      width:14px;height:14px;border-radius:50%;
      border:2px solid rgba(255,255,255,.1);
      background:var(--dark);
      transition:all .4s ease;
      position:relative;z-index:3;
    }
    .tier-dot.reached{border-color:rgba(255,255,255,.2);background:rgba(255,255,255,.15)}
    .tier-dot.active{
      border-color:var(--dot-color,var(--primary));
      background:var(--dot-color,var(--primary));
      box-shadow:0 0 0 4px rgba(255,255,255,.06),0 0 12px var(--dot-color,var(--primary));
    }

    /* Next tier card */
    .next-tier{
      background:var(--dark-card);border:1px solid var(--border);
      border-radius:18px;padding:18px;margin-bottom:20px;
      opacity:0;transform:translateY(8px);
      animation:fadeInUp .5s .7s ease forwards;
    }
    .nt-header{
      display:flex;align-items:center;justify-content:space-between;
      margin-bottom:12px;
    }
    .nt-label{font-size:12px;color:var(--text-muted)}
    .nt-label strong{color:var(--text);font-weight:800}
    .nt-points-left{
      font-size:11px;font-weight:700;
      padding:4px 10px;border-radius:20px;
    }

    .nt-benefits{display:flex;flex-direction:column;gap:6px}
    .nt-benefit{
      display:flex;align-items:center;gap:8px;
      font-size:12px;color:rgba(255,255,255,.6);
    }
    .nt-check{
      width:18px;height:18px;border-radius:6px;
      display:flex;align-items:center;justify-content:center;
      font-size:9px;flex-shrink:0;
    }
    .nt-check.locked{background:rgba(255,255,255,.04);color:rgba(255,255,255,.15)}
    .nt-check.unlocked{color:#10B981}

    /* CTA */
    .cta-wrap{
      opacity:0;animation:fadeInUp .5s .85s ease forwards;
      transform:translateY(8px);
    }
    .cta{
      display:flex;align-items:center;justify-content:center;
      width:100%;padding:16px;border-radius:16px;border:none;
      font-family:'DM Sans',sans-serif;font-size:15px;font-weight:800;
      cursor:pointer;color:#fff;background:var(--primary);
      transition:transform .2s;
    }
    .cta:active{transform:scale(.97)}
  </style>
</head>
<body>
  <div class="content">
    <div class="header">
      <div class="h-program" id="program"></div>
      <h2 class="h-headline" id="headline"></h2>
      <p class="h-points" id="points"></p>
    </div>

    <div class="tier-track-wrap">
      <div class="tier-nodes" id="nodes"></div>
      <div class="progress-track"><div class="progress-fill" id="fill"></div></div>
      <div class="tier-dots" id="dots"></div>
    </div>

    <div class="next-tier" id="nextTier"></div>

    <div class="cta-wrap">
      <button class="cta" id="cta"></button>
    </div>
  </div>

  <script>
    function fireEvent(n,p){try{if(window.CleverTap)window.CleverTap.pushEvent(n,p||{});else if(window.webkit?.messageHandlers?.clevertap)window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({event:n,properties:p||{}}));else if(window.clevertap)window.clevertap.event.push(n,p||{})}catch(e){console.log("CT:",n,p)}}
    function dismiss(){fireEvent(CONFIG.events.tierDismissed);try{location.href="wzrk://exit"}catch(e){}}

    (function init(){
      if(CONFIG.includeDismissButton){const b=document.createElement("button");b.className="dismiss";b.innerHTML="âœ•";b.onclick=dismiss;document.body.appendChild(b)}

      const tiers=CONFIG.tiers;
      const pts=CONFIG.user.currentPoints;
      const currentId=CONFIG.user.currentTier;
      const currentIdx=tiers.findIndex(t=>t.id===currentId);
      const maxThreshold=tiers[tiers.length-1].threshold;

      document.getElementById("program").textContent=CONFIG.loyalty.programName;
      document.getElementById("headline").textContent=CONFIG.loyalty.headline;
      document.getElementById("points").innerHTML=`<strong>${pts.toLocaleString()}</strong> points earned`;

      // Build tier nodes
      const nodesEl=document.getElementById("nodes");
      const dotsEl=document.getElementById("dots");
      tiers.forEach((tier,i)=>{
        const isActive=tier.id===currentId;
        const isReached=i<=currentIdx;

        // Node (emoji + name)
        const node=document.createElement("div");
        node.className="tier-node";
        node.innerHTML=`
          <span class="tn-emoji ${isActive?"active":isReached?"reached":""}">${tier.emoji}</span>
          <span class="tn-name ${isActive?"active":""}">${tier.name}</span>
          <span class="tn-threshold">${tier.threshold>0?tier.threshold.toLocaleString()+" pts":"Start"}</span>
        `;
        nodesEl.appendChild(node);

        // Dot on track
        const dot=document.createElement("div");
        dot.className="tier-dot"+(isActive?" active":isReached?" reached":"");
        if(isActive)dot.style.setProperty("--dot-color",tier.color);
        dotsEl.appendChild(dot);
      });

      // Progress fill
      const fill=document.getElementById("fill");
      const fillPct=Math.min(100,(pts/maxThreshold)*100);
      const currentColor=tiers[currentIdx].color;
      const nextColor=currentIdx<tiers.length-1?tiers[currentIdx+1].color:currentColor;
      fill.style.background=`linear-gradient(90deg,${currentColor},${nextColor})`;
      setTimeout(()=>{fill.style.width=fillPct+"%"},500);

      // Next tier card
      const nextEl=document.getElementById("nextTier");
      if(currentIdx<tiers.length-1){
        const next=tiers[currentIdx+1];
        const ptsNeeded=next.threshold-pts;
        const pctToNext=Math.round(((pts-tiers[currentIdx].threshold)/(next.threshold-tiers[currentIdx].threshold))*100);

        nextEl.innerHTML=`
          <div class="nt-header">
            <span class="nt-label">Next: <strong>${next.emoji} ${next.name}</strong></span>
            <span class="nt-points-left" style="background:${next.color}15;color:${next.color}">${ptsNeeded.toLocaleString()} pts to go</span>
          </div>
          <div class="nt-benefits">
            ${next.benefits.map(b=>`
              <div class="nt-benefit">
                <span class="nt-check locked">ðŸ”’</span>
                <span>${b}</span>
              </div>
            `).join("")}
          </div>
        `;
      }else{
        // Already at max tier
        const cur=tiers[currentIdx];
        nextEl.innerHTML=`
          <div class="nt-header">
            <span class="nt-label">${cur.emoji} <strong>You're at the top!</strong></span>
          </div>
          <div class="nt-benefits">
            ${cur.benefits.map(b=>`
              <div class="nt-benefit">
                <span class="nt-check unlocked">âœ“</span>
                <span>${b}</span>
              </div>
            `).join("")}
          </div>
        `;
      }

      // CTA
      const cta=document.getElementById("cta");
      cta.textContent=CONFIG.cta.text;
      cta.onclick=()=>{
        fireEvent(CONFIG.events.tierCTA,{current_tier:currentId,points:pts});
        if(CONFIG.cta.url)location.href=CONFIG.cta.url;
      };

      fireEvent(CONFIG.events.tierViewed,{
        current_tier:currentId,
        points:pts,
        next_tier:currentIdx<tiers.length-1?tiers[currentIdx+1].id:"max",
        points_to_next:currentIdx<tiers.length-1?tiers[currentIdx+1].threshold-pts:0,
      });
    })();
  </script>
</body>
</html>
