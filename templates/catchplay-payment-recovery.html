<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Payment Recovery</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&display=swap');
  *{margin:0;padding:0;box-sizing:border-box}
  :root{
    --bg:#0A0A0F;--card:#14141F;--card2:#1A1A28;
    --border:rgba(255,255,255,0.06);
    --gold:#D4A843;--gold-dark:#B8922E;--gold-glow:rgba(212,168,67,0.15);
    --red:#EF4444;--red-glow:rgba(239,68,68,0.12);
    --text:#EAEAEA;--muted:rgba(255,255,255,0.4);
  }
  body{
    font-family:'DM Sans',sans-serif;background:var(--bg);
    color:var(--text);max-width:390px;margin:0 auto;
    min-height:100vh;display:flex;flex-direction:column;
    align-items:center;justify-content:center;padding:20px;
    overflow:hidden;
  }

  /* Dismiss */
  .dismiss{
    position:absolute;top:12px;right:12px;width:28px;height:28px;
    background:rgba(255,255,255,0.08);border:none;border-radius:50%;
    color:var(--muted);font-size:14px;cursor:pointer;z-index:10;
    display:flex;align-items:center;justify-content:center;
  }

  .main-card{
    width:100%;background:var(--card);border:1px solid var(--border);
    border-radius:20px;overflow:hidden;
    animation:cardIn 0.5s cubic-bezier(0.34,1.56,0.64,1) both;
  }
  @keyframes cardIn{0%{opacity:0;transform:scale(0.9) translateY(20px)}100%{opacity:1;transform:scale(1) translateY(0)}}

  /* Brand bar */
  .brand-bar{
    display:flex;align-items:center;gap:10px;
    padding:16px 20px;border-bottom:1px solid var(--border);
  }
  .brand-logo{
    width:32px;height:32px;background:var(--gold);border-radius:8px;
    display:flex;align-items:center;justify-content:center;
    font-size:12px;font-weight:800;color:var(--bg);
  }
  .brand-name{font-size:12px;font-weight:600;color:var(--muted)}
  .brand-urgent{
    margin-left:auto;padding:4px 8px;border-radius:6px;
    background:var(--red-glow);font-size:10px;font-weight:600;
    color:var(--red);
  }

  /* Alert section */
  .alert-section{padding:24px 20px 16px;text-align:center}
  .alert-icon{
    width:56px;height:56px;border-radius:50%;
    background:var(--red-glow);border:2px solid rgba(239,68,68,0.2);
    display:flex;align-items:center;justify-content:center;
    font-size:24px;margin:0 auto 16px;
    animation:alertPulse 2s ease infinite;
  }
  @keyframes alertPulse{
    0%,100%{box-shadow:0 0 0 0 rgba(239,68,68,0.2)}
    50%{box-shadow:0 0 0 12px transparent}
  }
  .alert-title{font-size:20px;font-weight:700;color:#fff;margin-bottom:6px}
  .alert-sub{font-size:13px;color:var(--muted);line-height:1.5}

  /* Countdown */
  .countdown-section{
    margin:0 20px 16px;padding:16px;
    background:var(--red-glow);border:1px solid rgba(239,68,68,0.12);
    border-radius:14px;text-align:center;
  }
  .cd-label{font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--red);margin-bottom:8px}
  .cd-timer{display:flex;justify-content:center;gap:8px}
  .cd-unit{text-align:center}
  .cd-num{
    width:48px;height:48px;background:rgba(0,0,0,0.3);
    border-radius:10px;display:flex;align-items:center;justify-content:center;
    font-size:22px;font-weight:800;color:#fff;
    font-variant-numeric:tabular-nums;
  }
  .cd-unit-label{font-size:9px;color:var(--muted);margin-top:4px;text-transform:uppercase;letter-spacing:1px}

  /* What you'll lose */
  .lose-section{padding:0 20px 16px}
  .lose-title{font-size:11px;font-weight:600;letter-spacing:1px;text-transform:uppercase;color:var(--muted);margin-bottom:10px}
  .lose-item{
    display:flex;align-items:center;gap:10px;
    padding:10px 0;border-bottom:1px solid var(--border);
  }
  .lose-item:last-child{border-bottom:none}
  .lose-icon{
    width:36px;height:36px;border-radius:10px;
    display:flex;align-items:center;justify-content:center;
    font-size:16px;flex-shrink:0;
    background:linear-gradient(135deg,rgba(212,168,67,0.1),rgba(212,168,67,0.03));
  }
  .lose-text{flex:1;font-size:13px;color:var(--text)}
  .lose-strike{
    text-decoration:line-through;color:var(--muted);
    font-size:11px;flex-shrink:0;
  }

  /* CTAs */
  .cta-area{padding:16px 20px 24px;display:flex;flex-direction:column;gap:8px}
  .btn-primary{
    width:100%;padding:16px;border:none;border-radius:14px;
    background:var(--gold);color:var(--bg);
    font-family:'DM Sans',sans-serif;font-size:15px;font-weight:700;
    cursor:pointer;transition:all 0.2s;
  }
  .btn-primary:active{transform:scale(0.97);background:var(--gold-dark)}
  .btn-link{
    width:100%;padding:10px;border:none;background:transparent;
    color:var(--muted);font-family:'DM Sans',sans-serif;
    font-size:12px;cursor:pointer;text-align:center;
  }

  /* Reassurance */
  .reassure{
    text-align:center;padding:0 20px 20px;
    font-size:11px;color:var(--muted);
  }
  .reassure-icon{margin-right:4px}
</style>
</head>
<body>

<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // CONFIG
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const CONFIG = {
    includeDismissButton: true,

    brand: {
      name: "CATCHPLAY+",
      logo: "C+",
    },

    alert: {
      title: "Your payment didn't go through",
      subtitle: "Your Premium subscription will be paused unless we can process your payment",
      urgentLabel: "Action needed",
    },

    // Countdown: hours from now until access expires
    countdown: {
      hoursRemaining: 47,
      label: "Access expires in",
    },

    // What they'll lose
    losses: [
      { emoji: "ðŸŽ¬", text: "Unlimited HD & 4K streaming", strike: "" },
      { emoji: "ðŸ“º", text: "Your 12 saved watchlist titles", strike: "" },
      { emoji: "ðŸ‘¥", text: "4 simultaneous screens", strike: "â†’ 1 screen" },
      { emoji: "ðŸ“¥", text: "Offline downloads (8 titles saved)", strike: "Deleted" },
      { emoji: "ðŸ”¥", text: "Your 23-day viewing streak", strike: "Reset" },
    ],

    cta: {
      primaryText: "Update Payment Method",
      primaryUrl: "catchplay://account/payment",
      secondaryText: "Remind me later",
    },

    reassurance: "Takes less than 30 seconds Â· Your card details are encrypted",

    tracking: {
      eventPrefix: "PaymentRecovery",
    },
  };
</script>

<button class="dismiss" id="dismissBtn" onclick="dismiss()" style="display:none">âœ•</button>

<div class="main-card">
  <div class="brand-bar">
    <div class="brand-logo" id="brandLogo"></div>
    <div class="brand-name" id="brandName"></div>
    <div class="brand-urgent" id="urgentLabel"></div>
  </div>

  <div class="alert-section">
    <div class="alert-icon">âš ï¸</div>
    <div class="alert-title" id="alertTitle"></div>
    <div class="alert-sub" id="alertSub"></div>
  </div>

  <!-- Countdown -->
  <div class="countdown-section">
    <div class="cd-label" id="cdLabel"></div>
    <div class="cd-timer">
      <div class="cd-unit"><div class="cd-num" id="cdHours">00</div><div class="cd-unit-label">hrs</div></div>
      <div class="cd-unit"><div class="cd-num" id="cdMins">00</div><div class="cd-unit-label">min</div></div>
      <div class="cd-unit"><div class="cd-num" id="cdSecs">00</div><div class="cd-unit-label">sec</div></div>
    </div>
  </div>

  <!-- What you'll lose -->
  <div class="lose-section">
    <div class="lose-title">What you'll lose</div>
    <div id="loseList"></div>
  </div>

  <!-- CTAs -->
  <div class="cta-area">
    <button class="btn-primary" id="btnPrimary" onclick="updatePayment()"></button>
    <button class="btn-link" id="btnSecondary" onclick="remindLater()"></button>
  </div>

  <div class="reassure" id="reassure"></div>
</div>

<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // INIT
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const { brand, alert: alertCfg, countdown, losses, cta, reassurance, tracking, includeDismissButton } = CONFIG;

  if (includeDismissButton) document.getElementById('dismissBtn').style.display = 'flex';

  document.getElementById('brandLogo').textContent = brand.logo;
  document.getElementById('brandName').textContent = brand.name;
  document.getElementById('urgentLabel').textContent = alertCfg.urgentLabel;
  document.getElementById('alertTitle').textContent = alertCfg.title;
  document.getElementById('alertSub').textContent = alertCfg.subtitle;
  document.getElementById('cdLabel').textContent = countdown.label;
  document.getElementById('btnPrimary').textContent = cta.primaryText;
  document.getElementById('btnSecondary').textContent = cta.secondaryText;
  document.getElementById('reassure').innerHTML = '<span class="reassure-icon">ðŸ”’</span>' + reassurance;

  // Build loss items
  const loseList = document.getElementById('loseList');
  losses.forEach(function(l) {
    const div = document.createElement('div');
    div.className = 'lose-item';
    div.innerHTML =
      '<div class="lose-icon">' + l.emoji + '</div>' +
      '<div class="lose-text">' + l.text + '</div>' +
      (l.strike ? '<div class="lose-strike">' + l.strike + '</div>' : '');
    loseList.appendChild(div);
  });

  // Countdown timer
  let remaining = countdown.hoursRemaining * 3600;
  function updateTimer() {
    if (remaining <= 0) return;
    remaining--;
    const h = Math.floor(remaining / 3600);
    const m = Math.floor((remaining % 3600) / 60);
    const s = remaining % 60;
    document.getElementById('cdHours').textContent = String(h).padStart(2, '0');
    document.getElementById('cdMins').textContent = String(m).padStart(2, '0');
    document.getElementById('cdSecs').textContent = String(s).padStart(2, '0');
  }
  updateTimer();
  setInterval(updateTimer, 1000);

  trackEvent(tracking.eventPrefix + '_Viewed', {
    hours_remaining: countdown.hoursRemaining
  });

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ACTIONS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function updatePayment() {
    trackEvent(tracking.eventPrefix + '_UpdatePayment_Clicked', {
      hours_remaining: Math.ceil(remaining / 3600)
    });
    if (cta.primaryUrl) window.location.href = cta.primaryUrl;
  }

  function remindLater() {
    trackEvent(tracking.eventPrefix + '_RemindLater', {
      hours_remaining: Math.ceil(remaining / 3600)
    });
    try { window.location.href = 'wzrk://exit'; } catch(e) {}
  }

  function dismiss() {
    trackEvent(tracking.eventPrefix + '_Dismissed');
    try { window.location.href = 'wzrk://exit'; } catch(e) {}
  }

  function trackEvent(name, props) {
    console.log('CT Event:', name, props || {});
    if (window.CleverTap) window.CleverTap.pushEvent(name, props || {});
    if (window.clevertap) window.clevertap.event.push(name, props || {});
    try { window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({ event: name, properties: props || {} })); } catch(e) {}
  }
</script>
</body>
</html>
