<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    const CONFIG = {
      includeDismissButton: true,

      brand: {
        name: "BondbloX",
        primary: "#3B82F6",
        primaryLight: "#93C5FD",
        accent: "#F59E0B",
        accentLight: "#FCD34D",
        dark: "#070B14",
        darkCard: "#111827",
        white: "#FFFFFF",
        green: "#10B981",
      },

      milestone: {
        headline: "First Bond Purchased!",
        subheadline: "You've taken the first step to building your bond portfolio",
        emoji: "üè¶",
        stat: { value: 1, label: "bond in your portfolio" },
      },

      particles: {
        count: 45,
        colors: ["#3B82F6", "#93C5FD", "#F59E0B", "#FCD34D", "#10B981", "#FFFFFF"],
        shapes: ["square", "circle", "triangle"],
        duration: 2.8,
      },

      reward: {
        enabled: true,
        emoji: "üèÖ",
        text: "Early Investor Badge",
        description: "You're among the first 500 to invest on BondbloX",
      },

      cta: {
        text: "Explore More Bonds",
        url: "bondblox://marketplace",
      },

      events: {
        milestoneViewed:     "Celebration_Viewed",
        milestoneCTAClicked: "Celebration_CTA_Clicked",
        milestoneDismissed:  "Celebration_Dismissed",
      },
    };
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700;800&display=swap">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --primary: #3B82F6;
      --primary-light: #93C5FD;
      --accent: #F59E0B;
      --dark: #070B14;
      --dark-card: #111827;
      --text: #FFFFFF;
      --text-muted: rgba(255,255,255,0.5);
    }

    body {
      background: var(--dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Sora', sans-serif;
      color: var(--text);
      padding: 32px 24px;
      overflow: hidden;
      position: relative;
    }

    /* Subtle radial glow */
    body::before {
      content: '';
      position: fixed;
      top: 30%; left: 50%;
      width: 400px; height: 400px;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle, rgba(59,130,246,0.06) 0%, transparent 70%);
      pointer-events: none;
    }

    .dismiss {
      position: fixed; top: 12px; right: 12px;
      width: 36px; height: 36px; border-radius: 50%;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.1);
      color: rgba(255,255,255,0.4);
      font-size: 18px; cursor: pointer; z-index: 100;
      display: flex; align-items: center; justify-content: center;
    }
    .dismiss:active { transform: scale(0.9); }

    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

    /* Badge / emoji container */
    .badge-ring {
      width: 120px; height: 120px;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      position: relative;
      margin-bottom: 24px;
      opacity: 0;
      transform: scale(0);
    }
    .badge-ring.show {
      animation: badgePop 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }
    @keyframes badgePop {
      0% { opacity: 0; transform: scale(0); }
      60% { opacity: 1; transform: scale(1.15); }
      100% { opacity: 1; transform: scale(1); }
    }

    .badge-glow {
      position: absolute; inset: -8px;
      border-radius: 50%;
      opacity: 0.25;
      filter: blur(20px);
      animation: glowPulse 2s ease-in-out infinite;
    }
    @keyframes glowPulse {
      0%, 100% { transform: scale(1); opacity: 0.2; }
      50% { transform: scale(1.15); opacity: 0.35; }
    }

    .badge-circle {
      width: 100%; height: 100%;
      border-radius: 50%;
      border: 3px solid rgba(255,255,255,0.12);
      display: flex; align-items: center; justify-content: center;
      position: relative;
      z-index: 1;
    }
    .badge-emoji {
      font-size: 52px;
      filter: drop-shadow(0 4px 12px rgba(0,0,0,0.3));
    }

    /* Rotating ring accent */
    .badge-orbit {
      position: absolute; inset: -4px;
      border-radius: 50%;
      border: 2px solid transparent;
      border-top-color: var(--accent);
      animation: orbitSpin 3s linear infinite;
      z-index: 2;
    }
    @keyframes orbitSpin { to { transform: rotate(360deg); } }

    .headline {
      font-size: 24px; font-weight: 800;
      text-align: center;
      margin-bottom: 8px;
      opacity: 0; transform: translateY(12px);
    }
    .subheadline {
      font-size: 14px;
      color: var(--text-muted);
      text-align: center;
      line-height: 1.5;
      max-width: 300px;
      margin-bottom: 24px;
      opacity: 0; transform: translateY(10px);
    }

    /* Stat counter */
    .stat-block {
      display: flex; align-items: baseline;
      gap: 8px;
      margin-bottom: 28px;
      opacity: 0; transform: translateY(8px);
    }
    .stat-value {
      font-size: 56px; font-weight: 800;
      line-height: 1;
      font-variant-numeric: tabular-nums;
    }
    .stat-label {
      font-size: 14px; color: var(--text-muted);
    }

    /* Reward card */
    .reward-card {
      width: 100%; max-width: 300px;
      padding: 18px 20px;
      border-radius: 18px;
      background: var(--dark-card);
      border: 1px solid rgba(255,255,255,0.06);
      display: flex; align-items: center; gap: 14px;
      margin-bottom: 24px;
      opacity: 0; transform: translateY(10px);
      position: relative;
      overflow: hidden;
    }
    /* Shimmer on reward */
    .reward-card::after {
      content: '';
      position: absolute;
      top: -50%; left: -50%;
      width: 200%; height: 200%;
      background: linear-gradient(105deg, transparent 40%, rgba(245,158,11,0.04) 50%, transparent 60%);
      animation: rewardShimmer 3s infinite;
      pointer-events: none;
    }
    @keyframes rewardShimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    .reward-emoji {
      font-size: 32px;
      width: 52px; height: 52px;
      display: flex; align-items: center; justify-content: center;
      background: rgba(245,158,11,0.1);
      border-radius: 14px;
      flex-shrink: 0;
    }
    .reward-info { flex: 1; position: relative; z-index: 1; }
    .reward-title {
      font-size: 15px; font-weight: 700;
      margin-bottom: 2px;
    }
    .reward-desc {
      font-size: 12px; color: var(--text-muted);
      line-height: 1.4;
    }

    /* CTA */
    .cta {
      padding: 16px 40px;
      border-radius: 50px;
      border: none;
      font-family: 'Sora', sans-serif;
      font-size: 15px; font-weight: 700;
      cursor: pointer;
      color: var(--dark);
      transition: transform 0.2s;
      opacity: 0; transform: translateY(8px);
      position: relative;
    }
    .cta.show { animation: fadeInUp 0.5s ease forwards; }
    .cta:active { transform: scale(0.96) translateY(0); }
    .cta::after {
      content: '';
      position: absolute; inset: -3px;
      border-radius: 53px;
      z-index: -1; opacity: 0.3;
      filter: blur(14px);
    }

    /* ‚îÄ‚îÄ Particles ‚îÄ‚îÄ */
    .particle-layer {
      position: fixed; inset: 0;
      pointer-events: none;
      z-index: 50;
    }
    .particle {
      position: absolute;
      opacity: 0;
    }
    .particle.fire {
      animation: particleBurst var(--dur) var(--delay) cubic-bezier(0.1, 0.7, 0.3, 1) forwards;
    }
    @keyframes particleBurst {
      0% {
        opacity: 1;
        transform: translate(0, 0) rotate(0deg) scale(1);
      }
      70% { opacity: 1; }
      100% {
        opacity: 0;
        transform: translate(var(--tx), var(--ty)) rotate(var(--rot)) scale(0.15);
      }
    }

    /* Triangle via clip-path */
    .shape-triangle { clip-path: polygon(50% 0%, 0% 100%, 100% 100%); }
  </style>
</head>

<body>
  <div class="badge-ring" id="badgeRing">
    <div class="badge-glow" id="badgeGlow"></div>
    <div class="badge-orbit"></div>
    <div class="badge-circle">
      <span class="badge-emoji" id="badgeEmoji"></span>
    </div>
  </div>

  <h1 class="headline" id="headline"></h1>
  <p class="subheadline" id="subheadline"></p>

  <div class="stat-block" id="statBlock">
    <span class="stat-value" id="statVal">0</span>
    <span class="stat-label" id="statLabel"></span>
  </div>

  <div class="reward-card" id="rewardCard">
    <div class="reward-emoji" id="rewardEmoji"></div>
    <div class="reward-info">
      <div class="reward-title" id="rewardTitle"></div>
      <div class="reward-desc" id="rewardDesc"></div>
    </div>
  </div>

  <button class="cta" id="cta"></button>

  <div class="particle-layer" id="particleLayer"></div>

  <script>
    // ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ
    function fireEvent(name, props) {
      try {
        if (window.CleverTap) window.CleverTap.pushEvent(name, props || {});
        else if (window.webkit?.messageHandlers?.clevertap)
          window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({ event: name, properties: props || {} }));
        else if (window.clevertap) window.clevertap.event.push(name, props || {});
      } catch (e) { console.log("CT Event:", name, props); }
    }
    function dismiss() {
      fireEvent(CONFIG.events.milestoneDismissed);
      try { location.href = "wzrk://exit"; } catch (e) {}
    }
    function rand(min, max) { return min + Math.random() * (max - min); }

    (function init() {
      const root = document.documentElement;
      const c = CONFIG;
      root.style.setProperty("--primary", c.brand.primary);
      root.style.setProperty("--primary-light", c.brand.primaryLight);
      root.style.setProperty("--accent", c.brand.accent);
      root.style.setProperty("--dark", c.brand.dark);
      root.style.setProperty("--dark-card", c.brand.darkCard);

      // Dismiss
      if (c.includeDismissButton) {
        const btn = document.createElement("button");
        btn.className = "dismiss"; btn.innerHTML = "‚úï"; btn.onclick = dismiss;
        document.body.appendChild(btn);
      }

      // Content
      document.getElementById("badgeEmoji").textContent = c.milestone.emoji;
      document.getElementById("badgeGlow").style.background = c.brand.primary;
      document.getElementById("headline").textContent = c.milestone.headline;
      document.getElementById("subheadline").textContent = c.milestone.subheadline;
      document.getElementById("statLabel").textContent = c.milestone.stat.label;

      // Stat value gradient
      const statVal = document.getElementById("statVal");
      statVal.style.background = `linear-gradient(135deg, ${c.brand.primaryLight}, ${c.brand.accent})`;
      statVal.style.webkitBackgroundClip = "text";
      statVal.style.webkitTextFillColor = "transparent";

      // Reward
      if (c.reward.enabled) {
        document.getElementById("rewardEmoji").textContent = c.reward.emoji;
        document.getElementById("rewardTitle").textContent = c.reward.text;
        document.getElementById("rewardDesc").textContent = c.reward.description;
      } else {
        document.getElementById("rewardCard").style.display = "none";
      }

      // CTA
      const cta = document.getElementById("cta");
      cta.textContent = c.cta.text;
      cta.style.background = `linear-gradient(135deg, ${c.brand.primary}, ${c.brand.primaryLight})`;
      cta.onclick = () => {
        fireEvent(c.events.milestoneCTAClicked);
        if (c.cta.url) location.href = c.cta.url;
      };

      // ‚îÄ‚îÄ Animation Sequence ‚îÄ‚îÄ

      // 1. Badge pops in (0-0.7s)
      setTimeout(() => document.getElementById("badgeRing").classList.add("show"), 300);

      // 2. Particle burst (0.8s)
      setTimeout(() => burstParticles(), 800);

      // 3. Haptic
      setTimeout(() => { try { navigator.vibrate([50, 30, 80, 30, 50]); } catch(e){} }, 850);

      // 4. Headline + subheadline
      animateEl("headline", 1000);
      animateEl("subheadline", 1200);

      // 5. Stat counter
      setTimeout(() => {
        document.getElementById("statBlock").style.animation = "fadeInUp 0.5s ease forwards";
        animateCounter(statVal, c.milestone.stat.value, 1200);
      }, 1400);

      // 6. Reward card
      if (c.reward.enabled) {
        setTimeout(() => {
          document.getElementById("rewardCard").style.animation = "fadeInUp 0.5s ease forwards";
        }, 1800);
      }

      // 7. CTA
      setTimeout(() => cta.classList.add("show"), c.reward.enabled ? 2100 : 1800);

      // Fire viewed
      setTimeout(() => {
        fireEvent(c.events.milestoneViewed, {
          milestone_type: c.milestone.headline,
          milestone_value: c.milestone.stat.value,
        });
      }, 1500);
    })();

    function animateEl(id, delay) {
      setTimeout(() => {
        document.getElementById(id).style.animation = "fadeInUp 0.6s ease forwards";
      }, delay);
    }

    function animateCounter(el, target, duration) {
      const start = performance.now();
      function tick(now) {
        const p = Math.min((now - start) / duration, 1);
        const eased = 1 - Math.pow(1 - p, 3);
        el.textContent = Math.round(eased * target);
        if (p < 1) requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    }

    function burstParticles() {
      const layer = document.getElementById("particleLayer");
      const c = CONFIG.particles;
      const cx = window.innerWidth / 2;
      const cy = window.innerHeight * 0.3;

      for (let i = 0; i < c.count; i++) {
        const el = document.createElement("div");
        el.className = "particle";

        const size = rand(5, 12);
        const color = c.colors[Math.floor(Math.random() * c.colors.length)];
        const shape = c.shapes[Math.floor(Math.random() * c.shapes.length)];

        el.style.width = size + "px";
        el.style.height = size + "px";
        el.style.background = color;
        el.style.left = cx + "px";
        el.style.top = cy + "px";

        // Shape
        if (shape === "circle") el.style.borderRadius = "50%";
        else if (shape === "triangle") el.classList.add("shape-triangle");
        else el.style.borderRadius = "2px";

        // Randomised trajectories ‚Äî vary distance and direction
        const angle = rand(0, Math.PI * 2);
        const distance = rand(80, 320);
        const tx = Math.cos(angle) * distance;
        const ty = Math.sin(angle) * distance - rand(40, 120); // bias upward

        el.style.setProperty("--tx", tx + "px");
        el.style.setProperty("--ty", ty + "px");
        el.style.setProperty("--rot", rand(180, 720) + "deg");
        el.style.setProperty("--dur", (c.duration * rand(0.7, 1.3)) + "s");
        el.style.setProperty("--delay", rand(0, 0.25) + "s");

        layer.appendChild(el);
        requestAnimationFrame(() => el.classList.add("fire"));
      }

      // Clean up after animation
      setTimeout(() => { layer.innerHTML = ""; }, c.duration * 1.3 * 1000 + 500);
    }
  </script>
</body>

</html>
