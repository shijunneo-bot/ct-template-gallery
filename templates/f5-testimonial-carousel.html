<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    const CONFIG = {
      includeDismissButton: true,

      brand: {
        name: "Easybook",
        primary: "#0EA5E9",
        primaryLight: "#38BDF8",
        dark: "#0A0F1A",
        darkCard: "#131B2E",
        text: "#FFFFFF",
        star: "#F59E0B",
      },

      carousel: {
        headline: "Loved by 2M+ travellers",
        subheadline: "See why people choose Easybook",
        autoScrollSpeed: 30, // seconds per full cycle
        direction: "left",
      },

      reviews: [
        {
          id: "r1",
          name: "Sarah L.",
          location: "KL → Penang",
          avatar: null,
          avatarFallback: "S",
          avatarColor: "#6366F1",
          rating: 5,
          quote: "Booked my bus in 30 seconds. Seat selection was so easy — arrived exactly on time. Will never use another app!",
          date: "2 days ago",
        },
        {
          id: "r2",
          name: "Ahmad R.",
          location: "JB → Singapore",
          avatar: null,
          avatarFallback: "A",
          avatarColor: "#10B981",
          rating: 5,
          quote: "Cross-border booking used to be a nightmare. Easybook handles everything — tickets, immigration queue skip, the works.",
          date: "5 days ago",
        },
        {
          id: "r3",
          name: "Mei Ling C.",
          location: "Ipoh → KL",
          avatar: null,
          avatarFallback: "M",
          avatarColor: "#F43F5E",
          rating: 4,
          quote: "Good prices and the comparison feature saved me RM40 on my trip. Only wish there were more overnight bus options.",
          date: "1 week ago",
        },
        {
          id: "r4",
          name: "Rajesh K.",
          location: "KL → Melaka",
          avatar: null,
          avatarFallback: "R",
          avatarColor: "#F59E0B",
          rating: 5,
          quote: "The e-ticket QR code worked perfectly. No printout needed, just scan and board. This is how travel should be.",
          date: "1 week ago",
        },
        {
          id: "r5",
          name: "Yuki T.",
          location: "Singapore → KL",
          avatar: null,
          avatarFallback: "Y",
          avatarColor: "#8B5CF6",
          rating: 5,
          quote: "Compared 6 operators in one screen. Found a premium coach with USB charging for just $5 more. Amazing value.",
          date: "2 weeks ago",
        },
        {
          id: "r6",
          name: "Priya S.",
          location: "Penang → Langkawi",
          avatar: null,
          avatarFallback: "P",
          avatarColor: "#EC4899",
          rating: 4,
          quote: "Ferry booking was seamless. Got instant confirmation and the boarding pass loaded offline. Very reliable app.",
          date: "2 weeks ago",
        },
      ],

      cta: {
        text: "Book Your Next Trip",
        url: "easybook://search",
      },

      events: {
        carouselViewed:    "TestimonialCarousel_Viewed",
        carouselCTAClicked:"TestimonialCarousel_CTA_Clicked",
        carouselDismissed: "TestimonialCarousel_Dismissed",
      },
    };
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700;800&display=swap">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --primary:#0EA5E9;--primary-light:#38BDF8;
      --dark:#0A0F1A;--dark-card:#131B2E;
      --text:#FFF;--text-muted:rgba(255,255,255,.45);
      --star:#F59E0B;
    }
    body{
      background:var(--dark);min-height:100vh;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      font-family:'DM Sans',sans-serif;color:var(--text);
      padding:44px 0 32px;overflow:hidden;
    }
    .dismiss{position:fixed;top:12px;right:12px;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:rgba(255,255,255,.4);font-size:18px;cursor:pointer;z-index:100;display:flex;align-items:center;justify-content:center}.dismiss:active{transform:scale(.9)}

    @keyframes fadeIn{to{opacity:1}}
    @keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}

    /* Header */
    .header{text-align:center;padding:0 24px;margin-bottom:20px}
    .h-stars{font-size:20px;letter-spacing:2px;margin-bottom:8px;opacity:0;animation:fadeIn .4s .1s ease forwards}
    .h-headline{font-size:22px;font-weight:800;margin-bottom:4px;opacity:0;animation:fadeIn .5s .2s ease forwards}
    .h-sub{font-size:13px;color:var(--text-muted);opacity:0;animation:fadeIn .5s .3s ease forwards}

    /* Aggregate rating bar */
    .agg-row{
      display:flex;align-items:center;justify-content:center;gap:10px;
      margin-bottom:20px;
      opacity:0;animation:fadeIn .5s .35s ease forwards;
    }
    .agg-score{font-size:28px;font-weight:800}
    .agg-out{font-size:14px;color:var(--text-muted);font-weight:500}
    .agg-count{font-size:12px;color:var(--text-muted)}

    /* Marquee carousel */
    .carousel-wrap{
      width:100%;overflow:hidden;position:relative;
      opacity:0;animation:fadeIn .5s .4s ease forwards;
    }
    .carousel-wrap::before,.carousel-wrap::after{
      content:'';position:absolute;top:0;bottom:0;width:40px;z-index:5;pointer-events:none;
    }
    .carousel-wrap::before{left:0;background:linear-gradient(to right,var(--dark),transparent)}
    .carousel-wrap::after{right:0;background:linear-gradient(to left,var(--dark),transparent)}

    .carousel-track{
      display:flex;gap:12px;width:max-content;padding:4px 0;
      animation-timing-function:linear;animation-iteration-count:infinite;
    }
    .carousel-track.left{animation-name:scrollL}
    .carousel-track.right{animation-name:scrollR}
    .carousel-track.paused{animation-play-state:paused}
    @keyframes scrollL{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
    @keyframes scrollR{0%{transform:translateX(-50%)}100%{transform:translateX(0)}}

    /* Review card */
    .review-card{
      flex-shrink:0;width:260px;
      background:var(--dark-card);
      border:1px solid rgba(255,255,255,.06);
      border-radius:18px;padding:18px;
      position:relative;overflow:hidden;
    }
    .review-card::before{
      content:'';position:absolute;top:0;left:15%;right:15%;height:1px;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent);
    }

    .rc-top{display:flex;align-items:center;gap:10px;margin-bottom:12px}
    .rc-avatar{
      width:36px;height:36px;border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      font-size:14px;font-weight:800;color:#fff;flex-shrink:0;
    }
    .rc-info{flex:1;min-width:0}
    .rc-name{font-size:13px;font-weight:700;line-height:1.2}
    .rc-location{font-size:11px;color:var(--text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    .rc-stars{display:flex;gap:2px;margin-bottom:10px}
    .rc-star{font-size:12px}
    .rc-star.on{color:var(--star)}
    .rc-star.off{color:rgba(255,255,255,.1)}

    .rc-quote{
      font-size:13px;line-height:1.6;color:rgba(255,255,255,.7);
      display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;
      overflow:hidden;margin-bottom:10px;
    }
    /* Open quote mark */
    .rc-quote::before{content:'"';font-size:20px;font-weight:800;color:var(--primary);opacity:.4;margin-right:2px}

    .rc-date{font-size:10px;color:rgba(255,255,255,.25)}

    /* CTA */
    .cta-wrap{
      padding:0 24px;width:100%;max-width:380px;margin-top:20px;
      opacity:0;animation:fadeInUp .5s .55s ease forwards;transform:translateY(8px);
    }
    .cta{
      display:flex;align-items:center;justify-content:center;
      width:100%;padding:16px;border-radius:16px;border:none;
      font-family:'DM Sans',sans-serif;font-size:15px;font-weight:800;
      cursor:pointer;color:#fff;background:var(--primary);
      transition:transform .2s;
    }
    .cta:active{transform:scale(.97)}
  </style>
</head>
<body>
  <div class="header">
    <div class="h-stars">⭐⭐⭐⭐⭐</div>
    <h2 class="h-headline" id="headline"></h2>
    <p class="h-sub" id="sub"></p>
  </div>

  <div class="agg-row">
    <span class="agg-score" id="aggScore"></span>
    <span class="agg-out">/ 5</span>
    <span class="agg-count" id="aggCount"></span>
  </div>

  <div class="carousel-wrap">
    <div class="carousel-track" id="track"></div>
  </div>

  <div class="cta-wrap">
    <button class="cta" id="cta"></button>
  </div>

  <script>
    function fireEvent(n,p){try{if(window.CleverTap)window.CleverTap.pushEvent(n,p||{});else if(window.webkit?.messageHandlers?.clevertap)window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({event:n,properties:p||{}}));else if(window.clevertap)window.clevertap.event.push(n,p||{})}catch(e){console.log("CT:",n,p)}}
    function dismiss(){fireEvent(CONFIG.events.carouselDismissed);try{location.href="wzrk://exit"}catch(e){}}

    (function init(){
      if(CONFIG.includeDismissButton){const b=document.createElement("button");b.className="dismiss";b.innerHTML="✕";b.onclick=dismiss;document.body.appendChild(b)}

      document.getElementById("headline").textContent=CONFIG.carousel.headline;
      document.getElementById("sub").textContent=CONFIG.carousel.subheadline;

      // Aggregate score
      const avg=(CONFIG.reviews.reduce((a,r)=>a+r.rating,0)/CONFIG.reviews.length).toFixed(1);
      document.getElementById("aggScore").textContent=avg;
      document.getElementById("aggCount").textContent=`(${CONFIG.reviews.length.toLocaleString()} reviews)`;

      // Build review cards (4× duplication for seamless loop)
      const track=document.getElementById("track");
      track.classList.add(CONFIG.carousel.direction);
      track.style.animationDuration=CONFIG.carousel.autoScrollSpeed+"s";

      function buildCards(){
        let html="";
        CONFIG.reviews.forEach(r=>{
          const stars=Array.from({length:5},(_, i)=>`<span class="rc-star ${i<r.rating?"on":"off"}">★</span>`).join("");
          const avatarHtml=r.avatar
            ?`<img class="rc-avatar" src="${r.avatar}" alt="${r.name}">`
            :`<div class="rc-avatar" style="background:${r.avatarColor}">${r.avatarFallback}</div>`;
          html+=`<div class="review-card">
            <div class="rc-top">${avatarHtml}<div class="rc-info"><div class="rc-name">${r.name}</div><div class="rc-location">${r.location}</div></div></div>
            <div class="rc-stars">${stars}</div>
            <div class="rc-quote">${r.quote}</div>
            <div class="rc-date">${r.date}</div>
          </div>`;
        });
        return html;
      }
      track.innerHTML=buildCards()+buildCards()+buildCards()+buildCards();

      // Pause on touch
      track.addEventListener("touchstart",()=>track.classList.add("paused"),{passive:true});
      track.addEventListener("touchend",()=>track.classList.remove("paused"));

      // CTA
      const cta=document.getElementById("cta");
      cta.textContent=CONFIG.cta.text;
      cta.onclick=()=>{
        fireEvent(CONFIG.events.carouselCTAClicked);
        if(CONFIG.cta.url)location.href=CONFIG.cta.url;
      };

      fireEvent(CONFIG.events.carouselViewed,{review_count:CONFIG.reviews.length,avg_rating:parseFloat(avg)});
    })();
  </script>
</body>
</html>
