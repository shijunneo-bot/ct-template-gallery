<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    const CONFIG = {
      includeDismissButton: true,

      brand: {
        name: "OhMyHome",
        primary: "#2563EB",
        primaryLight: "#60A5FA",
        dark: "#0F172A",
        darkCard: "#1E293B",
        white: "#FFFFFF",
        accent: "#10B981",
      },

      toggle: {
        labelA: "Buy",
        labelB: "Rent",
        defaultView: "A",
      },

      viewA: {
        headline: "Ready to own?",
        subtitle: "Find your dream home from 12,000+ listings",
        stats: [
          { label: "Avg Price", value: "$580K", icon: "üè†" },
          { label: "New This Week", value: "347", icon: "üìã" },
          { label: "Avg Days Listed", value: "28", icon: "üìÖ" },
        ],
        accentColor: "#2563EB",
        gradientStart: "#0F172A",
        gradientEnd: "#1E3A5F",
        ctaText: "Browse Homes to Buy",
        ctaUrl: "ohmyhome://listings/buy",
      },

      viewB: {
        headline: "Rent smarter",
        subtitle: "Verified rentals with virtual tours",
        stats: [
          { label: "Avg Rent", value: "$2.4K/mo", icon: "üîë" },
          { label: "Available Now", value: "1,203", icon: "üè¢" },
          { label: "With Virtual Tour", value: "64%", icon: "üé•" },
        ],
        accentColor: "#10B981",
        gradientStart: "#0F172A",
        gradientEnd: "#0D2818",
        ctaText: "Browse Rentals",
        ctaUrl: "ohmyhome://listings/rent",
      },

      events: {
        toggleViewed:     "DualView_Viewed",
        toggleSwitched:   "DualView_Switched",
        toggleCTAClicked: "DualView_CTA_Clicked",
        toggleDismissed:  "DualView_Dismissed",
      },

      animation: {
        switchDuration: 0.45,
      },
    };
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700;800&display=swap">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --accent: #2563EB;
      --dark: #0F172A;
      --dark-card: #1E293B;
      --grad-start: #0F172A;
      --grad-end: #1E3A5F;
      --text: #FFFFFF;
      --text-muted: rgba(255,255,255,0.5);
      --switch-dur: 0.45s;
    }

    body {
      background: linear-gradient(170deg, var(--grad-start), var(--grad-end));
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Sora', sans-serif;
      color: var(--text);
      padding: 44px 24px 32px;
      transition: background var(--switch-dur) ease;
    }

    .dismiss {
      position: fixed; top: 12px; right: 12px;
      width: 36px; height: 36px; border-radius: 50%;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.1);
      color: rgba(255,255,255,0.4);
      font-size: 18px; cursor: pointer; z-index: 100;
      display: flex; align-items: center; justify-content: center;
    }
    .dismiss:active { transform: scale(0.9); }

    @keyframes fadeIn { to { opacity: 1; } }

    /* Toggle switch */
    .toggle-wrap {
      display: flex;
      align-items: center;
      padding: 4px;
      border-radius: 50px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.08);
      margin-bottom: 32px;
      position: relative;
      opacity: 0;
      animation: fadeIn 0.5s 0.2s ease forwards;
    }

    .toggle-bg {
      position: absolute;
      top: 4px; bottom: 4px;
      left: 4px;
      width: calc(50% - 4px);
      border-radius: 46px;
      transition: transform var(--switch-dur) cubic-bezier(0.34, 1.56, 0.64, 1),
                  background var(--switch-dur) ease;
    }
    .toggle-bg.right {
      transform: translateX(100%);
    }

    .toggle-option {
      position: relative;
      z-index: 2;
      padding: 10px 28px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      background: none;
      border: none;
      color: var(--text-muted);
      font-family: 'Sora', sans-serif;
      transition: color var(--switch-dur) ease;
      -webkit-tap-highlight-color: transparent;
    }
    .toggle-option.active {
      color: var(--text);
    }

    /* Main content area */
    .view-content {
      width: 100%;
      max-width: 340px;
      text-align: center;
    }

    .view-headline {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 6px;
      transition: opacity 0.25s ease, transform 0.25s ease;
    }
    .view-subtitle {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 28px;
      line-height: 1.5;
      transition: opacity 0.25s ease, transform 0.25s ease;
    }

    /* Crossfade states */
    .view-headline.switching, .view-subtitle.switching {
      opacity: 0; transform: translateY(6px);
    }

    /* Stats row */
    .stats-row {
      display: flex;
      gap: 10px;
      margin-bottom: 28px;
    }
    .stat-tile {
      flex: 1;
      padding: 16px 8px;
      border-radius: 16px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.06);
      text-align: center;
      transition: opacity 0.3s ease, transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .stat-tile.switching {
      opacity: 0; transform: translateY(12px);
    }
    .stat-icon { font-size: 22px; margin-bottom: 6px; }
    .stat-value {
      font-size: 20px;
      font-weight: 800;
      line-height: 1.1;
      margin-bottom: 2px;
      transition: color var(--switch-dur) ease;
    }
    .stat-label {
      font-size: 10px;
      color: var(--text-muted);
      letter-spacing: 0.3px;
    }

    /* Shimmer line divider */
    .divider {
      width: 60px;
      height: 2px;
      border-radius: 1px;
      margin: 0 auto 28px;
      transition: background var(--switch-dur) ease;
      position: relative;
      overflow: hidden;
    }
    .divider::after {
      content: '';
      position: absolute;
      top: 0; left: -100%; bottom: 0;
      width: 200%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      animation: divShimmer 3s infinite;
    }
    @keyframes divShimmer {
      0% { transform: translateX(-50%); }
      100% { transform: translateX(50%); }
    }

    /* CTA */
    .cta {
      width: 100%;
      max-width: 340px;
      padding: 17px;
      border-radius: 16px;
      border: none;
      font-family: 'Sora', sans-serif;
      font-size: 15px;
      font-weight: 800;
      cursor: pointer;
      color: var(--text);
      transition: background var(--switch-dur) ease, transform 0.2s, box-shadow var(--switch-dur) ease;
      position: relative;
    }
    .cta:active { transform: scale(0.97); }
    .cta.switching {
      opacity: 0.6;
      transform: translateY(4px);
      transition: opacity 0.15s, transform 0.15s;
    }

    /* Brand footer */
    .brand-footer {
      margin-top: 20px;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: rgba(255,255,255,0.08);
    }
  </style>
</head>

<body>
  <div class="toggle-wrap" id="toggleWrap">
    <div class="toggle-bg" id="toggleBg"></div>
    <button class="toggle-option active" id="optA"></button>
    <button class="toggle-option" id="optB"></button>
  </div>

  <div class="view-content">
    <h2 class="view-headline" id="headline"></h2>
    <p class="view-subtitle" id="subtitle"></p>
    <div class="stats-row" id="statsRow"></div>
    <div class="divider" id="divider"></div>
    <button class="cta" id="cta"></button>
  </div>

  <div class="brand-footer" id="brandFooter"></div>

  <script>
    // ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ
    function fireEvent(name, props) {
      try {
        if (window.CleverTap) window.CleverTap.pushEvent(name, props || {});
        else if (window.webkit?.messageHandlers?.clevertap)
          window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({ event: name, properties: props || {} }));
        else if (window.clevertap) window.clevertap.event.push(name, props || {});
      } catch (e) { console.log("CT Event:", name, props); }
    }
    function dismiss() {
      fireEvent(CONFIG.events.toggleDismissed, { active_view: currentView });
      try { location.href = "wzrk://exit"; } catch (e) {}
    }

    let currentView = CONFIG.toggle.defaultView;
    let switching = false;

    (function init() {
      const root = document.documentElement;
      root.style.setProperty("--switch-dur", CONFIG.animation.switchDuration + "s");

      // Dismiss
      if (CONFIG.includeDismissButton) {
        const btn = document.createElement("button");
        btn.className = "dismiss"; btn.innerHTML = "‚úï"; btn.onclick = dismiss;
        document.body.appendChild(btn);
      }

      document.getElementById("brandFooter").textContent = CONFIG.brand.name;

      // Toggle labels
      document.getElementById("optA").textContent = CONFIG.toggle.labelA;
      document.getElementById("optB").textContent = CONFIG.toggle.labelB;

      // Build stats
      buildStats(currentView === "A" ? CONFIG.viewA : CONFIG.viewB);

      // Apply initial view
      applyView(currentView === "A" ? CONFIG.viewA : CONFIG.viewB, false);

      // Toggle click handlers
      document.getElementById("optA").addEventListener("click", () => switchTo("A"));
      document.getElementById("optB").addEventListener("click", () => switchTo("B"));

      fireEvent(CONFIG.events.toggleViewed, { default_view: currentView === "A" ? CONFIG.toggle.labelA : CONFIG.toggle.labelB });
    })();

    function buildStats(view) {
      const row = document.getElementById("statsRow");
      row.innerHTML = "";
      view.stats.forEach((stat, i) => {
        const tile = document.createElement("div");
        tile.className = "stat-tile";
        tile.style.transitionDelay = (i * 0.05) + "s";
        tile.innerHTML = `
          <div class="stat-icon">${stat.icon}</div>
          <div class="stat-value">${stat.value}</div>
          <div class="stat-label">${stat.label}</div>
        `;
        row.appendChild(tile);
      });
    }

    function applyView(view, animate) {
      const dur = CONFIG.animation.switchDuration * 1000;

      // CSS variables for theming
      document.documentElement.style.setProperty("--accent", view.accentColor);
      document.body.style.background = `linear-gradient(170deg, ${view.gradientStart}, ${view.gradientEnd})`;

      // Toggle bg color
      document.getElementById("toggleBg").style.background = view.accentColor;

      // Divider
      document.getElementById("divider").style.background = view.accentColor;

      // Stat value colors
      document.querySelectorAll(".stat-value").forEach(el => {
        el.style.color = view.accentColor;
      });

      // CTA
      const cta = document.getElementById("cta");
      cta.style.background = view.accentColor;
      cta.style.boxShadow = `0 8px 24px ${view.accentColor}33`;

      if (animate) {
        // Crossfade headline + subtitle
        const hl = document.getElementById("headline");
        const sub = document.getElementById("subtitle");
        hl.classList.add("switching");
        sub.classList.add("switching");

        // Crossfade stats
        document.querySelectorAll(".stat-tile").forEach(t => t.classList.add("switching"));

        // CTA
        cta.classList.add("switching");

        setTimeout(() => {
          hl.textContent = view.headline;
          sub.textContent = view.subtitle;
          buildStats(view);
          cta.textContent = view.ctaText;

          // Apply accent to new stats
          document.querySelectorAll(".stat-value").forEach(el => {
            el.style.color = view.accentColor;
          });

          requestAnimationFrame(() => {
            hl.classList.remove("switching");
            sub.classList.remove("switching");
            document.querySelectorAll(".stat-tile").forEach(t => t.classList.remove("switching"));
            cta.classList.remove("switching");
          });
        }, 200);

      } else {
        document.getElementById("headline").textContent = view.headline;
        document.getElementById("subtitle").textContent = view.subtitle;
        document.getElementById("cta").textContent = view.ctaText;
      }

      // CTA handler
      cta.onclick = () => {
        fireEvent(CONFIG.events.toggleCTAClicked, {
          view: currentView === "A" ? CONFIG.toggle.labelA : CONFIG.toggle.labelB,
          cta_text: view.ctaText,
        });
        if (view.ctaUrl) location.href = view.ctaUrl;
      };
    }

    function switchTo(view) {
      if (view === currentView || switching) return;
      switching = true;
      currentView = view;

      // Update toggle
      const optA = document.getElementById("optA");
      const optB = document.getElementById("optB");
      const bg = document.getElementById("toggleBg");

      if (view === "A") {
        optA.classList.add("active");
        optB.classList.remove("active");
        bg.classList.remove("right");
      } else {
        optB.classList.add("active");
        optA.classList.remove("active");
        bg.classList.add("right");
      }

      const viewData = view === "A" ? CONFIG.viewA : CONFIG.viewB;
      applyView(viewData, true);

      fireEvent(CONFIG.events.toggleSwitched, {
        switched_to: view === "A" ? CONFIG.toggle.labelA : CONFIG.toggle.labelB,
      });

      setTimeout(() => { switching = false; }, CONFIG.animation.switchDuration * 1000 + 250);
    }
  </script>
</body>

</html>
