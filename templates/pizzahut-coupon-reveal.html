<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Coupon Reveal</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700;800&display=swap');
  *{margin:0;padding:0;box-sizing:border-box}
  :root{
    --red:#E31837;--red-dark:#B81230;--red-glow:rgba(227,24,55,0.25);
    --gold:#FFB81C;--gold-light:#FFD06B;
    --dark:#1A1A1A;--card:#242424;--card-border:#333;
    --text:#FFFFFF;--muted:rgba(255,255,255,0.5);
  }
  body{
    font-family:'Poppins',sans-serif;background:var(--dark);
    color:var(--text);max-width:390px;margin:0 auto;
    min-height:100vh;display:flex;flex-direction:column;
    align-items:center;justify-content:center;padding:20px;
    overflow:hidden;
  }

  /* Background celebration particles */
  .bg-particles{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:0}
  .particle{
    position:absolute;width:6px;height:6px;border-radius:50%;
    animation:floatUp 3s ease-out forwards;opacity:0;
  }
  @keyframes floatUp{
    0%{opacity:0;transform:translateY(100vh) scale(0)}
    20%{opacity:1;transform:translateY(60vh) scale(1)}
    100%{opacity:0;transform:translateY(-20vh) scale(0.5)}
  }

  /* Dismiss */
  .dismiss{
    position:absolute;top:12px;right:12px;width:28px;height:28px;
    background:rgba(255,255,255,0.08);border:none;border-radius:50%;
    color:var(--muted);font-size:14px;cursor:pointer;z-index:10;
    display:flex;align-items:center;justify-content:center;
    transition:all 0.2s;
  }
  .dismiss:active{background:rgba(255,255,255,0.15);transform:scale(0.9)}

  /* Main card */
  .coupon-card{
    position:relative;z-index:1;width:100%;
    background:var(--card);border:1px solid var(--card-border);
    border-radius:20px;overflow:hidden;
    animation:cardIn 0.5s cubic-bezier(0.34,1.56,0.64,1) both;
  }
  @keyframes cardIn{
    0%{opacity:0;transform:scale(0.85) translateY(30px)}
    100%{opacity:1;transform:scale(1) translateY(0)}
  }

  /* Brand header */
  .brand-bar{
    display:flex;align-items:center;gap:10px;
    padding:16px 20px;border-bottom:1px solid rgba(255,255,255,0.06);
  }
  .brand-logo{
    width:36px;height:36px;background:var(--red);border-radius:10px;
    display:flex;align-items:center;justify-content:center;
    font-size:16px;font-weight:800;color:#fff;
  }
  .brand-name{font-size:13px;font-weight:600;color:var(--muted)}

  /* Celebration area */
  .celebration{
    padding:28px 24px 16px;text-align:center;
  }
  .gift-icon{
    font-size:56px;display:inline-block;
    animation:bounce 1s ease-in-out infinite;
  }
  @keyframes bounce{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(-8px)}
  }
  .headline{
    font-size:22px;font-weight:800;line-height:1.25;
    margin:16px 0 6px;color:#fff;
  }
  .headline .name{color:var(--gold)}
  .subtext{font-size:13px;color:var(--muted);line-height:1.5}

  /* Code display */
  .code-area{padding:0 24px 24px}
  .code-box{
    background:rgba(227,24,55,0.08);
    border:2px dashed var(--red);border-radius:14px;
    padding:18px;text-align:center;position:relative;
    transition:all 0.3s;
  }
  .code-box.copied{
    border-style:solid;border-color:var(--gold);
    background:rgba(255,184,28,0.08);
  }
  .code-label{
    font-size:10px;font-weight:600;letter-spacing:1.5px;
    text-transform:uppercase;color:var(--muted);margin-bottom:8px;
  }
  .code-value{
    font-size:28px;font-weight:800;letter-spacing:4px;
    color:var(--gold);font-family:'Poppins',monospace;
  }
  .code-box.copied .code-value{color:var(--gold-light)}
  .copied-badge{
    display:none;margin-top:10px;
    font-size:11px;font-weight:600;color:var(--gold);
  }
  .code-box.copied .copied-badge{
    display:block;animation:fadeIn 0.3s ease both;
  }
  @keyframes fadeIn{0%{opacity:0;transform:translateY(4px)}100%{opacity:1;transform:translateY(0)}}

  /* Expiry */
  .expiry{
    text-align:center;padding:0 24px;margin-bottom:20px;
    font-size:11px;color:var(--muted);
  }
  .expiry-dot{
    display:inline-block;width:5px;height:5px;border-radius:50%;
    background:var(--red);margin-right:6px;vertical-align:middle;
    animation:pulse 2s ease infinite;
  }
  @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}

  /* CTAs */
  .cta-area{padding:0 24px 24px;display:flex;flex-direction:column;gap:10px}
  .btn-copy{
    width:100%;padding:16px;border:none;border-radius:14px;
    background:var(--red);color:#fff;font-family:'Poppins',sans-serif;
    font-size:15px;font-weight:700;cursor:pointer;
    transition:all 0.2s;position:relative;overflow:hidden;
  }
  .btn-copy:active{transform:scale(0.97);background:var(--red-dark)}
  .btn-copy.done{background:var(--gold);color:var(--dark)}
  .btn-skip{
    width:100%;padding:12px;border:none;border-radius:12px;
    background:transparent;color:var(--muted);
    font-family:'Poppins',sans-serif;font-size:13px;font-weight:500;
    cursor:pointer;transition:color 0.2s;
  }
  .btn-skip:active{color:rgba(255,255,255,0.3)}

  /* Shimmer on code */
  .shimmer{
    position:absolute;top:0;left:-100%;width:100%;height:100%;
    background:linear-gradient(90deg,transparent,rgba(255,184,28,0.1),transparent);
    animation:shimmer 2.5s ease infinite;
  }
  @keyframes shimmer{0%{left:-100%}100%{left:100%}}
</style>
</head>
<body>

<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // CONFIG â€” Edit brand, code, and copy here
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const CONFIG = {
    brand: {
      name: "Pizza Hut",
      logo: "ğŸ•",
    },

    coupon: {
      code: "PHUT30OFF",
      headline: "Here's a treat just for you,",
      // Use CleverTap personalization: replace with actual user name
      userName: "foodie",
      subtext: "Use this code on your next order of RM40 and above",
      expiry: "Valid until 28 Feb 2026",
      copyButtonText: "Copy Code & Shop Now",
      copiedButtonText: "âœ“ Copied! Redirectingâ€¦",
      skipText: "Maybe next time",
    },

    tracking: {
      eventPrefix: "Coupon",
      // CleverTap deep link on copy
      redeemUrl: "pizzahut://menu?promo=PHUT30OFF",
      // Delay before redirect after copy (ms)
      redirectDelay: 1200,
    },

    // Dismiss button
    includeDismissButton: true,
  };
</script>

<div class="bg-particles" id="particles"></div>

<button class="dismiss" id="dismissBtn" onclick="dismiss()" style="display:none">âœ•</button>

<div class="coupon-card">
  <div class="brand-bar">
    <div class="brand-logo" id="brandLogo"></div>
    <div class="brand-name" id="brandName"></div>
  </div>

  <div class="celebration">
    <div class="gift-icon">ğŸ</div>
    <div class="headline" id="headline"></div>
    <div class="subtext" id="subtext"></div>
  </div>

  <div class="code-area">
    <div class="code-box" id="codeBox">
      <div class="shimmer"></div>
      <div class="code-label">Your promo code</div>
      <div class="code-value" id="codeValue"></div>
      <div class="copied-badge" id="copiedBadge">âœ“ Copied to clipboard!</div>
    </div>
  </div>

  <div class="expiry" id="expiry"></div>

  <div class="cta-area">
    <button class="btn-copy" id="btnCopy" onclick="copyCode()"></button>
    <button class="btn-skip" id="btnSkip" onclick="skipCoupon()"></button>
  </div>
</div>

<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // INIT
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const { brand, coupon, tracking, includeDismissButton } = CONFIG;

  if (includeDismissButton) document.getElementById('dismissBtn').style.display = 'flex';

  document.getElementById('brandLogo').textContent = brand.logo;
  document.getElementById('brandName').textContent = brand.name;
  document.getElementById('headline').innerHTML =
    coupon.headline + ' <span class="name">' + coupon.userName + '</span>!';
  document.getElementById('subtext').textContent = coupon.subtext;
  document.getElementById('codeValue').textContent = coupon.code;
  document.getElementById('expiry').innerHTML =
    '<span class="expiry-dot"></span>' + coupon.expiry;
  document.getElementById('btnCopy').textContent = coupon.copyButtonText;
  document.getElementById('btnSkip').textContent = coupon.skipText;

  // Spawn background particles
  const colors = ['#E31837','#FFB81C','#FFD06B','#FF6B6B','#fff'];
  const container = document.getElementById('particles');
  for (let i = 0; i < 20; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = Math.random() * 100 + '%';
    p.style.background = colors[Math.floor(Math.random() * colors.length)];
    p.style.animationDelay = Math.random() * 2 + 's';
    p.style.width = p.style.height = (4 + Math.random() * 6) + 'px';
    container.appendChild(p);
  }

  trackEvent(tracking.eventPrefix + '_Viewed', { code: coupon.code });

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // COPY TO CLIPBOARD
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function copyCode() {
    const code = coupon.code;
    // Clipboard API with fallback
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(code).then(onCopied).catch(fallbackCopy);
    } else {
      fallbackCopy();
    }
  }

  function fallbackCopy() {
    const ta = document.createElement('textarea');
    ta.value = coupon.code;
    ta.style.cssText = 'position:fixed;left:-9999px';
    document.body.appendChild(ta);
    ta.select();
    try { document.execCommand('copy'); } catch(e) {}
    document.body.removeChild(ta);
    onCopied();
  }

  function onCopied() {
    const box = document.getElementById('codeBox');
    const btn = document.getElementById('btnCopy');
    box.classList.add('copied');
    btn.classList.add('done');
    btn.textContent = coupon.copiedButtonText;

    trackEvent(tracking.eventPrefix + '_Copied', { code: coupon.code });

    // Redirect after delay
    setTimeout(function() {
      if (tracking.redeemUrl) {
        window.location.href = tracking.redeemUrl;
      }
      // Also try CT dismiss
      try { window.location.href = 'wzrk://exit'; } catch(e) {}
    }, tracking.redirectDelay);
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // SKIP / DISMISS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function skipCoupon() {
    trackEvent(tracking.eventPrefix + '_Skipped', { code: coupon.code });
    dismiss();
  }

  function dismiss() {
    trackEvent(tracking.eventPrefix + '_Dismissed', { code: coupon.code });
    try { window.location.href = 'wzrk://exit'; } catch(e) {}
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // TRACKING
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function trackEvent(name, props) {
    console.log('CT Event:', name, props || {});
    if (window.CleverTap) window.CleverTap.pushEvent(name, props || {});
    if (window.clevertap) window.clevertap.event.push(name, props || {});
    try {
      window.webkit.messageHandlers.clevertap.postMessage(
        JSON.stringify({ event: name, properties: props || {} })
      );
    } catch(e) {}
  }
</script>
</body>
</html>
