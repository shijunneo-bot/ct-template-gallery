<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>M1 Memory Match</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,500;0,9..40,700;0,9..40,900&family=JetBrains+Mono:wght@500;700&display=swap');

  *{margin:0;padding:0;box-sizing:border-box}

  :root{
    --m1:#FF9E1B;
    --m1-light:#FFB84D;
    --m1-dark:#E68A00;
    --m1-glow:rgba(255,158,27,0.25);
    --bg:#0C0F14;
    --surface:#151922;
    --surface2:#1C2230;
    --card-bg:#1A1F2B;
    --text:#FFFFFF;
    --text-dim:rgba(255,255,255,0.5);
    --text-muted:rgba(255,255,255,0.3);
    --success:#34D399;
    --radius:14px;
    --card-radius:12px;
  }

  html,body{
    width:100%;height:100%;overflow:hidden;
    font-family:'DM Sans',sans-serif;
    background:var(--bg);color:var(--text);
    -webkit-tap-highlight-color:transparent;
    -webkit-font-smoothing:antialiased;
  }

  /* =============================================
     CONTAINER
     ============================================= */
  .app{
    width:100%;max-width:420px;height:100%;
    margin:0 auto;
    display:flex;flex-direction:column;
    position:relative;overflow:hidden;
    background:var(--bg);
  }

  /* Subtle ambient glow */
  .app::before{
    content:'';position:absolute;
    top:-80px;left:50%;
    width:300px;height:300px;
    transform:translateX(-50%);
    background:radial-gradient(circle,var(--m1-glow) 0%,transparent 70%);
    pointer-events:none;z-index:0;
    opacity:0.6;
  }

  /* =============================================
     HEADER
     ============================================= */
  .header{
    position:relative;z-index:2;
    padding:16px 20px 0;
    display:flex;align-items:center;
    justify-content:space-between;
    flex-shrink:0;
  }

  .brand{
    display:flex;align-items:center;gap:10px;
  }

  .brand-mark{
    width:36px;height:36px;
    background:var(--m1);
    border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    font-weight:900;font-size:15px;color:var(--bg);
    letter-spacing:-0.5px;
    box-shadow:0 0 16px var(--m1-glow);
  }

  .brand-text{
    font-size:13px;font-weight:700;
    color:var(--text);letter-spacing:0.3px;
  }
  .brand-sub{
    font-size:10px;font-weight:500;
    color:var(--text-dim);margin-top:1px;
  }

  .close-btn{
    width:32px;height:32px;
    background:var(--surface2);
    border:none;border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    cursor:pointer;
  }
  .close-btn svg{stroke:var(--text-dim);width:14px;height:14px;}

  /* =============================================
     TITLE SECTION
     ============================================= */
  .title-section{
    position:relative;z-index:2;
    text-align:center;
    padding:16px 20px 6px;
    flex-shrink:0;
  }

  .game-title{
    font-size:22px;font-weight:900;
    letter-spacing:-0.5px;
    line-height:1.15;
    background:linear-gradient(135deg,var(--m1-light) 0%,var(--m1) 50%,var(--m1-dark) 100%);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
  }

  .game-subtitle{
    font-size:12px;font-weight:500;
    color:var(--text-dim);
    margin-top:4px;
    line-height:1.35;
  }

  /* =============================================
     STATS BAR
     ============================================= */
  .stats-bar{
    position:relative;z-index:2;
    display:flex;
    justify-content:center;
    gap:24px;
    padding:10px 20px 8px;
    flex-shrink:0;
  }

  .stat{
    display:flex;align-items:center;gap:6px;
  }

  .stat-icon{
    width:28px;height:28px;
    background:var(--surface2);
    border-radius:8px;
    display:flex;align-items:center;justify-content:center;
    font-size:13px;
  }

  .stat-label{
    font-size:10px;font-weight:500;
    color:var(--text-muted);
    text-transform:uppercase;letter-spacing:0.8px;
  }
  .stat-value{
    font-family:'JetBrains Mono',monospace;
    font-size:17px;font-weight:700;
    color:var(--text);
    line-height:1;
  }

  /* =============================================
     GAME GRID
     ============================================= */
  .grid-wrap{
    position:relative;z-index:2;
    flex:1;
    display:flex;align-items:center;justify-content:center;
    padding:6px 16px 12px;
    min-height:0;
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:8px;
    width:100%;
    max-width:340px;
    aspect-ratio:1/1.15;
  }

  /* =============================================
     CARD ‚Äî 3D FLIP
     ============================================= */
  .card{
    perspective:600px;
    cursor:pointer;
    -webkit-tap-highlight-color:transparent;
  }

  .card-inner{
    position:relative;
    width:100%;height:100%;
    transition:transform 0.5s cubic-bezier(0.4,0,0.2,1);
    -webkit-transform-style:preserve-3d;
    transform-style:preserve-3d;
  }

  .card.flipped .card-inner{
    transform:rotateY(180deg);
  }

  .card-face{
    position:absolute;inset:0;
    border-radius:var(--card-radius);
    display:flex;flex-direction:column;
    align-items:center;justify-content:center;
    -webkit-backface-visibility:hidden;
    backface-visibility:hidden;
    overflow:hidden;
  }

  /* BACK face (visible when not flipped) */
  .card-back{
    background:var(--surface);
    border:1.5px solid var(--surface2);
  }

  /* M1 pattern on card back */
  .card-back::before{
    content:'';position:absolute;inset:0;
    opacity:0.06;
    background-image:
      repeating-linear-gradient(45deg,var(--m1) 0px,var(--m1) 1px,transparent 1px,transparent 8px),
      repeating-linear-gradient(-45deg,var(--m1) 0px,var(--m1) 1px,transparent 1px,transparent 8px);
  }

  .card-back-logo{
    width:24px;height:24px;
    background:var(--m1);
    border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    font-size:9px;font-weight:900;
    color:var(--bg);
    letter-spacing:-0.3px;
    opacity:0.5;
  }

  /* FRONT face (visible when flipped) */
  .card-front{
    background:var(--card-bg);
    border:1.5px solid var(--surface2);
    transform:rotateY(180deg);
    gap:4px;
  }

  .card-emoji{
    font-size:28px;
    line-height:1;
    filter:drop-shadow(0 2px 8px rgba(0,0,0,0.3));
  }

  .card-label{
    font-size:8px;
    font-weight:700;
    color:var(--text-dim);
    text-transform:uppercase;
    letter-spacing:0.8px;
    text-align:center;
    padding:0 4px;
    line-height:1.1;
  }

  /* MATCHED state */
  .card.matched .card-front{
    border-color:var(--m1);
    background:linear-gradient(135deg,rgba(255,158,27,0.12) 0%,var(--card-bg) 100%);
    box-shadow:0 0 20px rgba(255,158,27,0.15);
  }

  .card.matched .card-emoji{
    animation:matchPop 0.4s cubic-bezier(0.34,1.56,0.64,1);
  }

  @keyframes matchPop{
    0%{transform:scale(1)}
    40%{transform:scale(1.35)}
    100%{transform:scale(1)}
  }

  /* Mismatch shake */
  .card.shake .card-inner{
    animation:cardShake 0.4s ease;
  }

  @keyframes cardShake{
    0%,100%{transform:rotateY(180deg) translateX(0)}
    25%{transform:rotateY(180deg) translateX(-4px)}
    50%{transform:rotateY(180deg) translateX(4px)}
    75%{transform:rotateY(180deg) translateX(-2px)}
  }

  /* Disabled during checking */
  .card.disabled{
    pointer-events:none;
  }

  /* =============================================
     PROGRESS DOTS
     ============================================= */
  .progress{
    position:relative;z-index:2;
    display:flex;justify-content:center;
    gap:6px;
    padding:0 20px 14px;
    flex-shrink:0;
  }

  .progress-dot{
    width:8px;height:8px;
    border-radius:50%;
    background:var(--surface2);
    transition:all 0.4s cubic-bezier(0.34,1.56,0.64,1);
  }

  .progress-dot.filled{
    background:var(--m1);
    box-shadow:0 0 8px var(--m1-glow);
    transform:scale(1.15);
  }

  /* =============================================
     WIN SCREEN
     ============================================= */
  .win-overlay{
    position:absolute;inset:0;z-index:50;
    background:rgba(12,15,20,0.96);
    display:flex;align-items:center;justify-content:center;
    opacity:0;pointer-events:none;
    transition:opacity 0.5s ease;
  }
  .win-overlay.active{
    opacity:1;pointer-events:auto;
  }

  .win-card{
    width:88%;max-width:340px;
    text-align:center;
    padding:36px 28px 28px;
    background:var(--surface);
    border:1px solid var(--surface2);
    border-radius:20px;
    transform:scale(0.85) translateY(30px);
    transition:transform 0.6s cubic-bezier(0.34,1.56,0.64,1);
  }
  .win-overlay.active .win-card{
    transform:scale(1) translateY(0);
  }

  .win-trophy{font-size:52px;margin-bottom:12px;}

  .win-title{
    font-size:24px;font-weight:900;
    letter-spacing:-0.5px;
    background:linear-gradient(135deg,var(--m1-light),var(--m1));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
  }

  .win-stats{
    font-size:13px;font-weight:500;
    color:var(--text-dim);
    margin:6px 0 20px;
    line-height:1.5;
  }
  .win-stats strong{
    color:var(--text);font-weight:700;
  }

  .reward-box{
    background:var(--bg);
    border:1.5px dashed var(--m1);
    border-radius:12px;
    padding:16px;
    margin-bottom:16px;
  }

  .reward-label{
    font-size:10px;font-weight:700;
    text-transform:uppercase;
    letter-spacing:1.2px;
    color:var(--m1);
    margin-bottom:6px;
  }

  .reward-code{
    font-family:'JetBrains Mono',monospace;
    font-size:26px;font-weight:700;
    letter-spacing:2px;
    color:var(--text);
    margin-bottom:8px;
  }

  .reward-desc{
    font-size:11px;color:var(--text-dim);
    line-height:1.4;
  }

  .copy-btn{
    width:100%;height:48px;
    border:none;border-radius:12px;
    background:var(--m1);
    color:var(--bg);
    font-family:'DM Sans',sans-serif;
    font-size:14px;font-weight:700;
    letter-spacing:0.3px;
    cursor:pointer;
    display:flex;align-items:center;justify-content:center;gap:6px;
    transition:all 0.2s ease;
    margin-bottom:10px;
  }
  .copy-btn:active{transform:scale(0.97);}
  .copy-btn.copied{background:var(--success);}
  .copy-btn svg{width:16px;height:16px;}

  .shop-btn{
    width:100%;height:44px;
    border:1.5px solid var(--surface2);
    border-radius:12px;
    background:transparent;
    color:var(--text-dim);
    font-family:'DM Sans',sans-serif;
    font-size:13px;font-weight:600;
    cursor:pointer;
    transition:all 0.2s ease;
  }
  .shop-btn:active{
    border-color:var(--m1);color:var(--m1);
  }

  /* =============================================
     CONFETTI CANVAS
     ============================================= */
  #confetti{
    position:absolute;inset:0;z-index:55;
    pointer-events:none;
  }

  /* =============================================
     NOISE GRAIN
     ============================================= */
  .app::after{
    content:'';position:fixed;inset:0;z-index:100;
    pointer-events:none;
    opacity:0.025;
    background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  }

  /* =============================================
     ENTRANCE ANIMS
     ============================================= */
  @keyframes fadeUp{
    from{opacity:0;transform:translateY(16px)}
    to{opacity:1;transform:translateY(0)}
  }

  .title-section{animation:fadeUp 0.5s ease both 0.1s;}
  .stats-bar{animation:fadeUp 0.5s ease both 0.2s;}
  .grid-wrap{animation:fadeUp 0.5s ease both 0.3s;}
  .progress{animation:fadeUp 0.5s ease both 0.4s;}

  @keyframes cardEntrance{
    from{opacity:0;transform:scale(0.8) rotateY(10deg)}
    to{opacity:1;transform:scale(1) rotateY(0deg)}
  }
</style>
</head>
<body>

<div class="app">
  <!-- HEADER -->
  <div class="header">
    <div class="brand">
      <div class="brand-mark">M1</div>
      <div>
        <div class="brand-text">M1 Singapore</div>
        <div class="brand-sub">Match & Win</div>
      </div>
    </div>
    <button class="close-btn" onclick="dismiss()" aria-label="Close">
      <svg viewBox="0 0 24 24" fill="none" stroke-width="2.5" stroke-linecap="round"><path d="M18 6L6 18M6 6l12 12"/></svg>
    </button>
  </div>

  <!-- TITLE -->
  <div class="title-section">
    <div class="game-title">Match M1 Perks</div>
    <div class="game-subtitle">Flip cards to find pairs. Match all 8 to unlock your reward.</div>
  </div>

  <!-- STATS -->
  <div class="stats-bar">
    <div class="stat">
      <div class="stat-icon">üëÜ</div>
      <div>
        <div class="stat-label">Moves</div>
        <div class="stat-value" id="moveCount">0</div>
      </div>
    </div>
    <div class="stat">
      <div class="stat-icon">‚≠ê</div>
      <div>
        <div class="stat-label">Matched</div>
        <div class="stat-value"><span id="matchCount">0</span>/8</div>
      </div>
    </div>
  </div>

  <!-- GRID -->
  <div class="grid-wrap">
    <div class="grid" id="grid"></div>
  </div>

  <!-- PROGRESS DOTS -->
  <div class="progress" id="progress"></div>

  <!-- WIN OVERLAY -->
  <div class="win-overlay" id="winOverlay">
    <div class="win-card">
      <div class="win-trophy">üèÜ</div>
      <div class="win-title">You Matched 'Em All!</div>
      <div class="win-stats" id="winStats"></div>
      <div class="reward-box">
        <div class="reward-label">Your Reward</div>
        <div class="reward-code" id="rewardCode"></div>
        <div class="reward-desc" id="rewardDesc"></div>
      </div>
      <button class="copy-btn" id="copyBtn" onclick="copyCode()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
        Copy Code
      </button>
      <button class="shop-btn" onclick="shopNow()">Browse Bespoke Plans ‚Üí</button>
    </div>
  </div>

  <!-- CONFETTI -->
  <canvas id="confetti"></canvas>
</div>

<script>
// =============================================
// CONFIG ‚Äî edit card pairs and reward here
// =============================================
const CONFIG = {
  pairs: [
    { emoji: 'üì∂', label: '5G' },
    { emoji: 'üì±', label: 'Bespoke' },
    { emoji: 'üåê', label: 'Broadband' },
    { emoji: '‚úàÔ∏è', label: 'Roaming' },
    { emoji: 'üéÆ', label: 'Zolaz' },
    { emoji: 'üé¨', label: 'Viu' },
    { emoji: '‚òÄÔ∏è', label: 'Sunriser' },
    { emoji: 'üõ°Ô∏è', label: 'Cyber' },
  ],
  reward: {
    code: 'M1MATCH50',
    description: '$50 off your next Bespoke Flexi plan. Valid 30 days. T&Cs apply.',
    shopUrl: 'https://www.m1.com.sg/personal/flexi'
  },
  mismatchDelay: 900,
  winDelay: 600,
  event: 'M1_MemoryMatch'
};

// =============================================
// STATE
// =============================================
let cards = [];
let flippedCards = [];
let matchedPairs = 0;
let moves = 0;
let locked = false;
let gameStartTime = 0;

// =============================================
// INIT
// =============================================
function init() {
  // Create pairs
  const deck = [];
  CONFIG.pairs.forEach((pair, i) => {
    deck.push({ ...pair, id: i });
    deck.push({ ...pair, id: i });
  });

  // Fisher-Yates shuffle
  for (let i = deck.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [deck[i], deck[j]] = [deck[j], deck[i]];
  }

  cards = deck;
  renderGrid();
  renderProgress();
  gameStartTime = Date.now();
  trackEvent('Started', {});
}

// =============================================
// RENDER
// =============================================
function renderGrid() {
  const grid = document.getElementById('grid');
  grid.innerHTML = '';

  cards.forEach((card, index) => {
    const el = document.createElement('div');
    el.className = 'card';
    el.dataset.index = index;
    el.dataset.pairId = card.id;
    el.style.animation = `cardEntrance 0.4s cubic-bezier(0.34,1.56,0.64,1) both ${index * 0.04}s`;

    el.innerHTML = `
      <div class="card-inner">
        <div class="card-face card-back">
          <div class="card-back-logo">M1</div>
        </div>
        <div class="card-face card-front">
          <div class="card-emoji">${card.emoji}</div>
          <div class="card-label">${card.label}</div>
        </div>
      </div>
    `;

    el.addEventListener('click', () => flipCard(el, index));
    grid.appendChild(el);
  });
}

function renderProgress() {
  const prog = document.getElementById('progress');
  prog.innerHTML = '';
  for (let i = 0; i < 8; i++) {
    const dot = document.createElement('div');
    dot.className = 'progress-dot' + (i < matchedPairs ? ' filled' : '');
    prog.appendChild(dot);
  }
}

// =============================================
// GAME LOGIC
// =============================================
function flipCard(el, index) {
  // Guard: don't flip if locked, already flipped, or already matched
  if (locked) return;
  if (el.classList.contains('flipped')) return;
  if (el.classList.contains('matched')) return;

  el.classList.add('flipped');
  flippedCards.push({ el, index, pairId: cards[index].id });

  if (flippedCards.length === 2) {
    moves++;
    updateMoves();
    locked = true;

    const [a, b] = flippedCards;

    if (a.pairId === b.pairId) {
      // MATCH
      setTimeout(() => {
        a.el.classList.add('matched');
        b.el.classList.add('matched');
        matchedPairs++;
        updateMatches();
        renderProgress();

        trackEvent('Pair_Matched', {
          Pair_Name: CONFIG.pairs[a.pairId].label,
          Pairs_Matched: matchedPairs,
          Moves_So_Far: moves
        });

        flippedCards = [];
        locked = false;

        // Check win
        if (matchedPairs === 8) {
          setTimeout(() => showWin(), CONFIG.winDelay);
        }
      }, 300);
    } else {
      // MISMATCH ‚Äî shake then flip back
      setTimeout(() => {
        a.el.classList.add('shake');
        b.el.classList.add('shake');
      }, 400);

      setTimeout(() => {
        a.el.classList.remove('flipped', 'shake');
        b.el.classList.remove('flipped', 'shake');
        flippedCards = [];
        locked = false;
      }, CONFIG.mismatchDelay);
    }
  }
}

function updateMoves() {
  document.getElementById('moveCount').textContent = moves;
}

function updateMatches() {
  document.getElementById('matchCount').textContent = matchedPairs;
}

// =============================================
// WIN
// =============================================
function showWin() {
  const elapsed = Math.round((Date.now() - gameStartTime) / 1000);
  const rating = moves <= 12 ? 'üåü Perfect' : moves <= 16 ? '‚≠ê Great' : 'üëç Nice';

  document.getElementById('winStats').innerHTML =
    `Completed in <strong>${moves} moves</strong> ¬∑ ${elapsed}s<br>${rating} memory!`;
  document.getElementById('rewardCode').textContent = CONFIG.reward.code;
  document.getElementById('rewardDesc').textContent = CONFIG.reward.description;

  const overlay = document.getElementById('winOverlay');
  overlay.classList.add('active');

  fireConfetti();

  trackEvent('Completed', {
    Moves: moves,
    Time_Seconds: elapsed,
    Rating: rating.replace(/[^a-zA-Z ]/g, '').trim(),
    Coupon_Code: CONFIG.reward.code
  });
}

// =============================================
// COPY TO CLIPBOARD
// =============================================
function copyCode() {
  const code = CONFIG.reward.code;
  const btn = document.getElementById('copyBtn');

  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(code).then(() => showCopied(btn));
  } else {
    // Fallback
    const ta = document.createElement('textarea');
    ta.value = code;
    ta.style.cssText = 'position:fixed;opacity:0';
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
    showCopied(btn);
  }

  trackEvent('Code_Copied', { Coupon_Code: code });
}

function showCopied(btn) {
  btn.classList.add('copied');
  btn.innerHTML = `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M20 6L9 17l-5-5"/></svg>
    Copied!
  `;
  setTimeout(() => {
    btn.classList.remove('copied');
    btn.innerHTML = `
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
      Copy Code
    `;
  }, 2000);
}

// =============================================
// SHOP CTA
// =============================================
function shopNow() {
  trackEvent('CTA_Clicked', {
    Coupon_Code: CONFIG.reward.code,
    Destination: CONFIG.reward.shopUrl
  });

  if (typeof CleverTap !== 'undefined') {
    CleverTap.profile.push({ Site: { Coupon_Earned: CONFIG.reward.code } });
  }

  setTimeout(() => {
    window.location.href = CONFIG.reward.shopUrl;
  }, 200);
}

// =============================================
// CONFETTI ‚Äî lightweight canvas implementation
// =============================================
function fireConfetti() {
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  canvas.width = canvas.offsetWidth * 2;
  canvas.height = canvas.offsetHeight * 2;
  ctx.scale(2, 2);

  const W = canvas.offsetWidth;
  const H = canvas.offsetHeight;
  const colors = ['#FF9E1B', '#FFB84D', '#FFFFFF', '#34D399', '#FF6B6B', '#60A5FA'];
  const pieces = [];

  for (let i = 0; i < 80; i++) {
    pieces.push({
      x: Math.random() * W,
      y: Math.random() * H * -1 - 20,
      w: Math.random() * 6 + 3,
      h: Math.random() * 4 + 2,
      color: colors[Math.floor(Math.random() * colors.length)],
      vy: Math.random() * 2 + 1.5,
      vx: (Math.random() - 0.5) * 2,
      rotation: Math.random() * 360,
      spin: (Math.random() - 0.5) * 8,
      opacity: 1
    });
  }

  let frame = 0;
  const maxFrames = 180;

  function animate() {
    if (frame > maxFrames) {
      ctx.clearRect(0, 0, W, H);
      return;
    }
    ctx.clearRect(0, 0, W, H);

    pieces.forEach(p => {
      p.y += p.vy;
      p.x += p.vx;
      p.rotation += p.spin;
      if (frame > maxFrames * 0.7) {
        p.opacity = Math.max(0, 1 - (frame - maxFrames * 0.7) / (maxFrames * 0.3));
      }

      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rotation * Math.PI / 180);
      ctx.globalAlpha = p.opacity;
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
      ctx.restore();
    });

    frame++;
    requestAnimationFrame(animate);
  }

  animate();
}

// =============================================
// CLEVERTAP EVENTS
// =============================================
function trackEvent(action, props) {
  const eventName = CONFIG.event + '_' + action;
  console.log('[CT]', eventName, props);

  if (typeof CleverTap !== 'undefined') {
    CleverTap.event.push(eventName, props);
  }
}

// =============================================
// DISMISS
// =============================================
function dismiss() {
  trackEvent('Dismissed', {
    Moves: moves,
    Pairs_Matched: matchedPairs,
    Completed: matchedPairs === 8
  });
}

// =============================================
// START
// =============================================
init();
</script>

</body>
</html>
