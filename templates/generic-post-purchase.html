<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Post-Purchase Cross-Sell</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&display=swap');
  *{margin:0;padding:0;box-sizing:border-box}
  :root{
    --bg:#0B0E13;--card:#141820;--card2:#1A1F2A;
    --border:rgba(255,255,255,0.06);
    --green:#22C55E;--green-glow:rgba(34,197,94,0.12);
    --blue:#3B82F6;--blue-glow:rgba(59,130,246,0.1);
    --violet:#8B5CF6;--amber:#F59E0B;
    --text:#EAEAEA;--muted:rgba(255,255,255,0.4);
  }
  body{
    font-family:'DM Sans',sans-serif;background:var(--bg);
    color:var(--text);max-width:390px;margin:0 auto;
    min-height:100vh;padding:0;overflow-x:hidden;
  }

  .dismiss{
    position:fixed;top:12px;right:12px;width:28px;height:28px;
    background:rgba(255,255,255,0.08);border:none;border-radius:50%;
    color:var(--muted);font-size:14px;cursor:pointer;z-index:10;
    display:flex;align-items:center;justify-content:center;
  }

  /* Confetti */
  .confetti-zone{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
  .conf{
    position:absolute;width:6px;height:6px;border-radius:50%;
    animation:confDrop 2.5s ease-out forwards;opacity:0;
  }
  @keyframes confDrop{
    0%{opacity:0;transform:translateY(-10vh) rotate(0)}
    15%{opacity:1}
    100%{opacity:0;transform:translateY(100vh) rotate(720deg)}
  }

  /* Success header */
  .success-header{
    padding:24px 20px 16px;text-align:center;
    animation:fadeIn 0.4s ease both;
    position:relative;z-index:1;
  }
  .check-circle{
    width:56px;height:56px;border-radius:50%;
    background:var(--green);display:flex;align-items:center;justify-content:center;
    font-size:28px;margin:0 auto 14px;
    animation:popCheck 0.5s cubic-bezier(0.34,1.56,0.64,1) 0.2s both;
    box-shadow:0 0 24px var(--green-glow);
  }
  @keyframes popCheck{0%{transform:scale(0)}100%{transform:scale(1)}}
  .success-title{font-size:20px;font-weight:700;color:#fff;margin-bottom:4px}
  .success-sub{font-size:13px;color:var(--muted)}

  /* Order summary */
  .order-card{
    margin:0 16px 16px;padding:16px;
    background:var(--card);border:1px solid var(--border);
    border-radius:14px;animation:fadeIn 0.4s ease 0.2s both;
  }
  .order-row{display:flex;align-items:center;gap:12px;margin-bottom:10px}
  .order-thumb{
    width:44px;height:44px;border-radius:10px;
    display:flex;align-items:center;justify-content:center;
    font-size:20px;flex-shrink:0;
    background:linear-gradient(135deg,rgba(34,197,94,0.1),rgba(34,197,94,0.03));
  }
  .order-info{flex:1}
  .order-name{font-size:13px;font-weight:600;color:#fff}
  .order-detail{font-size:11px;color:var(--muted);margin-top:2px}
  .order-price{font-size:14px;font-weight:700;color:#fff;flex-shrink:0}
  .order-divider{height:1px;background:var(--border);margin:10px 0}
  .order-total{display:flex;justify-content:space-between;font-size:11px;color:var(--muted)}
  .order-total .total-price{font-size:16px;font-weight:800;color:#fff}

  /* Cross-sell section */
  .cross-section{
    padding:0 16px 12px;animation:fadeIn 0.4s ease 0.3s both;
  }
  .cross-title{
    font-size:11px;font-weight:600;letter-spacing:1px;
    text-transform:uppercase;color:var(--muted);margin-bottom:10px;
  }
  .cross-title span{color:var(--blue);font-weight:700}

  .cross-scroll{
    display:flex;gap:10px;overflow-x:auto;
    padding-bottom:8px;scroll-snap-type:x mandatory;
    scrollbar-width:none;
  }
  .cross-scroll::-webkit-scrollbar{display:none}

  .cross-card{
    min-width:220px;max-width:220px;scroll-snap-align:start;
    background:var(--card);border:1px solid var(--border);
    border-radius:14px;overflow:hidden;
    cursor:pointer;transition:all 0.2s;flex-shrink:0;
  }
  .cross-card:active{transform:scale(0.97);border-color:var(--blue)}
  .cross-hero{
    height:80px;display:flex;align-items:center;justify-content:center;
    font-size:32px;
  }
  .ch-1{background:linear-gradient(135deg,rgba(59,130,246,0.08),rgba(59,130,246,0.02))}
  .ch-2{background:linear-gradient(135deg,rgba(139,92,246,0.08),rgba(139,92,246,0.02))}
  .ch-3{background:linear-gradient(135deg,rgba(245,158,11,0.08),rgba(245,158,11,0.02))}
  .cross-body{padding:12px}
  .cross-name{font-size:13px;font-weight:600;color:#fff;margin-bottom:2px}
  .cross-desc{font-size:11px;color:var(--muted);line-height:1.4;margin-bottom:8px}
  .cross-footer{display:flex;align-items:center;justify-content:space-between}
  .cross-price{font-size:14px;font-weight:700;color:var(--blue)}
  .cross-match{font-size:10px;color:var(--muted);padding:3px 8px;background:rgba(255,255,255,0.04);border-radius:6px}

  /* CTAs */
  .cta-area{padding:8px 16px 24px;animation:fadeIn 0.4s ease 0.4s both}
  .btn-primary{
    width:100%;padding:16px;border:none;border-radius:14px;
    background:var(--green);color:#fff;font-family:'DM Sans',sans-serif;
    font-size:15px;font-weight:700;cursor:pointer;transition:all 0.2s;
    margin-bottom:8px;
  }
  .btn-primary:active{transform:scale(0.97)}
  .btn-secondary{
    width:100%;padding:12px;border:none;border-radius:12px;
    background:var(--card);border:1px solid var(--border);
    color:var(--text);font-family:'DM Sans',sans-serif;
    font-size:13px;font-weight:600;cursor:pointer;margin-bottom:8px;
  }
  .btn-dismiss-text{
    width:100%;padding:8px;border:none;background:transparent;
    color:var(--muted);font-family:'DM Sans',sans-serif;font-size:12px;cursor:pointer;
  }

  @keyframes fadeIn{0%{opacity:0;transform:translateY(12px)}100%{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>

<script>
  const CONFIG = {
    includeDismissButton: true,
    brand: { name: "ShopApp" },

    order: {
      emoji: "ðŸ‘Ÿ",
      name: "Nike Air Max 270 React",
      detail: "Size US 10 Â· Black/White",
      price: "RM 649",
      orderId: "ORD-28471",
    },

    crossSell: {
      title: "Customers also bought",
      matchLabel: "bought together",
      items: [
        {
          emoji: "ðŸ§¦",
          name: "Nike Dri-FIT Socks (3-pack)",
          desc: "Performance cushion crew socks",
          price: "RM 69",
          matchPercent: "87%",
          url: "app://product/nike-socks?ref=cross_sell",
          bgClass: "ch-1",
        },
        {
          emoji: "ðŸ§´",
          name: "Shoe Cleaning Kit",
          desc: "Premium foam cleaner + brush set",
          price: "RM 49",
          matchPercent: "72%",
          url: "app://product/cleaning-kit?ref=cross_sell",
          bgClass: "ch-2",
        },
        {
          emoji: "ðŸ‘œ",
          name: "Nike Gym Duffel Bag",
          desc: "Water-resistant, shoe compartment",
          price: "RM 189",
          matchPercent: "64%",
          url: "app://product/gym-bag?ref=cross_sell",
          bgClass: "ch-3",
        },
      ],
    },

    cta: {
      primaryText: "Track My Order",
      primaryUrl: "app://orders/ORD-28471",
      secondaryText: "Continue Shopping",
      secondaryUrl: "app://shop",
    },

    tracking: { eventPrefix: "PostPurchase" },
  };
</script>

<button class="dismiss" id="dismissBtn" onclick="dismiss()" style="display:none">âœ•</button>
<div class="confetti-zone" id="confetti"></div>

<!-- Success header -->
<div class="success-header">
  <div class="check-circle">âœ“</div>
  <div class="success-title">Order confirmed!</div>
  <div class="success-sub" id="orderIdText"></div>
</div>

<!-- Order summary -->
<div class="order-card">
  <div class="order-row">
    <div class="order-thumb" id="orderThumb"></div>
    <div class="order-info">
      <div class="order-name" id="orderName"></div>
      <div class="order-detail" id="orderDetail"></div>
    </div>
    <div class="order-price" id="orderPrice"></div>
  </div>
  <div class="order-divider"></div>
  <div class="order-total">
    <span>Total paid</span>
    <span class="total-price" id="totalPrice"></span>
  </div>
</div>

<!-- Cross-sell -->
<div class="cross-section">
  <div class="cross-title" id="crossTitle"></div>
  <div class="cross-scroll" id="crossScroll"></div>
</div>

<!-- CTAs -->
<div class="cta-area">
  <button class="btn-primary" id="btnTrack" onclick="trackOrder()"></button>
  <button class="btn-secondary" id="btnShop" onclick="continueShopping()"></button>
  <button class="btn-dismiss-text" onclick="dismiss()">Close</button>
</div>

<script>
  const { brand, order, crossSell, cta, tracking, includeDismissButton } = CONFIG;

  if (includeDismissButton) document.getElementById('dismissBtn').style.display = 'flex';

  // Order
  document.getElementById('orderIdText').textContent = 'Order ' + order.orderId;
  document.getElementById('orderThumb').textContent = order.emoji;
  document.getElementById('orderName').textContent = order.name;
  document.getElementById('orderDetail').textContent = order.detail;
  document.getElementById('orderPrice').textContent = order.price;
  document.getElementById('totalPrice').textContent = order.price;
  document.getElementById('btnTrack').textContent = cta.primaryText;
  document.getElementById('btnShop').textContent = cta.secondaryText;

  // Cross-sell cards
  document.getElementById('crossTitle').innerHTML =
    crossSell.title + ' <span>â†“</span>';
  const scroll = document.getElementById('crossScroll');
  crossSell.items.forEach(function(item, i) {
    const card = document.createElement('div');
    card.className = 'cross-card';
    card.onclick = function() { crossSellClick(item, i); };
    card.innerHTML =
      '<div class="cross-hero ' + item.bgClass + '">' + item.emoji + '</div>' +
      '<div class="cross-body">' +
        '<div class="cross-name">' + item.name + '</div>' +
        '<div class="cross-desc">' + item.desc + '</div>' +
        '<div class="cross-footer">' +
          '<span class="cross-price">' + item.price + '</span>' +
          '<span class="cross-match">' + item.matchPercent + ' ' + crossSell.matchLabel + '</span>' +
        '</div>' +
      '</div>';
    scroll.appendChild(card);
  });

  // Confetti
  const colors = ['#22C55E','#3B82F6','#8B5CF6','#F59E0B','#EC4899','#fff'];
  const zone = document.getElementById('confetti');
  for (let i = 0; i < 25; i++) {
    const c = document.createElement('div');
    c.className = 'conf';
    c.style.left = Math.random() * 100 + '%';
    c.style.background = colors[Math.floor(Math.random() * colors.length)];
    c.style.animationDelay = Math.random() * 0.6 + 's';
    c.style.width = c.style.height = (4 + Math.random() * 5) + 'px';
    zone.appendChild(c);
  }
  setTimeout(function() { zone.innerHTML = ''; }, 3000);

  trackEvent(tracking.eventPrefix + '_Viewed', {
    order_id: order.orderId,
    order_item: order.name,
    cross_sell_count: crossSell.items.length
  });

  function crossSellClick(item, idx) {
    trackEvent(tracking.eventPrefix + '_CrossSell_Clicked', {
      item_name: item.name,
      item_price: item.price,
      position: idx + 1
    });
    if (item.url) window.location.href = item.url;
  }

  function trackOrder() {
    trackEvent(tracking.eventPrefix + '_TrackOrder', { order_id: order.orderId });
    if (cta.primaryUrl) window.location.href = cta.primaryUrl;
  }

  function continueShopping() {
    trackEvent(tracking.eventPrefix + '_ContinueShopping');
    if (cta.secondaryUrl) window.location.href = cta.secondaryUrl;
  }

  function dismiss() {
    trackEvent(tracking.eventPrefix + '_Dismissed');
    try { window.location.href = 'wzrk://exit'; } catch(e) {}
  }

  function trackEvent(name, props) {
    console.log('CT Event:', name, props || {});
    if (window.CleverTap) window.CleverTap.pushEvent(name, props || {});
    if (window.clevertap) window.clevertap.event.push(name, props || {});
    try { window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({ event: name, properties: props || {} })); } catch(e) {}
  }
</script>
</body>
</html>
