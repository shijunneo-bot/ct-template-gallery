<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    const CONFIG = {
      includeDismissButton: true,

      brand: {
        name: "OLE777",
        primary: "#7C3AED",
        primaryLight: "#A78BFA",
        primaryDark: "#5B21B6",
        accent: "#F59E0B",
        dark: "#0A0614",
        white: "#FFFFFF",
        green: "#10B981",
      },

      gate: {
        instruction: "Hold to unlock your daily bonus",
        holdDuration: 2000,
        progressColor: "#7C3AED",
        progressGlow: "rgba(124, 58, 237, 0.4)",
      },

      reward: {
        type: "bonus",
        headline: "50 Free Spins!",
        description: "Use them on any slot game before midnight",
        code: null,
        emoji: "ðŸŽ°",
      },

      celebration: {
        confettiEnabled: true,
        confettiCount: 40,
        hapticEnabled: true,
      },

      cta: {
        text: "Play Now",
        url: "ole777://slots",
      },

      events: {
        gateViewed:       "TapGate_Viewed",
        gateHoldStarted:  "TapGate_Hold_Started",
        gateUnlocked:     "TapGate_Unlocked",
        gateCTAClicked:   "TapGate_CTA_Clicked",
        gateDismissed:    "TapGate_Dismissed",
      },
    };
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700;800&display=swap">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --primary: #7C3AED;
      --primary-light: #A78BFA;
      --accent: #F59E0B;
      --dark: #0A0614;
      --text: #FFFFFF;
      --text-muted: rgba(255,255,255,0.5);
    }

    body {
      background: var(--dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Space Grotesk', sans-serif;
      color: var(--text);
      padding: 32px 24px;
      overflow: hidden;
      user-select: none;
      -webkit-user-select: none;
    }

    .dismiss {
      position: fixed; top: 12px; right: 12px;
      width: 36px; height: 36px; border-radius: 50%;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.1);
      color: rgba(255,255,255,0.4);
      font-size: 18px; cursor: pointer; z-index: 100;
      display: flex; align-items: center; justify-content: center;
    }
    .dismiss:active { transform: scale(0.9); }

    /* Ambient floating particles */
    .ambient {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 0;
    }
    .ambient-dot {
      position: absolute;
      width: 4px; height: 4px;
      border-radius: 50%;
      background: var(--primary);
      opacity: 0.08;
    }

    @keyframes driftA { 0%,100%{transform:translate(0,0)} 50%{transform:translate(15px,-25px)} }
    @keyframes driftB { 0%,100%{transform:translate(0,0)} 50%{transform:translate(-20px,15px)} }
    @keyframes driftC { 0%,100%{transform:translate(0,0)} 50%{transform:translate(10px,20px)} }

    .content { position: relative; z-index: 1; text-align: center; }

    .label-top {
      font-size: 11px; font-weight: 700;
      letter-spacing: 2px; text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 28px;
      opacity: 0;
      animation: fadeIn 0.5s 0.2s ease forwards;
    }
    @keyframes fadeIn { to { opacity: 1; } }
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

    /* Hold button + SVG ring */
    .hold-area {
      position: relative;
      width: 140px; height: 140px;
      margin: 0 auto 20px;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }

    .hold-ring-svg {
      position: absolute; inset: 0;
      transform: rotate(-90deg);
    }
    .ring-bg {
      fill: none;
      stroke: rgba(255,255,255,0.08);
      stroke-width: 5;
    }
    .ring-progress {
      fill: none;
      stroke-width: 5;
      stroke-linecap: round;
    }

    .hold-btn {
      position: absolute;
      inset: 10px;
      border-radius: 50%;
      background: rgba(255,255,255,0.04);
      border: 2px solid rgba(255,255,255,0.1);
      display: flex; align-items: center; justify-content: center;
      transition: transform 0.15s ease, border-color 0.2s ease, background 0.2s ease;
    }
    .hold-btn.pressing {
      transform: scale(1.05);
      border-color: var(--primary);
      background: rgba(124,58,237,0.08);
    }

    .hold-icon {
      font-size: 42px;
      transition: transform 0.3s ease;
    }
    .hold-icon.shake {
      animation: iconShake 0.6s ease-in-out infinite;
    }
    @keyframes iconShake {
      0%,100% { transform: rotate(0); }
      25% { transform: rotate(-5deg); }
      75% { transform: rotate(5deg); }
    }

    /* Glow behind button */
    .hold-glow {
      position: absolute;
      inset: -20px;
      border-radius: 50%;
      opacity: 0;
      filter: blur(30px);
      transition: opacity 0.3s ease;
      pointer-events: none;
    }
    .hold-area.pressing .hold-glow { opacity: 0.3; }

    .instruction {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }
    .hint-text {
      font-size: 12px;
      color: rgba(255,255,255,0.2);
      height: 16px;
    }

    /* â”€â”€ Reward screen â”€â”€ */
    .reward-screen {
      display: none;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .reward-screen.visible { display: flex; }

    .reward-emoji {
      font-size: 72px;
      margin-bottom: 16px;
      opacity: 0;
      transform: scale(0);
    }
    .reward-emoji.pop {
      animation: rewardPop 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }
    @keyframes rewardPop {
      0% { opacity: 0; transform: scale(0); }
      60% { opacity: 1; transform: scale(1.2); }
      100% { opacity: 1; transform: scale(1); }
    }

    .reward-headline {
      font-size: 28px; font-weight: 800;
      margin-bottom: 8px;
      opacity: 0; transform: translateY(12px);
    }
    .reward-desc {
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.5;
      max-width: 280px;
      margin-bottom: 28px;
      opacity: 0; transform: translateY(8px);
    }

    .reward-cta {
      padding: 16px 40px;
      border-radius: 50px;
      border: none;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px; font-weight: 800;
      cursor: pointer;
      color: var(--dark);
      transition: transform 0.2s;
      opacity: 0; transform: translateY(8px);
      position: relative;
    }
    .reward-cta:active { transform: scale(0.96) translateY(0); }
    .reward-cta::after {
      content: '';
      position: absolute; inset: -3px;
      border-radius: 53px;
      z-index: -1; opacity: 0.35;
      filter: blur(14px);
    }

    /* Confetti */
    .confetti-layer { position: fixed; inset: 0; pointer-events: none; z-index: 50; }
    .conf {
      position: absolute; opacity: 0;
    }
    .conf.fire {
      animation: confBurst var(--dur) var(--delay) cubic-bezier(0.1,0.7,0.3,1) forwards;
    }
    @keyframes confBurst {
      0% { opacity: 1; transform: translate(0,0) rotate(0) scale(1); }
      70% { opacity: 0.8; }
      100% { opacity: 0; transform: translate(var(--tx),var(--ty)) rotate(var(--rot)) scale(0.1); }
    }
    .shape-tri { clip-path: polygon(50% 0%, 0% 100%, 100% 100%); }
  </style>
</head>

<body>
  <div class="ambient" id="ambient"></div>

  <div class="content" id="gateScreen">
    <div class="label-top">DAILY BONUS</div>

    <div class="hold-area" id="holdArea">
      <div class="hold-glow" id="holdGlow"></div>
      <svg class="hold-ring-svg" viewBox="0 0 140 140">
        <circle class="ring-bg" cx="70" cy="70" r="64" />
        <circle class="ring-progress" id="ringProgress" cx="70" cy="70" r="64"
                stroke-dasharray="402.12" stroke-dashoffset="402.12" />
      </svg>
      <div class="hold-btn" id="holdBtn">
        <span class="hold-icon shake" id="holdIcon">ðŸ”’</span>
      </div>
    </div>

    <div class="instruction" id="instruction"></div>
    <div class="hint-text" id="hintText">Press and hold</div>
  </div>

  <div class="reward-screen" id="rewardScreen">
    <div class="reward-emoji" id="rewardEmoji"></div>
    <h2 class="reward-headline" id="rewardHeadline"></h2>
    <p class="reward-desc" id="rewardDesc"></p>
    <button class="reward-cta" id="rewardCta"></button>
  </div>

  <div class="confetti-layer" id="confettiLayer"></div>

  <script>
    function fireEvent(name, props) {
      try {
        if (window.CleverTap) window.CleverTap.pushEvent(name, props || {});
        else if (window.webkit?.messageHandlers?.clevertap)
          window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({ event: name, properties: props || {} }));
        else if (window.clevertap) window.clevertap.event.push(name, props || {});
      } catch (e) { console.log("CT Event:", name, props); }
    }
    function dismiss() {
      fireEvent(CONFIG.events.gateDismissed, { unlocked });
      try { location.href = "wzrk://exit"; } catch (e) {}
    }
    function rand(a, b) { return a + Math.random() * (b - a); }

    let unlocked = false;
    let holdStart = 0;
    let holdTimer = null;
    let animFrame = null;
    let firedStart = false;

    const circumference = 2 * Math.PI * 64; // r=64

    (function init() {
      const root = document.documentElement;
      root.style.setProperty("--primary", CONFIG.brand.primary);
      root.style.setProperty("--dark", CONFIG.brand.dark);
      root.style.setProperty("--accent", CONFIG.brand.accent);

      // Ring gradient
      const ring = document.getElementById("ringProgress");
      ring.setAttribute("stroke", CONFIG.gate.progressColor);
      document.getElementById("holdGlow").style.background = CONFIG.gate.progressGlow.replace("0.4", "1");
      ring.style.filter = `drop-shadow(0 0 6px ${CONFIG.gate.progressGlow})`;

      // Dismiss
      if (CONFIG.includeDismissButton) {
        const btn = document.createElement("button");
        btn.className = "dismiss"; btn.innerHTML = "âœ•"; btn.onclick = dismiss;
        document.body.appendChild(btn);
      }

      // Ambient dots
      const ambient = document.getElementById("ambient");
      const anims = ["driftA", "driftB", "driftC"];
      for (let i = 0; i < 10; i++) {
        const d = document.createElement("div");
        d.className = "ambient-dot";
        d.style.left = rand(5, 95) + "%";
        d.style.top = rand(5, 95) + "%";
        d.style.animation = `${anims[i % 3]} ${rand(6, 14)}s ease-in-out infinite`;
        d.style.animationDelay = rand(0, 5) + "s";
        ambient.appendChild(d);
      }

      document.getElementById("instruction").textContent = CONFIG.gate.instruction;

      // Reward content
      document.getElementById("rewardEmoji").textContent = CONFIG.reward.emoji;
      document.getElementById("rewardHeadline").textContent = CONFIG.reward.headline;
      document.getElementById("rewardDesc").textContent = CONFIG.reward.description;
      const cta = document.getElementById("rewardCta");
      cta.textContent = CONFIG.cta.text;
      cta.style.background = `linear-gradient(135deg, ${CONFIG.brand.primary}, ${CONFIG.brand.primaryLight})`;
      cta.onclick = () => {
        fireEvent(CONFIG.events.gateCTAClicked, { reward_type: CONFIG.reward.type });
        if (CONFIG.cta.url) location.href = CONFIG.cta.url;
      };

      // Hold events
      const area = document.getElementById("holdArea");
      area.addEventListener("touchstart", startHold, { passive: true });
      area.addEventListener("mousedown", startHold);
      area.addEventListener("touchend", endHold);
      area.addEventListener("touchcancel", endHold);
      area.addEventListener("mouseup", endHold);
      area.addEventListener("mouseleave", endHold);

      fireEvent(CONFIG.events.gateViewed);
    })();

    function startHold(e) {
      if (unlocked) return;
      e.preventDefault?.();
      holdStart = performance.now();

      document.getElementById("holdBtn").classList.add("pressing");
      document.getElementById("holdArea").classList.add("pressing");
      document.getElementById("holdIcon").classList.remove("shake");
      document.getElementById("hintText").textContent = "Keep holding...";

      if (!firedStart) {
        firedStart = true;
        fireEvent(CONFIG.events.gateHoldStarted);
      }

      // Animate ring
      function tick() {
        const elapsed = performance.now() - holdStart;
        const pct = Math.min(elapsed / CONFIG.gate.holdDuration, 1);
        const offset = circumference * (1 - pct);
        document.getElementById("ringProgress").style.strokeDashoffset = offset;

        if (pct >= 1) {
          doUnlock();
          return;
        }
        animFrame = requestAnimationFrame(tick);
      }
      animFrame = requestAnimationFrame(tick);
    }

    function endHold() {
      if (unlocked) return;
      cancelAnimationFrame(animFrame);

      document.getElementById("holdBtn").classList.remove("pressing");
      document.getElementById("holdArea").classList.remove("pressing");

      // Reset ring
      document.getElementById("ringProgress").style.strokeDashoffset = circumference;
      document.getElementById("holdIcon").classList.add("shake");
      document.getElementById("hintText").textContent = "Almost! Try again";

      setTimeout(() => {
        if (!unlocked) document.getElementById("hintText").textContent = "Press and hold";
      }, 1500);
    }

    function doUnlock() {
      unlocked = true;

      // Haptic
      if (CONFIG.celebration.hapticEnabled) {
        try { navigator.vibrate([50, 30, 100]); } catch(e) {}
      }

      // Hide gate, show reward
      document.getElementById("holdIcon").textContent = "ðŸ”“";
      document.getElementById("holdIcon").classList.remove("shake");

      setTimeout(() => {
        document.getElementById("gateScreen").style.display = "none";
        const rs = document.getElementById("rewardScreen");
        rs.classList.add("visible");

        // Animate reward
        setTimeout(() => document.getElementById("rewardEmoji").classList.add("pop"), 100);
        setTimeout(() => { document.getElementById("rewardHeadline").style.animation = "fadeInUp 0.5s ease forwards"; }, 400);
        setTimeout(() => { document.getElementById("rewardDesc").style.animation = "fadeInUp 0.5s ease forwards"; }, 550);
        setTimeout(() => { document.getElementById("rewardCta").style.animation = "fadeInUp 0.5s ease forwards"; }, 700);
      }, 400);

      // Confetti
      if (CONFIG.celebration.confettiEnabled) {
        setTimeout(() => burstConfetti(), 500);
      }

      fireEvent(CONFIG.events.gateUnlocked, {
        hold_duration_ms: CONFIG.gate.holdDuration,
        reward_type: CONFIG.reward.type,
      });
    }

    function burstConfetti() {
      const layer = document.getElementById("confettiLayer");
      const colors = CONFIG.particles?.colors || [CONFIG.brand.primary, CONFIG.brand.primaryLight, CONFIG.brand.accent, "#FFFFFF"];
      const cx = window.innerWidth / 2;
      const cy = window.innerHeight * 0.35;

      for (let i = 0; i < CONFIG.celebration.confettiCount; i++) {
        const el = document.createElement("div");
        el.className = "conf";
        const size = rand(5, 11);
        el.style.width = size + "px";
        el.style.height = size + "px";
        el.style.background = colors[Math.floor(Math.random() * colors.length)];
        el.style.borderRadius = Math.random() > 0.6 ? "50%" : Math.random() > 0.5 ? "0" : "";
        if (Math.random() > 0.7) el.classList.add("shape-tri");
        el.style.left = cx + "px";
        el.style.top = cy + "px";
        const angle = rand(0, Math.PI * 2);
        const dist = rand(80, 300);
        el.style.setProperty("--tx", (Math.cos(angle) * dist) + "px");
        el.style.setProperty("--ty", (Math.sin(angle) * dist - rand(30, 100)) + "px");
        el.style.setProperty("--rot", rand(180, 720) + "deg");
        el.style.setProperty("--dur", rand(1.5, 2.8) + "s");
        el.style.setProperty("--delay", rand(0, 0.2) + "s");
        layer.appendChild(el);
        requestAnimationFrame(() => el.classList.add("fire"));
      }
      setTimeout(() => { layer.innerHTML = ""; }, 3500);
    }
  </script>
</body>

</html>
