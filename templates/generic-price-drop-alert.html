<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Price Drop Alert</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&display=swap');
  *{margin:0;padding:0;box-sizing:border-box}
  :root{
    --bg:#0D0F14;--card:#161A22;--card2:#1D222C;
    --border:rgba(255,255,255,0.06);
    --green:#22C55E;--green-glow:rgba(34,197,94,0.12);
    --red:#EF4444;--red-dim:rgba(239,68,68,0.5);
    --blue:#3B82F6;
    --text:#EAEAEA;--muted:rgba(255,255,255,0.4);
  }
  body{
    font-family:'DM Sans',sans-serif;background:var(--bg);
    color:var(--text);max-width:390px;margin:0 auto;
    min-height:100vh;display:flex;flex-direction:column;
    align-items:center;justify-content:flex-end;
    overflow:hidden;
  }

  /* Bottom sheet */
  .sheet{
    width:100%;background:var(--card);
    border-radius:20px 20px 0 0;border:1px solid var(--border);
    border-bottom:none;overflow:hidden;
    animation:slideUp 0.45s cubic-bezier(0.34,1.56,0.64,1) both;
  }
  @keyframes slideUp{0%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}

  .sheet-handle{width:36px;height:4px;background:rgba(255,255,255,0.1);border-radius:2px;margin:10px auto}

  /* Alert badge */
  .alert-badge{
    display:inline-flex;align-items:center;gap:6px;
    padding:6px 12px;border-radius:20px;
    background:var(--green-glow);border:1px solid rgba(34,197,94,0.15);
    font-size:11px;font-weight:600;color:var(--green);
    margin:4px 20px 14px;
  }
  .badge-dot{
    width:6px;height:6px;border-radius:50%;background:var(--green);
    animation:pulse 1.5s ease infinite;
  }
  @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}

  /* Product card */
  .product-card{
    display:flex;gap:14px;padding:16px;margin:0 16px;
    background:var(--card2);border:1px solid var(--border);
    border-radius:14px;
  }
  .product-thumb{
    width:80px;height:80px;border-radius:12px;
    display:flex;align-items:center;justify-content:center;
    font-size:36px;flex-shrink:0;position:relative;
    background:linear-gradient(135deg,rgba(34,197,94,0.08),rgba(34,197,94,0.02));
  }
  .product-body{flex:1;min-width:0;display:flex;flex-direction:column;justify-content:center}
  .product-cat{font-size:10px;font-weight:600;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
  .product-name{
    font-size:15px;font-weight:700;color:#fff;margin-bottom:8px;
    white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  }

  /* Price comparison */
  .price-compare{display:flex;align-items:center;gap:10px}
  .price-old{
    font-size:14px;color:var(--red-dim);text-decoration:line-through;
    font-weight:500;position:relative;
  }
  .price-arrow{color:var(--green);font-size:14px;font-weight:700}
  .price-new{font-size:18px;font-weight:800;color:var(--green)}

  /* Savings banner */
  .savings-banner{
    display:flex;align-items:center;justify-content:space-between;
    margin:12px 16px;padding:14px 16px;
    background:var(--green-glow);border:1px solid rgba(34,197,94,0.1);
    border-radius:12px;
  }
  .savings-left{display:flex;align-items:center;gap:8px}
  .savings-emoji{font-size:20px}
  .savings-label{font-size:13px;font-weight:600;color:var(--green)}
  .savings-amount{
    font-size:18px;font-weight:800;color:var(--green);
  }

  /* Urgency row */
  .urgency-row{
    display:flex;align-items:center;justify-content:center;gap:6px;
    padding:10px;font-size:12px;color:var(--muted);
  }
  .urgency-icon{font-size:14px}

  /* Watchers */
  .watchers{
    display:flex;align-items:center;justify-content:center;gap:8px;
    padding:0 16px 8px;font-size:11px;color:var(--muted);
  }
  .watcher-avatars{display:flex}
  .watcher-dot{
    width:20px;height:20px;border-radius:50%;
    border:2px solid var(--card);margin-left:-6px;
    font-size:8px;display:flex;align-items:center;justify-content:center;
    font-weight:700;
  }
  .w1{background:#6366F1;color:#fff}
  .w2{background:#EC4899;color:#fff}
  .w3{background:#F59E0B;color:#fff}

  /* CTAs */
  .cta-area{padding:12px 16px 24px;display:flex;flex-direction:column;gap:8px}
  .btn-primary{
    width:100%;padding:16px;border:none;border-radius:14px;
    background:var(--green);color:#fff;font-family:'DM Sans',sans-serif;
    font-size:15px;font-weight:700;cursor:pointer;transition:all 0.2s;
  }
  .btn-primary:active{transform:scale(0.97)}
  .btn-row{display:flex;gap:8px}
  .btn-half{
    flex:1;padding:12px;border:none;border-radius:12px;
    background:var(--card2);border:1px solid var(--border);
    color:var(--text);font-family:'DM Sans',sans-serif;
    font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;
  }
  .btn-half:active{transform:scale(0.96);background:rgba(255,255,255,0.06)}
  .btn-dismiss{
    width:100%;padding:10px;border:none;background:transparent;
    color:var(--muted);font-family:'DM Sans',sans-serif;font-size:12px;cursor:pointer;
  }
</style>
</head>
<body>

<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // CONFIG
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const CONFIG = {
    includeDismissButton: true,

    brand: {
      name: "ShopApp",
    },

    product: {
      name: "Sony WH-1000XM5",
      category: "Audio",
      emoji: "ðŸŽ§",
      oldPrice: "RM 1,599",
      newPrice: "RM 1,199",
      savings: "RM 400",
      savingsPercent: "25% off",
      productUrl: "app://product/sony-wh1000xm5?ref=price_drop",
    },

    messaging: {
      alertText: "Price drop on your wishlist",
      urgencyText: "Sale ends in 2 days",
      watcherCount: "24 others watching this item",
      ctaText: "Buy Now at New Price",
      wishlistText: "Keep on Wishlist",
      shareText: "Share Deal",
      dismissText: "Not interested",
    },

    tracking: {
      eventPrefix: "PriceDrop",
    },
  };
</script>

<div class="sheet">
  <div class="sheet-handle"></div>

  <div class="alert-badge">
    <div class="badge-dot"></div>
    <span id="alertText"></span>
  </div>

  <!-- Product -->
  <div class="product-card">
    <div class="product-thumb" id="productThumb"></div>
    <div class="product-body">
      <div class="product-cat" id="productCat"></div>
      <div class="product-name" id="productName"></div>
      <div class="price-compare">
        <span class="price-old" id="oldPrice"></span>
        <span class="price-arrow">â†’</span>
        <span class="price-new" id="newPrice"></span>
      </div>
    </div>
  </div>

  <!-- Savings -->
  <div class="savings-banner">
    <div class="savings-left">
      <span class="savings-emoji">ðŸ’°</span>
      <span class="savings-label" id="savingsLabel"></span>
    </div>
    <div class="savings-amount" id="savingsAmount"></div>
  </div>

  <!-- Urgency -->
  <div class="urgency-row">
    <span class="urgency-icon">â°</span>
    <span id="urgencyText"></span>
  </div>

  <!-- Watchers -->
  <div class="watchers">
    <div class="watcher-avatars">
      <div class="watcher-dot w1">A</div>
      <div class="watcher-dot w2">K</div>
      <div class="watcher-dot w3">R</div>
    </div>
    <span id="watcherCount"></span>
  </div>

  <!-- CTAs -->
  <div class="cta-area">
    <button class="btn-primary" id="btnBuy" onclick="buyNow()"></button>
    <div class="btn-row">
      <button class="btn-half" id="btnWishlist" onclick="keepWishlist()"></button>
      <button class="btn-half" id="btnShare" onclick="shareDeal()"></button>
    </div>
    <button class="btn-dismiss" id="btnDismiss" onclick="notInterested()"></button>
  </div>
</div>

<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // INIT
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const { brand, product, messaging, tracking } = CONFIG;

  document.getElementById('alertText').textContent = messaging.alertText;
  document.getElementById('productThumb').textContent = product.emoji;
  document.getElementById('productCat').textContent = product.category;
  document.getElementById('productName').textContent = product.name;
  document.getElementById('oldPrice').textContent = product.oldPrice;
  document.getElementById('newPrice').textContent = product.newPrice;
  document.getElementById('savingsLabel').textContent = 'You save ' + product.savingsPercent;
  document.getElementById('savingsAmount').textContent = product.savings;
  document.getElementById('urgencyText').textContent = messaging.urgencyText;
  document.getElementById('watcherCount').textContent = messaging.watcherCount;
  document.getElementById('btnBuy').textContent = messaging.ctaText;
  document.getElementById('btnWishlist').textContent = 'â¤ï¸ ' + messaging.wishlistText;
  document.getElementById('btnShare').textContent = 'ðŸ“¤ ' + messaging.shareText;
  document.getElementById('btnDismiss').textContent = messaging.dismissText;

  trackEvent(tracking.eventPrefix + '_Viewed', {
    product: product.name,
    old_price: product.oldPrice,
    new_price: product.newPrice,
    savings: product.savings
  });

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ACTIONS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function buyNow() {
    trackEvent(tracking.eventPrefix + '_BuyNow_Clicked', { product: product.name, price: product.newPrice });
    if (product.productUrl) window.location.href = product.productUrl;
  }

  function keepWishlist() {
    trackEvent(tracking.eventPrefix + '_KeepWishlist', { product: product.name });
    try { window.location.href = 'wzrk://exit'; } catch(e) {}
  }

  function shareDeal() {
    trackEvent(tracking.eventPrefix + '_SharedDeal', { product: product.name });
    if (navigator.share) {
      navigator.share({
        title: product.name + ' - ' + product.savingsPercent + ' OFF!',
        text: product.name + ' dropped from ' + product.oldPrice + ' to ' + product.newPrice + '!'
      });
    }
  }

  function notInterested() {
    trackEvent(tracking.eventPrefix + '_NotInterested', { product: product.name });
    try { window.location.href = 'wzrk://exit'; } catch(e) {}
  }

  function trackEvent(name, props) {
    console.log('CT Event:', name, props || {});
    if (window.CleverTap) window.CleverTap.pushEvent(name, props || {});
    if (window.clevertap) window.clevertap.event.push(name, props || {});
    try { window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({ event: name, properties: props || {} })); } catch(e) {}
  }
</script>
</body>
</html>
