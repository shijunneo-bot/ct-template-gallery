<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>eatigo × Mid-Autumn Diner Spirit</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600&family=DM+Sans:wght@400;500;600;700;800&display=swap');
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--serif:'Cormorant Garamond',Georgia,serif;--sans:'DM Sans',-apple-system,sans-serif;--accent:#E8453C;--np:#FF6EC7;--ng:#FFD54F;--space:#06091E}
html,body{height:100%;overflow:hidden}
body{font-family:var(--sans);background:#000;display:flex;justify-content:center;align-items:flex-start;padding:6px;-webkit-tap-highlight-color:transparent;touch-action:manipulation}
.M{width:100%;max-width:400px;height:94vh;max-height:760px;border-radius:20px;position:relative;overflow:hidden;box-shadow:0 8px 60px rgba(0,0,0,.7);background:var(--space)}
.X{position:absolute;top:10px;right:10px;width:30px;height:30px;border-radius:50%;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.04);cursor:pointer;color:rgba(255,255,255,.3);font-size:13px;display:flex;align-items:center;justify-content:center;z-index:50;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
.X:active{background:rgba(255,255,255,.12)}
.grain{position:absolute;inset:0;pointer-events:none;z-index:1;opacity:.02;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E")}
/* Flash overlay for dramatic impacts */
.flash{position:absolute;inset:0;z-index:40;pointer-events:none;opacity:0}
.flash.gold{animation:flashGold .6s ease both}
@keyframes flashGold{0%{opacity:.8;background:rgba(255,213,79,.6)}20%{opacity:.5;background:rgba(255,213,79,.3)}100%{opacity:0}}
.flash.pink{animation:flashPink .6s ease both}
@keyframes flashPink{0%{opacity:.6;background:rgba(255,110,199,.4)}100%{opacity:0}}
/* Screen shake for impact scenes */
.M.shake{animation:screenShake .5s ease both}
@keyframes screenShake{0%{transform:translate(0)}10%{transform:translate(-6px,3px)}20%{transform:translate(5px,-4px)}30%{transform:translate(-4px,2px)}40%{transform:translate(3px,-2px)}50%{transform:translate(-2px,1px)}60%{transform:translate(1px,-1px)}100%{transform:translate(0)}}
/* Particles */
.ptc{position:absolute;inset:0;pointer-events:none;overflow:hidden;z-index:0}
.pt{position:absolute;opacity:0;animation:pF ease-in-out infinite;will-change:transform,opacity}
@keyframes pF{0%{transform:translateY(0) rotate(0) scale(.8);opacity:0}10%{opacity:.5}50%{opacity:.35}90%{opacity:.1}100%{transform:translateY(-105vh) rotate(180deg) scale(1.05);opacity:0}}
.S{position:absolute;inset:0;display:flex;flex-direction:column;opacity:0;pointer-events:none;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;scrollbar-width:none;will-change:transform,opacity,clip-path}
.S::-webkit-scrollbar{display:none}
.S.on{pointer-events:auto;opacity:1}
/* ─── 8 UNIQUE ENTRANCES — CINEMATIC ─── */
.S.e-portal{animation:ePortal 1.1s cubic-bezier(.22,1,.36,1) both}
@keyframes ePortal{0%{clip-path:circle(0% at 50% 45%);opacity:0}25%{opacity:1}100%{clip-path:circle(100% at 50% 45%);opacity:1}}
.S.e-walk{animation:eWalk .9s cubic-bezier(.22,1,.36,1) both}
@keyframes eWalk{0%{transform:translateX(100%);opacity:0}25%{opacity:1}100%{transform:none;opacity:1}}
.S.e-curtain{animation:eCurtain .95s cubic-bezier(.22,1,.36,1) both}
@keyframes eCurtain{0%{clip-path:inset(100% 0 0 0);opacity:0}25%{opacity:1}100%{clip-path:inset(0);opacity:1}}
.S.e-impact{animation:eImpact .8s ease-out both}
@keyframes eImpact{0%{transform:scale(1.3);opacity:0;filter:brightness(3) saturate(0)}15%{opacity:1;filter:brightness(2) saturate(.5)}40%{transform:scale(.97);filter:brightness(1.15) saturate(1)}100%{transform:none;opacity:1;filter:brightness(1)}}
.S.e-drift{animation:eDrift 1.1s cubic-bezier(.22,1,.36,1) both}
@keyframes eDrift{0%{transform:translateY(20px);opacity:0;filter:blur(6px)}100%{transform:none;opacity:1;filter:blur(0)}}
.S.e-spot{animation:eSpot 1.05s cubic-bezier(.22,1,.36,1) both}
@keyframes eSpot{0%{clip-path:circle(2% at 50% 25%);opacity:0}20%{opacity:1}100%{clip-path:circle(100% at 50% 25%);opacity:1}}
.S.e-doors{animation:eDoors 1s cubic-bezier(.22,1,.36,1) both}
@keyframes eDoors{0%{clip-path:inset(0 50%);opacity:0;filter:brightness(1.3)}20%{opacity:1}100%{clip-path:inset(0);opacity:1;filter:brightness(1)}}
.S.e-ascend{animation:eAscend 1.15s cubic-bezier(.22,1,.36,1) both}
@keyframes eAscend{0%{transform:translateY(80px);opacity:0;filter:blur(5px) brightness(1.15)}100%{transform:none;opacity:1;filter:blur(0) brightness(1)}}
/* Question phase transitions — each question has its own personality */
.S.e-rise{animation:eRise .9s cubic-bezier(.22,1,.36,1) both}
@keyframes eRise{0%{transform:translateY(45px);opacity:0;filter:blur(5px)}35%{filter:blur(1px)}100%{transform:none;opacity:1;filter:blur(0)}}
.S.e-dissolve{animation:eDissolve 1.1s cubic-bezier(.22,1,.36,1) both}
@keyframes eDissolve{0%{opacity:0;filter:blur(10px) brightness(1.2)}35%{filter:blur(3px) brightness(1.05)}100%{opacity:1;filter:blur(0) brightness(1)}}
.S.e-slideLeft{animation:eSlideLeft .9s cubic-bezier(.22,1,.36,1) both}
@keyframes eSlideLeft{0%{transform:translateX(65px);opacity:0;filter:blur(4px)}35%{filter:blur(1px)}100%{transform:none;opacity:1;filter:blur(0)}}
.S.e-breatheIn{animation:eBreatheIn 1.2s cubic-bezier(.22,1,.36,1) both}
@keyframes eBreatheIn{0%{transform:scale(.9);opacity:0;filter:blur(8px) brightness(.8)}40%{filter:blur(2px) brightness(.95)}100%{transform:none;opacity:1;filter:blur(0) brightness(1)}}
.S.e-petalFall{animation:ePetalFall 1s cubic-bezier(.22,1,.36,1) both}
@keyframes ePetalFall{0%{transform:translateY(-40px) rotate(-1.5deg);opacity:0;filter:blur(4px)}35%{filter:blur(1px)}100%{transform:none;opacity:1;filter:blur(0)}}
.S.e-zoomIn{animation:eZoomIn 1s cubic-bezier(.22,1,.36,1) both}
@keyframes eZoomIn{0%{transform:scale(.65);opacity:0;filter:blur(10px)}30%{filter:blur(3px)}100%{transform:none;opacity:1;filter:blur(0)}}
.S.e-fallDown{animation:eFallDown .9s cubic-bezier(.22,1,.36,1) both}
@keyframes eFallDown{0%{transform:translateY(-60px);opacity:0;filter:blur(4px)}30%{opacity:1}70%{transform:translateY(6px)}100%{transform:none;opacity:1;filter:blur(0)}}
.S.e-riseUp{animation:eRiseUp 1.05s cubic-bezier(.22,1,.36,1) both}
@keyframes eRiseUp{0%{transform:translateY(70px);opacity:0;filter:blur(6px) brightness(1.2)}30%{filter:blur(2px) brightness(1.08)}100%{transform:none;opacity:1;filter:blur(0) brightness(1)}}
/* Exits — varied per context */
.S.exit{animation:scExitUp .55s cubic-bezier(.4,0,1,1) both!important;pointer-events:none!important}
@keyframes scExitUp{0%{opacity:1;filter:blur(0)}50%{opacity:.25}100%{opacity:0;transform:translateY(-14px);filter:blur(5px)}}
.S.exit-dissolve{animation:scExitDissolve .6s ease-out both!important;pointer-events:none!important}
@keyframes scExitDissolve{0%{opacity:1;filter:blur(0)}50%{opacity:.2}100%{opacity:0;filter:blur(10px)}}
.S.exit-left{animation:scExitLeft .5s cubic-bezier(.4,0,1,1) both!important;pointer-events:none!important}
@keyframes scExitLeft{0%{opacity:1;transform:none}100%{opacity:0;transform:translateX(-40px);filter:blur(3px)}}
.S.exit-down{animation:scExitDown .5s cubic-bezier(.4,0,1,1) both!important;pointer-events:none!important}
@keyframes scExitDown{0%{opacity:1;filter:blur(0)}100%{opacity:0;transform:translateY(20px);filter:blur(4px)}}
/* Porcelain shatter — Scene IV only */
.shatter-ovl{position:absolute;inset:0;z-index:4;pointer-events:none;display:flex;align-items:center;justify-content:center;opacity:0}
.shatter-ovl svg{width:200px;height:300px}
.shatter-ovl.show{animation:shatterIn .15s ease-out both}
@keyframes shatterIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
.shatter-ovl.show .sh-crack{stroke-dasharray:40;stroke-dashoffset:40;animation:crackDraw .3s .05s ease-out both}
@keyframes crackDraw{to{stroke-dashoffset:0}}
.shatter-ovl.show .sh-s1{animation:shardFly1 .7s .1s ease-out both}
.shatter-ovl.show .sh-s2{animation:shardFly2 .65s .12s ease-out both}
.shatter-ovl.show .sh-s3{animation:shardFly3 .6s .15s ease-out both}
.shatter-ovl.show .sh-s4{animation:shardFly4 .7s .13s ease-out both}
.shatter-ovl.show .sh-s5{animation:shardFly5 .55s .18s ease-out both}
@keyframes shardFly1{0%{transform:none;opacity:1}100%{transform:translate(-30px,-25px) rotate(-35deg);opacity:0}}
@keyframes shardFly2{0%{transform:none;opacity:1}100%{transform:translate(28px,-22px) rotate(40deg);opacity:0}}
@keyframes shardFly3{0%{transform:none;opacity:1}100%{transform:translate(-20px,18px) rotate(-25deg);opacity:0}}
@keyframes shardFly4{0%{transform:none;opacity:1}100%{transform:translate(25px,15px) rotate(30deg);opacity:0}}
@keyframes shardFly5{0%{transform:none;opacity:1}100%{transform:translate(2px,28px) rotate(10deg);opacity:0}}
.shatter-ovl.show .sh-dust{animation:dustRing .8s .08s ease-out both}
@keyframes dustRing{0%{rx:8;ry:3;opacity:.1}50%{opacity:.12}100%{rx:45;ry:12;opacity:0}}
.shatter-ovl.show .sh-bowl{animation:bowlFade .5s .4s ease-out both}
@keyframes bowlFade{to{opacity:.03}}
.prog{display:flex;gap:4px;padding:14px 20px 0;position:relative;z-index:2}
.pd{flex:1;height:2.5px;border-radius:2px;background:rgba(255,255,255,.06);overflow:hidden;position:relative}
.pd.lit::after{content:'';position:absolute;inset:0;border-radius:2px;background:linear-gradient(90deg,rgba(255,255,255,.4),rgba(255,255,255,.2) 85%,rgba(255,255,255,.6));animation:pS .6s cubic-bezier(.22,1,.36,1) both;box-shadow:2px 0 8px rgba(255,255,255,.15)}
@keyframes pS{from{transform:scaleX(0);transform-origin:left}to{transform:scaleX(1);transform-origin:left}}
.cov{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px 20px;position:relative;z-index:2}
.cb{font-family:var(--sans);font-size:10px;font-weight:700;color:var(--accent);letter-spacing:2.5px;text-transform:uppercase;margin-bottom:20px;opacity:0;animation:fU .8s .2s ease both}
.ms{position:relative;width:130px;height:130px;margin:0 auto 20px;opacity:0;animation:fU .8s .5s ease both}
.mn{width:130px;height:130px;border-radius:50%;background:radial-gradient(circle at 38% 32%,#FFF8E1,#FFD54F 35%,#F9A825 65%,#E65100);box-shadow:0 0 50px rgba(255,213,79,.25),0 0 100px rgba(255,213,79,.08);animation:mG 6s ease-in-out infinite}
@keyframes mG{0%,100%{box-shadow:0 0 50px rgba(255,213,79,.25),0 0 100px rgba(255,213,79,.08)}50%{box-shadow:0 0 65px rgba(255,213,79,.35),0 0 130px rgba(255,213,79,.12)}}
.cr{position:absolute;border-radius:50%;background:rgba(0,0,0,.07)}.c1{width:22px;height:22px;top:22px;left:28px}.c2{width:15px;height:15px;top:52px;left:72px}.c3{width:11px;height:11px;top:78px;left:38px}
.orb{position:absolute;inset:-15px;animation:orb 14s linear infinite}@keyframes orb{to{transform:rotate(360deg)}}
.ce{position:absolute;top:0;left:50%;transform:translateX(-50%);font-size:16px;filter:drop-shadow(0 0 8px rgba(255,110,199,.5))}
.sa{position:absolute;top:3px;left:calc(50% + 12px);width:28px;height:1.5px;background:linear-gradient(90deg,rgba(255,110,199,.5),transparent);border-radius:1px;animation:sW 2.5s ease-in-out infinite;transform-origin:left}
@keyframes sW{0%,100%{transform:rotate(-12deg) scaleX(1)}50%{transform:rotate(18deg) scaleX(1.4)}}
.ct{font-family:var(--serif);font-size:36px;font-weight:700;color:#FFF;text-align:center;line-height:1.12;margin-bottom:8px;opacity:0;animation:fU .8s .7s ease both}
.gl{background:linear-gradient(135deg,var(--np),var(--ng));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.csu{font-family:var(--serif);font-size:14.5px;font-weight:400;font-style:italic;color:rgba(255,255,255,.35);text-align:center;line-height:1.6;max-width:270px;margin:0 auto 28px;opacity:0;animation:fU .8s .9s ease both}
.bs{display:block;width:210px;margin:0 auto;padding:14px;border-radius:50px;border:none;background:linear-gradient(135deg,var(--np),var(--accent));font-family:var(--sans);font-size:13.5px;font-weight:700;color:#FFF;cursor:pointer;letter-spacing:.3px;box-shadow:0 4px 24px rgba(255,110,199,.2);opacity:0;animation:fU .8s 1.1s ease both;position:relative;overflow:hidden}
.bs::after{content:'';position:absolute;top:0;left:-100%;width:60%;height:100%;background:linear-gradient(105deg,transparent 30%,rgba(255,255,255,.25) 50%,transparent 70%);transform:skewX(-20deg);opacity:0;pointer-events:none}
.bs:active{transform:scale(.94)}
.bs.ready{opacity:1;animation:bsPulse 2.5s ease-in-out infinite}
.bs.ready::after{animation:sheenSweep 3.5s 1s ease-in-out infinite}
@keyframes bsPulse{0%,100%{box-shadow:0 4px 24px rgba(255,110,199,.2)}50%{box-shadow:0 4px 36px rgba(255,110,199,.35),0 0 60px rgba(255,110,199,.1)}}
@keyframes sheenSweep{0%,100%{left:-100%;opacity:0}10%{opacity:1}50%{left:150%;opacity:1}51%{opacity:0}}
.cm{display:block;text-align:center;margin-top:12px;font-family:var(--sans);font-size:9.5px;color:rgba(255,255,255,.15);letter-spacing:.5px;opacity:0;animation:fU .8s 1.3s ease both}
@keyframes fU{from{opacity:0;transform:translateY(16px);filter:blur(3px)}to{opacity:1;transform:translateY(0);filter:blur(0)}}
.sf{flex:1;display:flex;flex-direction:column;position:relative;z-index:2;overflow:visible}
.sf-in{flex:1;display:flex;flex-direction:column;padding:0 20px 14px;position:relative}
/* Parallax background layer */
.para{position:absolute;inset:0;z-index:0;pointer-events:none;overflow:hidden}
.para-layer{position:absolute;bottom:0;left:0;right:0;height:50%;opacity:.15}
/* Scene label */
.sl{font-family:var(--sans);font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:2.5px;color:rgba(255,255,255,.12);text-align:center;padding-top:8px;opacity:0;transform:translateY(8px);filter:blur(4px)}
.sl.show{opacity:1;transform:none;filter:blur(0);transition:all .6s cubic-bezier(.22,1,.36,1)}
/* Illustration */
.aw{position:relative;width:100%;height:130px;display:flex;align-items:center;justify-content:center;z-index:2;opacity:0;transform:scale(.3) translateY(30px);filter:blur(6px)}
.aw.show{animation:artPop 1.1s cubic-bezier(.22,1,.36,1) both}
@keyframes artPop{0%{opacity:0;transform:scale(.3) translateY(30px);filter:blur(6px)}100%{opacity:1;transform:none;filter:blur(0)}}
.aw svg{height:115px;width:auto;filter:drop-shadow(0 4px 30px rgba(255,255,255,.1));animation:artFloat 4s 1.5s ease-in-out infinite}
@keyframes artFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
/* Avatar — side profile walking, left of CTA */
.av{position:absolute;z-index:3;opacity:0;filter:drop-shadow(0 0 12px rgba(255,213,79,.2));bottom:10px;left:12px}
.av.av-r{left:auto;right:12px;transform:scaleX(-1)}
.av.av-r.av-float{left:auto;right:12px}
.av.av-r.av-walk-in{left:auto;right:12px}
.av.av-r.av-drop-in{left:auto;right:12px}
.av.av-r.av-enter-r{left:auto;right:12px}
.av svg{height:38px}
.av.av-walk-in{animation:avWI 1s .2s cubic-bezier(.22,1,.36,1) both}
@keyframes avWI{0%{left:-30px;opacity:0}40%{opacity:1}100%{left:12px;opacity:1}}
.av.av-drop-in{animation:avDI .8s .3s cubic-bezier(.22,1,.36,1) both;left:12px}
@keyframes avDI{0%{bottom:-20px;opacity:0}100%{bottom:10px;opacity:1}}
.av.av-float{animation:avFl .9s .4s ease both;left:12px}
@keyframes avFl{0%{opacity:0;transform:scale(.7)}60%{transform:scale(1.05)}100%{opacity:1;transform:scale(1)}}
.av.av-enter-r{right:12px;left:auto;animation:avER 1s .2s cubic-bezier(.22,1,.36,1) both}
@keyframes avER{0%{right:-30px;opacity:0}40%{opacity:1}100%{right:12px;opacity:1}}
/* Narration */
.nar{font-family:var(--serif);font-size:15.5px;font-weight:400;color:rgba(255,255,255,.5);text-align:center;line-height:1.7;max-width:310px;margin:0 auto;padding:4px 0 8px;position:relative;z-index:2}
.nar em{color:rgba(255,255,255,.9);font-style:italic;font-weight:600;animation:emGlow 3s ease-in-out infinite}
@keyframes emGlow{0%,100%{text-shadow:none}50%{text-shadow:0 0 12px rgba(255,255,255,.15)}}
.nl{display:block;opacity:0;transform:translateY(14px);filter:blur(3px);transition:opacity .7s cubic-bezier(.22,1,.36,1),transform .7s cubic-bezier(.22,1,.36,1),filter .6s ease}
.nl.show{opacity:1;transform:none;filter:blur(0)}
/* Continue button */
.bc{display:block;width:200px;margin:auto auto 14px;padding:12px;border-radius:50px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);font-family:var(--serif);font-size:14px;font-weight:600;font-style:italic;color:rgba(255,255,255,.55);cursor:pointer;text-align:center;opacity:0;transform:translateY(14px);filter:blur(2px);transition:all .6s cubic-bezier(.22,1,.36,1);letter-spacing:.3px;position:relative;overflow:hidden}
.bc.show{opacity:1;transform:none;filter:blur(0);animation:bcShimmer 3s 1.5s ease-in-out infinite}
@keyframes bcShimmer{0%,100%{border-color:rgba(255,255,255,.08)}50%{border-color:rgba(255,255,255,.2);box-shadow:0 0 20px rgba(255,255,255,.04)}}
.bc:active{transform:scale(.94)!important;background:rgba(255,255,255,.1);border-color:rgba(255,255,255,.2)}
/* Story bottom scene illustration */
.si{position:relative;width:100%;height:70px;margin-top:auto;opacity:0;transform:translateY(12px);filter:blur(2px);transition:opacity .9s cubic-bezier(.22,1,.36,1),transform .9s cubic-bezier(.22,1,.36,1),filter .7s ease;overflow:visible;z-index:2}
.si.show{opacity:1;transform:none;filter:blur(0)}
.si svg{width:100%;height:70px;overflow:visible}
.qf{flex:1;display:flex;flex-direction:column;justify-content:center;padding:0 20px 16px;position:relative;z-index:2}
.qov{position:absolute;inset:0;z-index:0;pointer-events:none;overflow:hidden;opacity:0;transition:opacity 1.4s cubic-bezier(.22,1,.36,1)}
.qov.show{opacity:1}
.qov svg{position:absolute;inset:0;width:100%;height:100%}
/* Door transition overlay for Scene VII */
.door-trans{position:absolute;inset:0;z-index:10;display:flex;align-items:center;justify-content:center;background:linear-gradient(170deg,#1A0A2E,#2D1545);opacity:0;transition:opacity .4s ease;pointer-events:none}
.door-trans.show{opacity:1}
.door-trans.fade{opacity:0;transition:opacity .6s ease}
.door-trans svg{width:160px;height:280px;filter:drop-shadow(0 0 30px rgba(233,213,255,.15))}
.door-trans .dt-label{position:absolute;bottom:18%;font-family:var(--serif);font-size:13px;color:rgba(255,255,255,.3);letter-spacing:1px;animation:dtPulse 1.5s ease infinite}
@keyframes dtPulse{0%,100%{opacity:.3}50%{opacity:.6}}
.qp{font-family:var(--serif);font-size:23px;font-weight:700;color:rgba(255,255,255,.95);text-align:center;line-height:1.3;max-width:300px;margin:0 auto;padding:0 0 6px;opacity:0;transform:translateY(20px);filter:blur(5px)}
.qp.show{animation:qpIn .9s cubic-bezier(.22,1,.36,1) both}
@keyframes qpIn{0%{opacity:0;transform:translateY(20px);filter:blur(5px)}50%{filter:blur(1px)}100%{opacity:1;transform:none;filter:blur(0)}}
.q-sub{font-family:var(--serif);font-size:11px;font-style:italic;color:rgba(255,255,255,.18);text-align:center;margin-bottom:16px;opacity:0;transform:translateY(8px);filter:blur(2px)}
.q-sub.show{animation:qsIn .5s .1s cubic-bezier(.22,1,.36,1) both}
@keyframes qsIn{from{opacity:0;transform:translateY(8px);filter:blur(2px)}to{opacity:1;transform:none;filter:blur(0)}}
.chs{display:flex;flex-direction:column;gap:7px}
.ch{display:flex;align-items:center;gap:11px;padding:13px 14px;border-radius:14px;background:rgba(255,255,255,.025);border:1px solid rgba(255,255,255,.05);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);cursor:pointer;font-family:var(--serif);font-size:14.5px;font-weight:500;color:rgba(255,255,255,.7);text-align:left;line-height:1.3;opacity:0;transform:translateY(22px);filter:blur(2px);transition:opacity .6s cubic-bezier(.22,1,.36,1),transform .6s cubic-bezier(.22,1,.36,1),filter .5s ease,border-color .3s ease,background .3s ease,box-shadow .3s ease;will-change:transform,opacity,filter}
.ch.show{opacity:1;transform:none;filter:blur(0)}
/* Per-question choice entrance variants */
.ch.ch-left{transform:translateX(-30px);filter:blur(2px)}
.ch.ch-left.show{transform:none;filter:blur(0)}
.ch.ch-right{transform:translateX(30px);filter:blur(2px)}
.ch.ch-right.show{transform:none;filter:blur(0)}
.ch.ch-scale{transform:scale(.88);filter:blur(3px)}
.ch.ch-scale.show{transform:none;filter:blur(0)}
.ch:active{transform:scale(.96)!important;background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.15)}
.ch.chosen{border-color:rgba(255,213,79,.4)!important;background:rgba(255,213,79,.08)!important;box-shadow:0 0 24px rgba(255,213,79,.1);transform:scale(1.02)!important;transition:all .35s cubic-bezier(.22,1,.36,1)}
.ch.chosen .ca{color:rgba(255,213,79,.5)}
.ch.unchosen{opacity:.12!important;transform:scale(.96) translateX(-4px)!important;filter:blur(1.5px);pointer-events:none;transition:all .4s cubic-bezier(.4,0,1,1)}
.ch .ci{font-size:18px;flex-shrink:0;width:28px;text-align:center}
.ch .cx{flex:1}
.ch .ca{color:rgba(255,255,255,.1);font-size:11px;flex-shrink:0;font-family:var(--sans)}
.door-wrap{position:absolute;inset:0;z-index:3;display:flex;overflow:hidden}
.door-l,.door-r{flex:1;position:relative;background:linear-gradient(135deg,#1a0e00,#2a1a06);border:1px solid rgba(255,213,79,.15)}
.door-l{border-right:none;transform-origin:left center}
.door-r{border-left:none;transform-origin:right center}
.door-l::before,.door-r::before{content:'';position:absolute;top:15%;width:60%;height:70%;border:1.5px solid rgba(255,213,79,.2);border-radius:4px}
.door-l::before{right:18%}
.door-r::before{left:18%}
.door-l::after,.door-r::after{content:'';position:absolute;top:50%;width:8px;height:8px;border-radius:50%;background:rgba(255,213,79,.4);border:1px solid rgba(255,213,79,.5);transform:translateY(-50%)}
.door-l::after{right:8%}
.door-r::after{left:8%}
/* Chinese lattice pattern on doors */
.door-pat{position:absolute;top:20%;width:50%;height:60%;opacity:.12}
.door-l .door-pat{right:22%}
.door-r .door-pat{left:22%}
.door-light{position:absolute;top:0;left:50%;width:0;height:100%;background:radial-gradient(ellipse at center,rgba(255,213,79,.5),rgba(255,213,79,.15) 40%,transparent 70%);transform:translateX(-50%);z-index:0}
/* Door animations */
.doors-opening .door-l{animation:doorL 1.4s .3s cubic-bezier(.4,0,.2,1) both}
.doors-opening .door-r{animation:doorR 1.4s .3s cubic-bezier(.4,0,.2,1) both}
.doors-opening .door-light{animation:doorGlow 1.8s ease both}
@keyframes doorL{0%{transform:perspective(800px) rotateY(0)}100%{transform:perspective(800px) rotateY(-105deg)}}
@keyframes doorR{0%{transform:perspective(800px) rotateY(0)}100%{transform:perspective(800px) rotateY(105deg)}}
@keyframes doorGlow{0%{width:0;opacity:0}30%{width:15%;opacity:1}100%{width:300%;opacity:1}}
/* Big stars for door scene */
.door-star{position:absolute;color:rgba(255,213,79,.6);z-index:1;opacity:0;font-size:28px}
.doors-opening .door-star{animation:dStar .8s ease both}
@keyframes dStar{from{opacity:0;transform:scale(0) rotate(-30deg)}to{opacity:1;transform:scale(1) rotate(0)}}
.rv{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;position:relative;z-index:2}
.rv-ball{position:relative;width:120px;height:120px;margin-bottom:20px}
.rv-globe{width:120px;height:120px;border-radius:50%;background:radial-gradient(circle at 35% 30%,rgba(233,213,255,.25),rgba(139,92,246,.15) 40%,rgba(88,28,135,.2) 70%,rgba(30,10,60,.3));border:1.5px solid rgba(233,213,255,.2);box-shadow:0 0 50px rgba(139,92,246,.2),0 0 100px rgba(139,92,246,.08),inset 0 -20px 40px rgba(0,0,0,.3);animation:ballFloat 3s ease-in-out infinite}
@keyframes ballFloat{0%,100%{transform:translateY(0);box-shadow:0 0 50px rgba(139,92,246,.2),0 0 100px rgba(139,92,246,.08)}50%{transform:translateY(-8px);box-shadow:0 0 70px rgba(139,92,246,.3),0 0 130px rgba(139,92,246,.12)}}
.rv-swirl{position:absolute;inset:8px;border-radius:50%;overflow:hidden;opacity:.4}
.rv-swirl::before{content:'';position:absolute;inset:-50%;background:conic-gradient(transparent,rgba(233,213,255,.3),transparent,rgba(139,92,246,.2),transparent);animation:swirl 4s linear infinite}
@keyframes swirl{to{transform:rotate(360deg)}}
.rv-high{position:absolute;top:18px;left:28px;width:20px;height:12px;border-radius:50%;background:rgba(255,255,255,.2);transform:rotate(-25deg)}
.rv-base{width:60px;height:8px;border-radius:0 0 30px 30px;background:linear-gradient(180deg,rgba(139,92,246,.15),rgba(139,92,246,.05));margin:-2px auto 0;border:1px solid rgba(139,92,246,.1);border-top:none}
/* Big reveal stars */
.rv-stars{position:absolute;inset:0;pointer-events:none;z-index:0}
.rv-star{position:absolute;opacity:0;animation:rvStar ease both}
@keyframes rvStar{0%{opacity:0;transform:scale(0) rotate(-60deg)}50%{opacity:1;transform:scale(1.2) rotate(10deg)}100%{opacity:.8;transform:scale(1) rotate(0)}}
.rv-t{font-family:var(--serif);font-size:17px;font-weight:500;font-style:italic;color:rgba(255,255,255,.35);text-align:center;line-height:1.7;position:relative;z-index:1}
.rv-t span{display:block;opacity:0;animation:rvL .6s ease both}
@keyframes rvL{from{opacity:0;transform:translateY(8px)}to{opacity:1}}
.rp{flex:1;display:flex;flex-direction:column;align-items:center;padding:4px 20px 12px;position:relative;z-index:2}
.r-path{display:flex;justify-content:center;gap:3px;flex-wrap:wrap;padding:6px 0 2px}
.r-st{padding:3px 6px;border-radius:6px;font-size:11px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.04);opacity:0;animation:sP .3s ease both}
@keyframes sP{from{opacity:0;transform:scale(.7)}to{opacity:1;transform:scale(1)}}
.r-ar{color:rgba(255,255,255,.08);font-size:8px;display:flex;align-items:center}
.r-ch{display:flex;justify-content:center;margin:8px 0;height:130px;opacity:0;animation:charPop .8s .15s cubic-bezier(.22,1,.36,1) both}
@keyframes charPop{from{opacity:0;transform:scale(.5) translateY(20px)}60%{transform:scale(1.08) translateY(-4px)}to{opacity:1;transform:none}}
.r-ch svg{height:120px;width:auto;filter:drop-shadow(0 6px 20px rgba(255,255,255,.06))}
.r-nm{font-family:var(--serif);font-size:26px;font-weight:700;text-align:center;line-height:1.15;margin-bottom:6px;opacity:0;animation:fU .6s .4s ease both}
.r-tg{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;margin-bottom:10px;opacity:0;animation:fU .5s .55s ease both}
.r-t{padding:3px 10px;border-radius:14px;font-family:var(--sans);font-size:9.5px;font-weight:700;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06)}
.r-q{font-family:var(--serif);font-size:13.5px;font-weight:400;font-style:italic;color:rgba(255,255,255,.5);text-align:center;line-height:1.55;max-width:300px;margin:0 auto 12px;opacity:0;animation:fU .5s .7s ease both}
.r-q em{color:rgba(255,255,255,.8);font-weight:500}
.r-bx{margin:0 auto 8px;padding:10px 14px;border-radius:12px;width:100%;max-width:310px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);opacity:0;animation:fU .5s .85s ease both}
.r-bl{font-family:var(--sans);font-size:8px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:rgba(255,255,255,.2);margin-bottom:3px}
.r-bt{font-family:var(--serif);font-size:12.5px;color:rgba(255,255,255,.6);line-height:1.45}
.r-cp{display:flex;justify-content:center;gap:28px;margin-bottom:10px;opacity:0;animation:fU .5s .95s ease both}
.r-ci{text-align:center}.r-cl{font-family:var(--sans);font-size:8px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:rgba(255,255,255,.18);margin-bottom:2px}.r-cv{font-family:var(--serif);font-size:11.5px;color:rgba(255,255,255,.5)}
.r-cta{margin:0 auto 8px;padding:10px 14px;border-radius:14px;width:100%;max-width:310px;background:linear-gradient(135deg,rgba(232,69,60,.08),rgba(232,69,60,.03));border:1px solid rgba(232,69,60,.1);text-align:center;opacity:0;animation:fU .5s 1.05s ease both}
.r-of{font-family:var(--sans);font-size:13.5px;font-weight:800;color:#E8453C}
.r-os{font-family:var(--sans);font-size:9.5px;font-weight:500;color:rgba(255,255,255,.35);margin-top:2px}
.bbk{display:block;width:100%;max-width:310px;margin:0 auto 6px;padding:13px;border-radius:14px;border:none;background:linear-gradient(135deg,#E8453C,#C23530);font-family:var(--sans);font-size:13.5px;font-weight:700;color:#FFF;cursor:pointer;box-shadow:0 4px 20px rgba(232,69,60,.2);opacity:0;animation:fU .5s 1.15s ease both}
.bbk:active{transform:scale(.97)}
.r-bs{display:flex;gap:6px;justify-content:center;max-width:310px;width:100%;margin:0 auto 6px;opacity:0;animation:fU .5s 1.25s ease both}
.bsh,.bre{flex:1;padding:9px;border-radius:10px;border:none;font-family:var(--sans);font-size:10.5px;font-weight:700;cursor:pointer}
.bsh{background:rgba(255,255,255,.05);color:rgba(255,255,255,.5);border:1px solid rgba(255,255,255,.06)}
.bre{background:transparent;color:rgba(255,255,255,.25);border:1px solid rgba(255,255,255,.04)}
.ft{text-align:center;font-size:8px;color:rgba(255,255,255,.08);padding:3px 0 1px}
.tst{position:absolute;bottom:4px;left:4px;right:4px;z-index:60;background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.1);border-radius:6px;padding:3px 4px;display:none;flex-wrap:wrap;gap:2px}
.tst.on{display:flex}
.tb{padding:2px 5px;border-radius:3px;border:1px solid rgba(245,158,11,.1);background:rgba(245,158,11,.03);font-family:var(--sans);font-size:7px;font-weight:600;color:#B45309;cursor:pointer}
/* ═══ MUSIC TOGGLE ═══ */
.music-btn{position:absolute;top:10px;right:48px;width:30px;height:30px;border-radius:50%;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.04);cursor:pointer;color:rgba(255,255,255,.3);font-size:14px;display:flex;align-items:center;justify-content:center;z-index:50;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);transition:all .3s ease}
.music-btn:active{background:rgba(255,255,255,.12)}
.music-btn.playing{color:rgba(255,213,79,.7);border-color:rgba(255,213,79,.15);background:rgba(255,213,79,.06);animation:musicPulse 2s ease-in-out infinite}
@keyframes musicPulse{0%,100%{box-shadow:0 0 0 0 rgba(255,213,79,0)}50%{box-shadow:0 0 12px 2px rgba(255,213,79,.15)}}
.music-btn svg{width:14px;height:14px;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
</style>
</head>
<body>
<div class="M" id="modal">
<button class="X" onclick="dismiss()">&#x2715;</button>
<button class="music-btn" id="musicBtn" title="Toggle music" onclick="toggleMusic()">
<svg id="musicOff" viewBox="0 0 24 24"><path d="M11 5L6 9H2v6h4l5 4V5z"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></svg>
<svg id="musicOn" style="display:none" viewBox="0 0 24 24"><path d="M11 5L6 9H2v6h4l5 4V5z"/><path d="M19.07 4.93a10 10 0 010 14.14"/><path d="M15.54 8.46a5 5 0 010 7.07"/></svg>
</button>
<audio id="bgMusic" loop preload="auto">
<source src="song-of-chang-er.mp3" type="audio/mpeg">
</audio>
<div class="grain"></div>
<div class="flash" id="flash"></div>
<div class="ptc" id="pBox"></div>
<!-- COVER -->
<div class="S on e-drift" id="sc-cover" style="background:linear-gradient(170deg,#06091E,#0E1242 50%,#1A0E40)">
<div class="cov">
  <div class="cb">eatigo &times; Mid-Autumn Festival</div>
  <div class="ms"><div class="mn"><div class="cr c1"></div><div class="cr c2"></div><div class="cr c3"></div></div><div class="orb"><div class="ce">&#x1F9DA;&#x200D;&#x2640;&#xFE0F;</div><div class="sa"></div></div></div>
  <div class="ct">What's Your<br><span class="gl">Diner Spirit?</span></div>
  <div class="csu">A mythical journey through the legend of Chang'e to discover how you truly feast</div>
  <button class="bs" onclick="startQuiz()">Enter the Moon Palace</button>
  <span class="cm">8 scenes &middot; 2 minutes &middot; 9 celestial spirits</span>
<span class="cm" style="opacity:.3;font-size:7px">v8.1</span>
</div>
<div class="ft">eatigo &middot; Up to 50% off every restaurant, every day</div>
</div>
<!-- DOOR OPENING -->
<div class="S" id="sc-door" style="background:radial-gradient(ellipse at center,#1a1040,#06091E)">
  <div class="door-wrap" id="doorWrap">
    <div class="door-l"><div class="door-pat"><svg viewBox="0 0 40 60" fill="none" width="100%" height="100%"><line x1="0" y1="0" x2="40" y2="60" stroke="rgba(255,213,79,.3)" stroke-width=".5"/><line x1="40" y1="0" x2="0" y2="60" stroke="rgba(255,213,79,.3)" stroke-width=".5"/><line x1="20" y1="0" x2="20" y2="60" stroke="rgba(255,213,79,.2)" stroke-width=".3"/><line x1="0" y1="30" x2="40" y2="30" stroke="rgba(255,213,79,.2)" stroke-width=".3"/><rect x="5" y="10" width="30" height="40" rx="2" fill="none" stroke="rgba(255,213,79,.15)" stroke-width=".3"/></svg></div></div>
    <div class="door-r"><div class="door-pat"><svg viewBox="0 0 40 60" fill="none" width="100%" height="100%"><line x1="0" y1="0" x2="40" y2="60" stroke="rgba(255,213,79,.3)" stroke-width=".5"/><line x1="40" y1="0" x2="0" y2="60" stroke="rgba(255,213,79,.3)" stroke-width=".5"/><line x1="20" y1="0" x2="20" y2="60" stroke="rgba(255,213,79,.2)" stroke-width=".3"/><line x1="0" y1="30" x2="40" y2="30" stroke="rgba(255,213,79,.2)" stroke-width=".3"/><rect x="5" y="10" width="30" height="40" rx="2" fill="none" stroke="rgba(255,213,79,.15)" stroke-width=".3"/></svg></div></div>
    <div class="door-light"></div>
    <div class="door-star" style="top:20%;left:25%">&#x2726;</div>
    <div class="door-star" style="top:15%;right:20%">&#x2727;</div>
    <div class="door-star" style="top:45%;left:15%">&#x2726;</div>
    <div class="door-star" style="top:50%;right:15%">&#x2727;</div>
    <div class="door-star" style="top:70%;left:30%">&#x2726;</div>
    <div class="door-star" style="top:75%;right:25%">&#x2727;</div>
  </div>
</div>
<!-- 4 BUFFERS: story-a, question-a, story-b, question-b -->
<div class="S" id="sc-sa"><div class="prog" id="pg-sa"></div><div class="sf" id="sf-sa"></div></div>
<div class="S" id="sc-qa"><div class="prog" id="pg-qa"></div><div class="sf" id="sf-qa"></div></div>
<div class="S" id="sc-sb"><div class="prog" id="pg-sb"></div><div class="sf" id="sf-sb"></div></div>
<div class="S" id="sc-qb"><div class="prog" id="pg-qb"></div><div class="sf" id="sf-qb"></div></div>
<!-- REVEAL (fortune ball) -->
<div class="S" id="sc-rv" style="background:linear-gradient(170deg,#06091E,#0E0A30 50%,#1A0E40)">
  <div class="rv">
    <div class="rv-stars" id="rvStars"></div>
    <div class="rv-ball">
      <div class="rv-globe"><div class="rv-swirl"></div><div class="rv-high"></div></div>
      <div class="rv-base"></div>
    </div>
    <div class="rv-t" id="rvT"></div>
  </div>
</div>
<!-- RESULT -->
<div class="S" id="sc-res">
  <div class="prog" id="pg-r"></div>
  <div class="rp">
    <div class="r-path" id="rP"></div>
    <div class="r-ch" id="rCh"></div>
    <div class="r-nm" id="rNm"></div>
    <div class="r-tg" id="rTg"></div>
    <div class="r-q" id="rQ"></div>
    <div class="r-bx"><div class="r-bl">Your ideal feast</div><div class="r-bt" id="rF"></div></div>
    <div class="r-cp"><div class="r-ci"><div class="r-cl">Best match</div><div class="r-cv" id="rMt"></div></div><div class="r-ci"><div class="r-cl">Opposite</div><div class="r-cv" id="rOp"></div></div></div>
    <div class="r-cta"><div class="r-of" id="rOf"></div><div class="r-os" id="rOs"></div></div>
    <button class="bbk" onclick="ctaTap()">Book on eatigo</button>
    <div class="r-bs"><button class="bsh" onclick="shareR()">Share My Spirit</button><button class="bre" onclick="replay()">Play Again</button></div>
    <div class="ft">eatigo &middot; Up to 50% off every restaurant, every day</div>
  </div>
</div>
<div class="tst" id="tst"></div>
</div>
<script>
var AVATAR='<svg viewBox="0 0 50 48" fill="none">'
+'<g opacity=".1"><circle cx="4" cy="10" r="3" fill="rgba(255,213,79,.3)"/><path d="M4 14 L4 28 M4 28 L2 38 M4 28 L6 38" stroke="rgba(255,213,79,.15)" stroke-width=".6" stroke-linecap="round"/></g>'
+'<g opacity=".22"><circle cx="14" cy="10" r="3" fill="rgba(255,213,79,.3)"/><path d="M14 14 L14 28 M14 28 L12 38 M14 28 L16 38" stroke="rgba(255,213,79,.2)" stroke-width=".7" stroke-linecap="round"/></g>'
+'<g>'
+'<animateTransform attributeName="transform" type="translate" values="0,0;0,-2;0,0" dur=".6s" repeatCount="indefinite"/>'
+'<ellipse cx="30" cy="9" rx="5" ry="5.5" fill="rgba(255,213,79,.1)" stroke="rgba(255,213,79,.45)" stroke-width=".9"/>'
+'<circle cx="32" cy="8" r=".9" fill="rgba(255,213,79,.6)"/>'
+'<path d="M26 5 Q28 2 31 4" stroke="rgba(255,213,79,.3)" stroke-width=".6" fill="none"/>'
+'<path d="M30 14.5 L29 29" stroke="rgba(255,213,79,.4)" stroke-width="1.2" stroke-linecap="round"/>'
+'<path d="M29.5 18 Q34 24 36 28" stroke="rgba(255,213,79,.25)" stroke-width=".8" stroke-linecap="round"><animate attributeName="d" values="M29.5 18 Q34 24 36 28;M29.5 18 Q26 24 25 27;M29.5 18 Q34 24 36 28" dur=".6s" repeatCount="indefinite"/></path>'
+'<path d="M29.5 18 Q25 24 23 27" stroke="rgba(255,213,79,.15)" stroke-width=".7" stroke-linecap="round"><animate attributeName="d" values="M29.5 18 Q25 24 23 27;M29.5 18 Q33 23 35 26;M29.5 18 Q25 24 23 27" dur=".6s" repeatCount="indefinite"/></path>'
+'<path d="M29 29 L34 42" stroke="rgba(255,213,79,.3)" stroke-width="1" stroke-linecap="round"><animate attributeName="d" values="M29 29 L34 42;M29 29 L25 42;M29 29 L34 42" dur=".6s" repeatCount="indefinite"/></path>'
+'<path d="M29 29 L24 42" stroke="rgba(255,213,79,.2)" stroke-width=".8" stroke-linecap="round"><animate attributeName="d" values="M29 29 L24 42;M29 29 L33 42;M29 29 L24 42" dur=".6s" repeatCount="indefinite"/></path>'
+'<circle cx="30" cy="22" r="8" fill="rgba(255,213,79,.02)"><animate attributeName="r" values="8;10;8" dur="2s" repeatCount="indefinite"/></circle>'
+'</g></svg>';
var ART=[
'<svg viewBox="0 0 120 100" fill="none"><path d="M30 90 L30 30 Q60 5 90 30 L90 90" stroke="rgba(196,181,253,.4)" stroke-width="2" fill="none"><animate attributeName="stroke-opacity" values=".3;.7;.3" dur="3s" repeatCount="indefinite"/></path><path d="M35 90 L35 33 Q60 12 85 33 L85 90" stroke="rgba(196,181,253,.2)" stroke-width="1" fill="none"/><circle cx="60" cy="20" r="3" fill="#FFD54F" opacity=".8"><animate attributeName="r" values="3;5;3" dur="2s" repeatCount="indefinite"/></circle><circle cx="25" cy="15" r="1" fill="white" opacity=".4"><animate attributeName="opacity" values=".2;.8;.2" dur="2.5s" repeatCount="indefinite"/></circle><circle cx="95" cy="22" r="1.2" fill="white" opacity=".3"><animate attributeName="opacity" values=".2;.7;.2" dur="3s" repeatCount="indefinite"/></circle><circle cx="45" cy="8" r=".8" fill="white" opacity=".5"><animate attributeName="opacity" values=".3;.9;.3" dur="1.8s" repeatCount="indefinite"/></circle><line x1="50" y1="90" x2="50" y2="45" stroke="rgba(255,255,255,.06)" stroke-width=".5"/><line x1="70" y1="90" x2="70" y2="45" stroke="rgba(255,255,255,.06)" stroke-width=".5"/></svg>',
'<svg viewBox="0 0 120 100" fill="none"><rect x="15" y="20" width="6" height="70" rx="3" fill="rgba(196,181,253,.15)"/><rect x="99" y="20" width="6" height="70" rx="3" fill="rgba(196,181,253,.15)"/><rect x="40" y="30" width="4" height="60" rx="2" fill="rgba(196,181,253,.08)"/><rect x="76" y="30" width="4" height="60" rx="2" fill="rgba(196,181,253,.08)"/><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-5;0,0" dur="3s" repeatCount="indefinite"/><rect x="28" y="12" width="8" height="10" rx="4" fill="rgba(255,160,80,.3)" stroke="rgba(255,160,80,.5)" stroke-width=".5"/></g><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-4;0,0" dur="3.5s" repeatCount="indefinite"/><rect x="82" y="15" width="8" height="10" rx="4" fill="rgba(255,160,80,.25)" stroke="rgba(255,160,80,.4)" stroke-width=".5"/></g></svg>',
'<svg viewBox="0 0 120 100" fill="none"><ellipse cx="60" cy="65" rx="32" ry="12" fill="rgba(110,231,183,.08)" stroke="rgba(110,231,183,.3)" stroke-width="1"/><path d="M28 65 Q28 45 60 43 Q92 45 92 65" fill="rgba(110,231,183,.04)" stroke="rgba(110,231,183,.2)" stroke-width=".8"/><g><animate attributeName="opacity" values=".3;.8;.3" dur="1.5s" repeatCount="indefinite"/><path d="M45 43 Q43 28 48 18" stroke="rgba(255,200,100,.4)" stroke-width="2" fill="none" stroke-linecap="round"/><path d="M60 41 Q58 25 62 12" stroke="rgba(255,180,80,.5)" stroke-width="2.5" fill="none" stroke-linecap="round"/><path d="M75 43 Q77 29 72 19" stroke="rgba(255,200,100,.4)" stroke-width="2" fill="none" stroke-linecap="round"/></g><g opacity=".3"><animateTransform attributeName="transform" type="translate" values="0,0;-2,-10;2,-20" dur="4s" repeatCount="indefinite"/><animate attributeName="opacity" values=".3;.1;0" dur="4s" repeatCount="indefinite"/><circle cx="50" cy="33" r="5" fill="rgba(255,255,255,.15)"/></g></svg>',
'<svg viewBox="0 0 120 100" fill="none">'
+'<path d="M30 60 Q30 80 60 82 Q90 80 90 60" fill="rgba(252,165,165,.08)" stroke="rgba(252,165,165,.4)" stroke-width="2" stroke-linecap="round"/>'
+'<line x1="25" y1="60" x2="95" y2="60" stroke="rgba(252,165,165,.35)" stroke-width="1.5" stroke-linecap="round"/>'
+'<path d="M90 62 Q98 58 100 52" stroke="rgba(252,165,165,.3)" stroke-width="2" fill="none" stroke-linecap="round"/>'
+'<path d="M45 58 Q40 30 48 8" stroke="rgba(252,165,165,.55)" stroke-width="4" fill="none" stroke-linecap="round"><animate attributeName="d" values="M45 58 Q40 30 48 8;M45 58 Q50 25 42 5;M45 58 Q40 30 48 8" dur="1.2s" repeatCount="indefinite"/></path>'
+'<path d="M60 55 Q58 22 62 0" stroke="rgba(255,200,150,.6)" stroke-width="5" fill="none" stroke-linecap="round"><animate attributeName="d" values="M60 55 Q58 22 62 0;M60 55 Q62 18 58 -2;M60 55 Q58 22 62 0" dur="1s" repeatCount="indefinite"/></path>'
+'<path d="M75 58 Q80 30 72 8" stroke="rgba(252,165,165,.55)" stroke-width="4" fill="none" stroke-linecap="round"><animate attributeName="d" values="M75 58 Q80 30 72 8;M75 58 Q70 25 78 5;M75 58 Q80 30 72 8" dur="1.4s" repeatCount="indefinite"/></path>'
+'</svg>',
'<svg viewBox="0 0 120 100" fill="none"><path d="M15 60 Q60 38 105 60" stroke="rgba(196,181,253,.3)" stroke-width="1.5" fill="none"/><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="2.5s" repeatCount="indefinite"/><rect x="30" y="45" width="5" height="8" rx="1" fill="rgba(255,213,79,.25)" stroke="rgba(255,213,79,.4)" stroke-width=".5"/></g><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="3s" repeatCount="indefinite"/><rect x="55" y="39" width="6" height="8" rx="1" fill="rgba(255,213,79,.3)" stroke="rgba(255,213,79,.5)" stroke-width=".5"/></g><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="2.8s" repeatCount="indefinite"/><rect x="80" y="45" width="5" height="8" rx="1" fill="rgba(255,213,79,.25)" stroke="rgba(255,213,79,.4)" stroke-width=".5"/></g><circle cx="60" cy="20" r="12" fill="none" stroke="rgba(255,213,79,.1)" stroke-width=".5"/></svg>',
'<svg viewBox="0 0 120 100" fill="none"><g opacity=".35"><animate attributeName="opacity" values=".2;.5;.2" dur="3s" repeatCount="indefinite"/><line x1="60" y1="50" x2="60" y2="2" stroke="rgba(255,213,79,.3)" stroke-width=".5"/><line x1="60" y1="50" x2="25" y2="8" stroke="rgba(255,213,79,.25)" stroke-width=".5"/><line x1="60" y1="50" x2="95" y2="8" stroke="rgba(255,213,79,.25)" stroke-width=".5"/><line x1="60" y1="50" x2="10" y2="28" stroke="rgba(255,213,79,.2)" stroke-width=".5"/><line x1="60" y1="50" x2="110" y2="28" stroke="rgba(255,213,79,.2)" stroke-width=".5"/></g><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-4;0,0" dur="4s" repeatCount="indefinite"/><ellipse cx="60" cy="45" rx="9" ry="15" fill="rgba(253,186,116,.1)" stroke="rgba(253,186,116,.25)" stroke-width=".8"/><circle cx="60" cy="34" r="6" fill="rgba(253,186,116,.12)" stroke="rgba(253,186,116,.3)" stroke-width=".8"/></g><circle cx="60" cy="50" r="20" fill="none" stroke="rgba(255,213,79,.08)" stroke-width=".5" stroke-dasharray="2,4"><animateTransform attributeName="transform" type="rotate" values="0,60,50;360,60,50" dur="20s" repeatCount="indefinite"/></circle></svg>',
'<svg viewBox="0 0 120 100" fill="none"><rect x="36" y="10" width="48" height="76" rx="3" fill="rgba(233,213,255,.03)" stroke="rgba(233,213,255,.25)" stroke-width="1.2"/><path d="M38 10 Q60 2 82 10" stroke="rgba(233,213,255,.35)" stroke-width="1" fill="none"/><circle cx="76" cy="50" r="2.5" fill="rgba(255,213,79,.5)"><animate attributeName="opacity" values=".3;.9;.3" dur="2s" repeatCount="indefinite"/></circle><g><animate attributeName="opacity" values="0;.3;0" dur="3.5s" repeatCount="indefinite"/><rect x="40" y="14" width="40" height="68" rx="1" fill="rgba(233,213,255,.05)"/></g><line x1="34" y1="90" x2="86" y2="90" stroke="rgba(233,213,255,.1)" stroke-width=".5"/></svg>',
'<svg viewBox="0 0 120 100" fill="none"><circle cx="60" cy="22" r="16" fill="rgba(255,213,79,.1)" stroke="rgba(255,213,79,.25)" stroke-width=".8"><animate attributeName="r" values="16;17;16" dur="4s" repeatCount="indefinite"/></circle><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="3s" repeatCount="indefinite"/><path d="M53 58 L50 75 Q60 79 70 75 L67 58 Z" fill="rgba(255,213,79,.12)" stroke="rgba(255,213,79,.3)" stroke-width=".8"/><path d="M50 58 Q60 52 70 58" stroke="rgba(255,213,79,.35)" stroke-width="1" fill="rgba(255,213,79,.06)"/><line x1="60" y1="75" x2="60" y2="85" stroke="rgba(255,213,79,.2)" stroke-width="1"/><line x1="54" y1="85" x2="66" y2="85" stroke="rgba(255,213,79,.2)" stroke-width="1"/></g><circle cx="18" cy="12" r="1" fill="white" opacity=".35"><animate attributeName="opacity" values=".2;.7;.2" dur="2s" repeatCount="indefinite"/></circle><circle cx="102" cy="18" r="1.2" fill="white" opacity=".3"><animate attributeName="opacity" values=".15;.6;.15" dur="2.5s" repeatCount="indefinite"/></circle><circle cx="35" cy="45" r=".7" fill="white" opacity=".25"><animate attributeName="opacity" values=".1;.5;.1" dur="3s" repeatCount="indefinite"/></circle></svg>'
];
var CHARS=[
'<svg viewBox="0 0 110 120" fill="none"><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-4;0,0" dur="3.5s" repeatCount="indefinite"/>'
+'<circle cx="55" cy="40" r="28" fill="rgba(196,181,253,.12)" stroke="rgba(196,181,253,.5)" stroke-width="1.5"/>'
+'<path d="M30 30 Q55 18 80 30 L78 36 Q55 28 32 36Z" fill="rgba(196,181,253,.2)" stroke="rgba(196,181,253,.4)" stroke-width=".8"/>'
+'<circle cx="45" cy="40" r="5" fill="rgba(196,181,253,.7)"/><circle cx="65" cy="40" r="5" fill="rgba(196,181,253,.7)"/>'
+'<circle cx="43" cy="38" r="2" fill="rgba(255,255,255,.85)"/><circle cx="63" cy="38" r="2" fill="rgba(255,255,255,.85)"/>'
+'<circle cx="47" cy="42" r="1" fill="rgba(255,255,255,.5)"/><circle cx="67" cy="42" r="1" fill="rgba(255,255,255,.5)"/>'
+'<line x1="40" y1="32" x2="50" y2="33" stroke="rgba(196,181,253,.5)" stroke-width="1.2" stroke-linecap="round"/>'
+'<line x1="60" y1="33" x2="70" y2="31" stroke="rgba(196,181,253,.5)" stroke-width="1.2" stroke-linecap="round"/>'
+'<line x1="50" y1="50" x2="60" y2="50" stroke="rgba(196,181,253,.35)" stroke-width="1" stroke-linecap="round"/>'
+'<ellipse cx="38" cy="47" rx="4" ry="2.5" fill="rgba(196,181,253,.15)"/><ellipse cx="72" cy="47" rx="4" ry="2.5" fill="rgba(196,181,253,.15)"/>'
+'<path d="M42 68 Q42 72 48 78 Q55 82 62 78 Q68 72 68 68 Q68 64 55 62 Q42 64 42 68Z" fill="rgba(196,181,253,.08)" stroke="rgba(196,181,253,.25)" stroke-width="1"/>'
+'<path d="M42 70 Q35 72 32 68" stroke="rgba(196,181,253,.2)" stroke-width="1.5" stroke-linecap="round" fill="none"/>'
+'<path d="M68 70 Q75 72 78 68" stroke="rgba(196,181,253,.2)" stroke-width="1.5" stroke-linecap="round" fill="none"/>'
+'<ellipse cx="49" cy="82" rx="5" ry="2" fill="rgba(196,181,253,.15)"/><ellipse cx="61" cy="82" rx="5" ry="2" fill="rgba(196,181,253,.15)"/>'
+'</g>'
+'<g><animateTransform attributeName="transform" type="rotate" values="-4,55,95;4,55,95;-4,55,95" dur="3s" repeatCount="indefinite"/>'
+'<line x1="35" y1="95" x2="75" y2="95" stroke="rgba(196,181,253,.35)" stroke-width="1.2" stroke-linecap="round"/>'
+'<circle cx="55" cy="95" r="2" fill="rgba(196,181,253,.3)"/>'
+'<path d="M30 95 L33 105 Q35 107 37 105 L40 95" fill="none" stroke="rgba(196,181,253,.3)" stroke-width=".8"/>'
+'<path d="M70 95 L73 105 Q75 107 77 105 L80 95" fill="none" stroke="rgba(196,181,253,.3)" stroke-width=".8"/>'
+'</g>'
+'<circle cx="55" cy="55" r="35" fill="rgba(196,181,253,.03)"><animate attributeName="r" values="35;38;35" dur="4s" repeatCount="indefinite"/></circle>'
+'</svg>',
'<svg viewBox="0 0 110 120" fill="none"><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="3s" repeatCount="indefinite"/>'
+'<circle cx="55" cy="38" r="28" fill="rgba(249,168,212,.12)" stroke="rgba(249,168,212,.45)" stroke-width="1.5"/>'
+'<circle cx="55" cy="15" r="8" fill="rgba(249,168,212,.15)" stroke="rgba(249,168,212,.3)" stroke-width=".8"/>'
+'<path d="M30 34 Q35 20 55 16 Q75 20 80 34" fill="rgba(249,168,212,.08)" stroke="none"/>'
+'<path d="M40 38 Q45 34 50 38" stroke="rgba(249,168,212,.7)" stroke-width="2" fill="none" stroke-linecap="round"/>'
+'<path d="M60 38 Q65 34 70 38" stroke="rgba(249,168,212,.7)" stroke-width="2" fill="none" stroke-linecap="round"/>'
+'<circle cx="45" cy="35" r="1.5" fill="rgba(255,255,255,.6)"/><circle cx="65" cy="35" r="1.5" fill="rgba(255,255,255,.6)"/>'
+'<path d="M45 48 Q55 56 65 48" stroke="rgba(249,168,212,.5)" stroke-width="1.2" fill="none" stroke-linecap="round"/>'
+'<ellipse cx="37" cy="45" rx="5" ry="3" fill="rgba(249,168,212,.2)"/><ellipse cx="73" cy="45" rx="5" ry="3" fill="rgba(249,168,212,.2)"/>'
+'<ellipse cx="55" cy="78" rx="16" ry="14" fill="rgba(249,168,212,.06)" stroke="rgba(249,168,212,.2)" stroke-width="1"/>'
+'<path d="M39 72 Q28 65 22 70" stroke="rgba(249,168,212,.25)" stroke-width="2" stroke-linecap="round" fill="none"><animate attributeName="d" values="M39 72 Q28 65 22 70;M39 72 Q28 62 20 65;M39 72 Q28 65 22 70" dur="2.5s" repeatCount="indefinite"/></path>'
+'<path d="M71 72 Q82 65 88 70" stroke="rgba(249,168,212,.25)" stroke-width="2" stroke-linecap="round" fill="none"><animate attributeName="d" values="M71 72 Q82 65 88 70;M71 72 Q82 62 90 65;M71 72 Q82 65 88 70" dur="2.5s" repeatCount="indefinite"/></path>'
+'<ellipse cx="48" cy="92" rx="5" ry="2.5" fill="rgba(249,168,212,.12)"/><ellipse cx="62" cy="92" rx="5" ry="2.5" fill="rgba(249,168,212,.12)"/>'
+'</g>'
+'<g><animate attributeName="opacity" values=".4;.9;.4" dur="2s" repeatCount="indefinite"/><animateTransform attributeName="transform" type="scale" values="1;1.15;1" additive="sum" dur="2s" repeatCount="indefinite"/>'
+'<path d="M50 72 Q50 67 54 67 Q55 67 55 69 Q55 67 56 67 Q60 67 60 72 Q60 76 55 80 Q50 76 50 72Z" fill="rgba(249,168,212,.35)" stroke="rgba(249,168,212,.5)" stroke-width=".5"/>'
+'</g>'
+'<circle cx="55" cy="55" r="35" fill="rgba(249,168,212,.03)"><animate attributeName="r" values="35;38;35" dur="3.5s" repeatCount="indefinite"/></circle>'
+'</svg>',
'<svg viewBox="0 0 110 120" fill="none"><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-5;0,0" dur="2.5s" repeatCount="indefinite"/>'
+'<ellipse cx="55" cy="55" rx="18" ry="22" fill="rgba(253,186,116,.1)" stroke="rgba(253,186,116,.4)" stroke-width="1.2"/>'
+'<circle cx="55" cy="32" r="20" fill="rgba(253,186,116,.12)" stroke="rgba(253,186,116,.45)" stroke-width="1.2"/>'
+'<line x1="50" y1="14" x2="47" y2="4" stroke="rgba(253,186,116,.5)" stroke-width="1.5" stroke-linecap="round"/>'
+'<line x1="55" y1="12" x2="55" y2="1" stroke="rgba(253,186,116,.6)" stroke-width="1.5" stroke-linecap="round"/>'
+'<line x1="60" y1="14" x2="63" y2="4" stroke="rgba(253,186,116,.5)" stroke-width="1.5" stroke-linecap="round"/>'
+'<circle cx="47" cy="3" r="2" fill="rgba(253,186,116,.3)"/><circle cx="55" cy="0" r="2.5" fill="rgba(253,186,116,.4)"/><circle cx="63" cy="3" r="2" fill="rgba(253,186,116,.3)"/>'
+'<circle cx="46" cy="32" r="6" fill="rgba(253,186,116,.75)"/><circle cx="64" cy="32" r="6" fill="rgba(253,186,116,.75)"/>'
+'<circle cx="44" cy="30" r="2.5" fill="rgba(255,255,255,.9)"/><circle cx="62" cy="30" r="2.5" fill="rgba(255,255,255,.9)"/>'
+'<circle cx="48" cy="34" r="1.2" fill="rgba(255,255,255,.5)"/><circle cx="66" cy="34" r="1.2" fill="rgba(255,255,255,.5)"/>'
+'<path d="M53 40 L55 44 L57 40" fill="rgba(253,186,116,.4)" stroke="rgba(253,186,116,.5)" stroke-width=".5"/>'
+'<ellipse cx="39" cy="37" rx="4" ry="2.5" fill="rgba(253,186,116,.18)"/><ellipse cx="71" cy="37" rx="4" ry="2.5" fill="rgba(253,186,116,.18)"/>'
+'<path d="M37 52 Q25 45 20 50 Q22 58 37 58" fill="rgba(253,186,116,.08)" stroke="rgba(253,186,116,.3)" stroke-width=".8"><animate attributeName="d" values="M37 52 Q25 45 20 50 Q22 58 37 58;M37 52 Q22 42 16 48 Q18 60 37 58;M37 52 Q25 45 20 50 Q22 58 37 58" dur="1.8s" repeatCount="indefinite"/></path>'
+'<path d="M73 52 Q85 45 90 50 Q88 58 73 58" fill="rgba(253,186,116,.08)" stroke="rgba(253,186,116,.3)" stroke-width=".8"><animate attributeName="d" values="M73 52 Q85 45 90 50 Q88 58 73 58;M73 52 Q88 42 94 48 Q92 60 73 58;M73 52 Q85 45 90 50 Q88 58 73 58" dur="1.8s" repeatCount="indefinite"/></path>'
+'</g>'
+'<g opacity=".6"><animate attributeName="opacity" values=".4;.7;.4" dur="2s" repeatCount="indefinite"/>'
+'<path d="M48 77 Q42 95 35 108" stroke="rgba(253,186,116,.35)" stroke-width="1.5" fill="none" stroke-linecap="round"/>'
+'<path d="M55 77 Q55 98 55 112" stroke="rgba(253,186,116,.4)" stroke-width="1.8" fill="none" stroke-linecap="round"/>'
+'<path d="M62 77 Q68 95 75 108" stroke="rgba(253,186,116,.35)" stroke-width="1.5" fill="none" stroke-linecap="round"/>'
+'<circle cx="35" cy="108" r="2" fill="rgba(253,186,116,.25)"/><circle cx="55" cy="112" r="2.5" fill="rgba(253,186,116,.3)"/><circle cx="75" cy="108" r="2" fill="rgba(253,186,116,.25)"/>'
+'</g>'
+'<circle cx="55" cy="50" r="35" fill="rgba(253,186,116,.02)"><animate attributeName="r" values="35;38;35" dur="3s" repeatCount="indefinite"/></circle>'
+'</svg>',
'<svg viewBox="0 0 110 120" fill="none"><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="4.5s" repeatCount="indefinite"/>'
+'<circle cx="55" cy="40" r="26" fill="rgba(233,213,255,.1)" stroke="rgba(233,213,255,.4)" stroke-width="1.3"/>'
+'<path d="M32 32 Q40 15 55 18 Q70 15 78 32" fill="rgba(233,213,255,.12)" stroke="rgba(233,213,255,.3)" stroke-width=".8"/>'
+'<path d="M72 25 Q78 18 82 22" stroke="rgba(233,213,255,.25)" stroke-width="1" fill="none" stroke-linecap="round"/>'
+'<path d="M42 40 Q46 36 50 40" stroke="rgba(233,213,255,.6)" stroke-width="1.8" fill="none" stroke-linecap="round"/>'
+'<path d="M60 40 Q64 36 68 40" stroke="rgba(233,213,255,.6)" stroke-width="1.8" fill="none" stroke-linecap="round"/>'
+'<line x1="42" y1="39" x2="40" y2="37" stroke="rgba(233,213,255,.3)" stroke-width=".5"/>'
+'<line x1="68" y1="39" x2="70" y2="37" stroke="rgba(233,213,255,.3)" stroke-width=".5"/>'
+'<path d="M49 49 Q55 53 61 49" stroke="rgba(233,213,255,.3)" stroke-width="1" fill="none" stroke-linecap="round"/>'
+'<ellipse cx="38" cy="46" rx="4.5" ry="2.5" fill="rgba(233,213,255,.15)"/><ellipse cx="72" cy="46" rx="4.5" ry="2.5" fill="rgba(233,213,255,.15)"/>'
+'<path d="M43 66 Q43 75 50 82 Q55 85 60 82 Q67 75 67 66" fill="rgba(233,213,255,.06)" stroke="rgba(233,213,255,.2)" stroke-width="1"/>'
+'<ellipse cx="50" cy="85" rx="4" ry="2" fill="rgba(233,213,255,.1)"/><ellipse cx="60" cy="85" rx="4" ry="2" fill="rgba(233,213,255,.1)"/>'
+'</g>'
+'<path d="M70 35 Q80 30 88 35 Q92 42 85 48" fill="none" stroke="rgba(233,213,255,.3)" stroke-width="1.5" stroke-linecap="round">'
+'<animate attributeName="d" values="M70 35 Q80 30 88 35 Q92 42 85 48;M70 35 Q82 26 90 33 Q96 44 86 50;M70 35 Q80 30 88 35 Q92 42 85 48" dur="4s" repeatCount="indefinite"/></path>'
+'<g opacity=".6"><animateTransform attributeName="transform" type="translate" values="0,0;2,-2;0,0" dur="5s" repeatCount="indefinite"/>'
+'<path d="M18 22 A 8 8 0 1 1 18 38 A 6 6 0 1 0 18 22" fill="rgba(233,213,255,.2)" stroke="rgba(233,213,255,.3)" stroke-width=".6"/>'
+'</g>'
+'<circle cx="22" cy="60" r="1" fill="rgba(233,213,255,.3)"><animate attributeName="opacity" values=".2;.6;.2" dur="3s" repeatCount="indefinite"/></circle>'
+'<circle cx="90" cy="70" r=".8" fill="rgba(233,213,255,.25)"><animate attributeName="opacity" values=".15;.5;.15" dur="2.5s" repeatCount="indefinite"/></circle>'
+'</svg>',
'<svg viewBox="0 0 110 120" fill="none"><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-2;0,0" dur="4s" repeatCount="indefinite"/>'
+'<circle cx="55" cy="42" r="26" fill="rgba(147,197,253,.1)" stroke="rgba(147,197,253,.4)" stroke-width="1.3"/>'
+'<path d="M32 35 Q40 22 55 20 Q70 22 78 35" fill="rgba(147,197,253,.1)" stroke="rgba(147,197,253,.25)" stroke-width=".8"/>'
+'<circle cx="44" cy="42" r="9" fill="none" stroke="rgba(147,197,253,.5)" stroke-width="1.5"/>'
+'<circle cx="66" cy="42" r="9" fill="none" stroke="rgba(147,197,253,.5)" stroke-width="1.5"/>'
+'<line x1="53" y1="42" x2="57" y2="42" stroke="rgba(147,197,253,.4)" stroke-width="1"/>'
+'<circle cx="44" cy="42" r="4" fill="rgba(147,197,253,.65)"/><circle cx="66" cy="42" r="4" fill="rgba(147,197,253,.65)"/>'
+'<circle cx="42.5" cy="40.5" r="1.8" fill="rgba(255,255,255,.85)"/><circle cx="64.5" cy="40.5" r="1.8" fill="rgba(255,255,255,.85)"/>'
+'<circle cx="45.5" cy="43.5" r=".8" fill="rgba(255,255,255,.4)"/><circle cx="67.5" cy="43.5" r=".8" fill="rgba(255,255,255,.4)"/>'
+'<circle cx="55" cy="53" r="2" fill="none" stroke="rgba(147,197,253,.35)" stroke-width=".8"/>'
+'<ellipse cx="36" cy="50" rx="3.5" ry="2" fill="rgba(147,197,253,.12)"/><ellipse cx="74" cy="50" rx="3.5" ry="2" fill="rgba(147,197,253,.12)"/>'
+'<path d="M43 68 Q43 78 50 84 Q55 87 60 84 Q67 78 67 68" fill="rgba(147,197,253,.06)" stroke="rgba(147,197,253,.2)" stroke-width="1"/>'
+'<path d="M67 72 Q74 70 78 65" stroke="rgba(147,197,253,.2)" stroke-width="1.5" fill="none" stroke-linecap="round"/>'
+'<ellipse cx="50" cy="87" rx="4" ry="2" fill="rgba(147,197,253,.1)"/><ellipse cx="60" cy="87" rx="4" ry="2" fill="rgba(147,197,253,.1)"/>'
+'</g>'
+'<g><animateTransform attributeName="transform" type="rotate" values="-2,85,60;2,85,60;-2,85,60" dur="5s" repeatCount="indefinite"/>'
+'<line x1="78" y1="65" x2="98" y2="45" stroke="rgba(147,197,253,.35)" stroke-width="2" stroke-linecap="round"/>'
+'<circle cx="100" cy="43" r="5" fill="rgba(147,197,253,.08)" stroke="rgba(147,197,253,.3)" stroke-width="1"/>'
+'</g>'
+'<g opacity=".5"><animate attributeName="opacity" values=".3;.6;.3" dur="3s" repeatCount="indefinite"/>'
+'<circle cx="15" cy="20" r="1.5" fill="rgba(147,197,253,.5)"/><circle cx="25" cy="12" r="1.5" fill="rgba(147,197,253,.4)"/><circle cx="10" cy="10" r="1.5" fill="rgba(147,197,253,.4)"/>'
+'<line x1="15" y1="20" x2="25" y2="12" stroke="rgba(147,197,253,.2)" stroke-width=".5"/>'
+'<line x1="25" y1="12" x2="10" y2="10" stroke="rgba(147,197,253,.2)" stroke-width=".5"/>'
+'<line x1="10" y1="10" x2="15" y2="20" stroke="rgba(147,197,253,.2)" stroke-width=".5"/>'
+'</g></svg>',
'<svg viewBox="0 0 110 120" fill="none"><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="3.5s" repeatCount="indefinite"/>'
+'<circle cx="55" cy="40" r="26" fill="rgba(253,230,138,.08)" stroke="rgba(253,230,138,.35)" stroke-width="1.3"/>'
+'<path d="M32 34 Q40 22 55 20 Q70 22 78 34" fill="rgba(253,230,138,.1)" stroke="rgba(253,230,138,.25)" stroke-width=".8"/>'
+'<ellipse cx="55" cy="20" rx="4" ry="3" fill="rgba(253,230,138,.2)"/>'
+'<path d="M42 40 Q46 37 50 40" stroke="rgba(253,230,138,.65)" stroke-width="1.8" fill="none" stroke-linecap="round"/>'
+'<path d="M60 40 Q64 37 68 40" stroke="rgba(253,230,138,.65)" stroke-width="1.8" fill="none" stroke-linecap="round"/>'
+'<circle cx="46" cy="37" r="1.2" fill="rgba(255,255,255,.5)"/><circle cx="64" cy="37" r="1.2" fill="rgba(255,255,255,.5)"/>'
+'<path d="M47 49 Q55 54 63 49" stroke="rgba(253,230,138,.4)" stroke-width="1.2" fill="none" stroke-linecap="round"/>'
+'<ellipse cx="37" cy="46" rx="5" ry="3" fill="rgba(253,186,116,.15)"/><ellipse cx="73" cy="46" rx="5" ry="3" fill="rgba(253,186,116,.15)"/>'
+'<ellipse cx="55" cy="78" rx="15" ry="14" fill="rgba(253,230,138,.06)" stroke="rgba(253,230,138,.2)" stroke-width="1"/>'
+'<path d="M40 72 Q35 78 38 84" stroke="rgba(253,230,138,.2)" stroke-width="1.5" fill="none" stroke-linecap="round"/>'
+'<path d="M70 72 Q75 78 72 84" stroke="rgba(253,230,138,.2)" stroke-width="1.5" fill="none" stroke-linecap="round"/>'
+'<ellipse cx="48" cy="92" rx="5" ry="2" fill="rgba(253,230,138,.1)"/><ellipse cx="62" cy="92" rx="5" ry="2" fill="rgba(253,230,138,.1)"/>'
+'</g>'
+'<g><animateTransform attributeName="transform" type="rotate" values="-2,55,100;2,55,100;-2,55,100" dur="3s" repeatCount="indefinite"/>'
+'<rect x="42" y="92" width="26" height="22" rx="13" fill="rgba(253,186,116,.15)" stroke="rgba(253,186,116,.4)" stroke-width="1"/>'
+'<line x1="55" y1="90" x2="55" y2="92" stroke="rgba(253,186,116,.3)" stroke-width="1"/>'
+'<circle cx="55" cy="103" r="6" fill="rgba(255,200,100,.12)"><animate attributeName="r" values="6;8;6" dur="1.8s" repeatCount="indefinite"/><animate attributeName="opacity" values=".5;1;.5" dur="1.8s" repeatCount="indefinite"/></circle>'
+'</g></svg>',
'<svg viewBox="0 0 110 120" fill="none"><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-10;0,0" dur="1.6s" repeatCount="indefinite"/>'
+'<ellipse cx="38" cy="18" rx="8" ry="20" fill="rgba(110,231,183,.1)" stroke="rgba(110,231,183,.35)" stroke-width="1" transform="rotate(-15,38,18)"/>'
+'<ellipse cx="38" cy="18" rx="4" ry="15" fill="rgba(110,231,183,.06)" transform="rotate(-15,38,18)"/>'
+'<ellipse cx="72" cy="18" rx="8" ry="20" fill="rgba(110,231,183,.1)" stroke="rgba(110,231,183,.35)" stroke-width="1" transform="rotate(15,72,18)"/>'
+'<ellipse cx="72" cy="18" rx="4" ry="15" fill="rgba(110,231,183,.06)" transform="rotate(15,72,18)"/>'
+'<circle cx="55" cy="48" r="28" fill="rgba(110,231,183,.1)" stroke="rgba(110,231,183,.38)" stroke-width="1.3"/>'
+'<circle cx="43" cy="46" r="7" fill="rgba(110,231,183,.7)"/><circle cx="67" cy="46" r="7" fill="rgba(110,231,183,.7)"/>'
+'<circle cx="41" cy="43" r="3" fill="rgba(255,255,255,.9)"/><circle cx="65" cy="43" r="3" fill="rgba(255,255,255,.9)"/>'
+'<circle cx="45" cy="48" r="1.5" fill="rgba(255,255,255,.5)"/><circle cx="69" cy="48" r="1.5" fill="rgba(255,255,255,.5)"/>'
+'<ellipse cx="55" cy="55" rx="3" ry="2" fill="rgba(110,231,183,.3)"/>'
+'<path d="M44 60 Q50 67 55 64 Q60 67 66 60" stroke="rgba(110,231,183,.4)" stroke-width="1.2" fill="none" stroke-linecap="round"/>'
+'<line x1="36" y1="54" x2="22" y2="52" stroke="rgba(110,231,183,.15)" stroke-width=".6"/>'
+'<line x1="36" y1="57" x2="22" y2="59" stroke="rgba(110,231,183,.15)" stroke-width=".6"/>'
+'<line x1="74" y1="54" x2="88" y2="52" stroke="rgba(110,231,183,.15)" stroke-width=".6"/>'
+'<line x1="74" y1="57" x2="88" y2="59" stroke="rgba(110,231,183,.15)" stroke-width=".6"/>'
+'<ellipse cx="35" cy="55" rx="5" ry="3" fill="rgba(110,231,183,.15)"/><ellipse cx="75" cy="55" rx="5" ry="3" fill="rgba(110,231,183,.15)"/>'
+'<ellipse cx="55" cy="86" rx="16" ry="12" fill="rgba(110,231,183,.06)" stroke="rgba(110,231,183,.2)" stroke-width="1"/>'
+'<circle cx="40" cy="88" r="4" fill="rgba(110,231,183,.08)" stroke="rgba(110,231,183,.15)" stroke-width=".6"/>'
+'<circle cx="70" cy="88" r="4" fill="rgba(110,231,183,.08)" stroke="rgba(110,231,183,.15)" stroke-width=".6"/>'
+'<circle cx="55" cy="98" r="5" fill="rgba(110,231,183,.08)" stroke="rgba(110,231,183,.15)" stroke-width=".6"/>'
+'<ellipse cx="46" cy="98" rx="5" ry="2.5" fill="rgba(110,231,183,.12)"/><ellipse cx="64" cy="98" rx="5" ry="2.5" fill="rgba(110,231,183,.12)"/>'
+'</g>'
+'<ellipse cx="55" cy="108" rx="18" ry="3" fill="rgba(110,231,183,.06)"><animate attributeName="rx" values="18;12;18" dur="1.6s" repeatCount="indefinite"/></ellipse>'
+'</svg>',
'<svg viewBox="0 0 110 120" fill="none"><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="2.5s" repeatCount="indefinite"/>'
+'<circle cx="55" cy="42" r="28" fill="rgba(252,165,165,.1)" stroke="rgba(252,165,165,.4)" stroke-width="1.3"/>'
+'<path d="M36 20 L32 8 L40 18" fill="rgba(252,165,165,.2)" stroke="rgba(252,165,165,.4)" stroke-width=".8"/>'
+'<path d="M74 20 L78 8 L70 18" fill="rgba(252,165,165,.2)" stroke="rgba(252,165,165,.4)" stroke-width=".8"/>'
+'<path d="M34 32 Q42 28 50 32" stroke="rgba(252,165,165,.35)" stroke-width="1.2" fill="none"/>'
+'<path d="M60 32 Q68 28 76 32" stroke="rgba(252,165,165,.35)" stroke-width="1.2" fill="none"/>'
+'<circle cx="44" cy="40" r="5.5" fill="rgba(252,165,165,.7)"/><circle cx="66" cy="40" r="5.5" fill="rgba(252,165,165,.7)"/>'
+'<circle cx="42.5" cy="38.5" r="2.2" fill="rgba(255,255,255,.85)"/><circle cx="64.5" cy="38.5" r="2.2" fill="rgba(255,255,255,.85)"/>'
+'<circle cx="45.5" cy="41.5" r="1" fill="rgba(255,255,255,.4)"/><circle cx="67.5" cy="41.5" r="1" fill="rgba(255,255,255,.4)"/>'
+'<path d="M45 52 Q55 56 65 52" stroke="rgba(252,165,165,.4)" stroke-width="1.2" fill="none" stroke-linecap="round"/>'
+'<path d="M48 52 L47 55" stroke="rgba(252,165,165,.35)" stroke-width=".8" stroke-linecap="round"/>'
+'<ellipse cx="36" cy="48" rx="4.5" ry="2.5" fill="rgba(252,165,165,.15)"/><ellipse cx="74" cy="48" rx="4.5" ry="2.5" fill="rgba(252,165,165,.15)"/>'
+'<ellipse cx="55" cy="80" rx="18" ry="14" fill="rgba(252,165,165,.06)" stroke="rgba(252,165,165,.22)" stroke-width="1"/>'
+'<path d="M48 74 Q55 72 62 74" stroke="rgba(252,165,165,.12)" stroke-width=".6" fill="none"/>'
+'<path d="M46 78 Q55 76 64 78" stroke="rgba(252,165,165,.1)" stroke-width=".6" fill="none"/>'
+'<path d="M37 76 Q28 72 24 76" stroke="rgba(252,165,165,.25)" stroke-width="2" fill="none" stroke-linecap="round"/>'
+'<path d="M73 76 Q82 72 86 76" stroke="rgba(252,165,165,.25)" stroke-width="2" fill="none" stroke-linecap="round"/>'
+'<ellipse cx="46" cy="94" rx="6" ry="2.5" fill="rgba(252,165,165,.12)"/><ellipse cx="64" cy="94" rx="6" ry="2.5" fill="rgba(252,165,165,.12)"/>'
+'</g>'
+'<g opacity=".4"><animateTransform attributeName="transform" type="translate" values="0,0;-3,-8;-6,-16" dur="3s" repeatCount="indefinite"/><animate attributeName="opacity" values=".4;.15;0" dur="3s" repeatCount="indefinite"/>'
+'<circle cx="45" cy="54" r="3" fill="rgba(252,165,165,.15)"/></g>'
+'<g opacity=".3"><animateTransform attributeName="transform" type="translate" values="0,0;3,-6;5,-14" dur="3.5s" repeatCount="indefinite"/><animate attributeName="opacity" values=".3;.1;0" dur="3.5s" repeatCount="indefinite"/>'
+'<circle cx="65" cy="55" r="2.5" fill="rgba(252,165,165,.12)"/></g>'
+'<path d="M73 88 Q85 85 88 92 Q85 98 78 96" fill="none" stroke="rgba(252,165,165,.2)" stroke-width="2" stroke-linecap="round">'
+'<animate attributeName="d" values="M73 88 Q85 85 88 92 Q85 98 78 96;M73 88 Q87 82 92 90 Q88 100 80 96;M73 88 Q85 85 88 92 Q85 98 78 96" dur="3s" repeatCount="indefinite"/></path>'
+'</svg>',
'<svg viewBox="0 0 110 120" fill="none"><g><animateTransform attributeName="transform" type="translate" values="0,0;0,-5;0,0" dur="5s" repeatCount="indefinite"/>'
+'<circle cx="55" cy="38" r="26" fill="rgba(186,230,253,.1)" stroke="rgba(186,230,253,.35)" stroke-width="1.3"/>'
+'<path d="M32 32 Q38 20 55 18 Q72 20 78 32" fill="rgba(186,230,253,.08)" stroke="rgba(186,230,253,.2)" stroke-width=".8"/>'
+'<path d="M42 38 Q46 35 50 38" stroke="rgba(186,230,253,.55)" stroke-width="1.6" fill="none" stroke-linecap="round"/>'
+'<path d="M60 38 Q64 35 68 38" stroke="rgba(186,230,253,.55)" stroke-width="1.6" fill="none" stroke-linecap="round"/>'
+'<circle cx="46" cy="35" r="1" fill="rgba(255,255,255,.4)"/><circle cx="64" cy="35" r="1" fill="rgba(255,255,255,.4)"/>'
+'<path d="M48 47 Q55 51 62 47" stroke="rgba(186,230,253,.3)" stroke-width="1" fill="none" stroke-linecap="round"/>'
+'<ellipse cx="38" cy="44" rx="4.5" ry="2.5" fill="rgba(186,230,253,.12)"/><ellipse cx="72" cy="44" rx="4.5" ry="2.5" fill="rgba(186,230,253,.12)"/>'
+'<path d="M42 64 Q40 78 48 86 Q55 90 62 86 Q70 78 68 64" fill="rgba(186,230,253,.05)" stroke="rgba(186,230,253,.18)" stroke-width="1"/>'
+'<path d="M42 68 Q35 72 33 78" stroke="rgba(186,230,253,.15)" stroke-width="1.5" fill="none" stroke-linecap="round"/>'
+'<path d="M68 68 Q75 72 77 78" stroke="rgba(186,230,253,.15)" stroke-width="1.5" fill="none" stroke-linecap="round"/>'
+'</g>'
+'<g opacity=".5"><animateTransform attributeName="transform" type="translate" values="0,0;4,0;0,0" dur="6s" repeatCount="indefinite"/>'
+'<ellipse cx="40" cy="100" rx="22" ry="7" fill="rgba(186,230,253,.08)" stroke="rgba(186,230,253,.12)" stroke-width=".5"/>'
+'<ellipse cx="30" cy="98" rx="10" ry="5" fill="rgba(186,230,253,.06)"/>'
+'</g>'
+'<g opacity=".35"><animateTransform attributeName="transform" type="translate" values="0,0;-4,0;0,0" dur="5s" repeatCount="indefinite"/>'
+'<ellipse cx="72" cy="102" rx="20" ry="6" fill="rgba(186,230,253,.07)" stroke="rgba(186,230,253,.1)" stroke-width=".5"/>'
+'<ellipse cx="82" cy="100" rx="8" ry="4" fill="rgba(186,230,253,.05)"/>'
+'</g>'
+'<circle cx="55" cy="55" r="38" fill="rgba(186,230,253,.02)"><animate attributeName="r" values="38;42;38" dur="5s" repeatCount="indefinite"/></circle>'
+'</svg>'
];
var R=[
{id:"magistrate",name:"The Jade Magistrate",color:"#C4B5FD",bg:"linear-gradient(170deg,#0E0A28,#1A1045 60%,#2D1B6B)",traits:["Discerning","Principled","Precise","Quality-Obsessed"],quote:"You dine the way the Jade Emperor governs heaven \u2014 with exacting standards and quiet authority. You\u2019ll send back a dish that isn\u2019t right, because <em>standards exist for a reason</em>.",feast:"Farm-to-table, ethically sourced, Michelin-starred",offer:"Up to 50% off premium dining",offerSub:"Exquisite shouldn\u2019t mean expensive",match:"\u2601\uFE0F Cloud Walker",opp:"\uD83D\uDC30 Jade Rabbit",p:["\u2726","\u2727","\u00B7"]},
{id:"mother",name:"The Moon Mother",color:"#F9A8D4",bg:"linear-gradient(170deg,#1A0A1E,#2E1232 60%,#451A4A)",traits:["Nurturing","Generous","Self-Sacrificing","Warm"],quote:"Like Chang\u2019e tending her garden, you feed others before yourself. Your love language is literally <em>\u201Chave you eaten?\u201D</em>",feast:"Family-style sharing, comfort classics",offer:"Up to 50% off group dining",offerSub:"Feed the ones you love for less",match:"\uD83D\uDC32 Dragon Commander",opp:"\uD83D\uDD2D Star Cartographer",p:["\uD83C\uDF38","\u2726","\u00B7"]},
{id:"phoenix",name:"The Celestial Phoenix",color:"#FDBA74",bg:"linear-gradient(170deg,#1A0E06,#2E1A0A 60%,#452810)",traits:["Status-Conscious","Polished","Ambitious","Trend-Setting"],quote:"You don\u2019t just eat dinner \u2014 you <em>perform</em> it. The restaurant must be new, talked-about, and Instagrammable.",feast:"Trending hotspots, celebrity chef restaurants",offer:"Up to 40% off trending restaurants",offerSub:"Be first, look best, spend less",match:"\uD83D\uDC30 Jade Rabbit",opp:"\uD83C\uDFEE Loyal Lantern",p:["\uD83D\uDD25","\u2726","\u2727"]},
{id:"poet",name:"The Wandering Poet",color:"#E9D5FF",bg:"linear-gradient(170deg,#100818,#1E0E30 60%,#2E1848)",traits:["Soulful","Unique","Mood-Driven","Artistic"],quote:"You eat with your feelings first. The restaurant needs <em>soul</em> \u2014 dim lighting, a story, imperfect beauty.",feast:"Hidden gems, artistic dining, moody wine bars",offer:"Up to 50% off hidden gems",offerSub:"Every great meal tells a story",match:"\uD83D\uDD2D Star Cartographer",opp:"\uD83D\uDD25 Celestial Phoenix",p:["\uD83C\uDF1F","\u2726","\u00B7"]},
{id:"cartographer",name:"The Star Cartographer",color:"#93C5FD",bg:"linear-gradient(170deg,#060E20,#0E1E3A 60%,#1A3058)",traits:["Analytical","Quiet","Research-Driven","Selective"],quote:"You\u2019ve read the menu online, compared three alternatives, and checked the chef\u2019s background. <em>You eat to understand, not to be seen.</em>",feast:"Quiet restaurants, omakase counters, solo dining",offer:"Up to 50% off top-rated dining",offerSub:"You\u2019ve done the research \u2014 now save",match:"\uD83C\uDFAD Wandering Poet",opp:"\uD83C\uDF19 Moon Mother",p:["\u2B50","\u2726","\u2727"]},
{id:"lantern",name:"The Loyal Lantern",color:"#FDE68A",bg:"linear-gradient(170deg,#14100A,#2A1E0E 60%,#3A2A14)",traits:["Loyal","Routine-Loving","Reliable","Comfort-Seeking"],quote:"Why gamble on somewhere new when your favourite gets it right every time? You find beauty in <em>the ritual of return</em>.",feast:"Trusted regulars, comfort classics, heritage spots",offer:"Up to 50% off local favourites",offerSub:"Your regulars, for even less",match:"\uD83C\uDFDB\uFE0F Jade Magistrate",opp:"\uD83D\uDD25 Celestial Phoenix",p:["\uD83C\uDFEE","\u2726","\u00B7"]},
{id:"rabbit",name:"The Jade Rabbit",color:"#6EE7B7",bg:"linear-gradient(170deg,#061A14,#0E2E22 60%,#1A4035)",traits:["Adventurous","Enthusiastic","Variety-Seeking","Spontaneous"],quote:"You treat every meal as an expedition. <em>\u201CCan we get one of everything?\u201D</em> is not a joke \u2014 it\u2019s your strategy.",feast:"New openings, street food crawls, tasting menus",offer:"Use \u2018Here & Now\u2019 for deals up to 50%",offerSub:"The best plans are no plans",match:"\uD83D\uDD25 Celestial Phoenix",opp:"\uD83C\uDFDB\uFE0F Jade Magistrate",p:["\uD83D\uDC30","\u2726","\u2727"]},
{id:"dragon",name:"The Dragon Commander",color:"#FCA5A5",bg:"linear-gradient(170deg,#1A0808,#2E1212 60%,#451A1A)",traits:["Bold","Commanding","Generous","Intense"],quote:"You don\u2019t attend dinners \u2014 you <em>command</em> them. If the steak isn\u2019t right you\u2019re going to the kitchen personally.",feast:"Steakhouses, BBQ, hotpot, hearty group dining",offer:"Up to 50% off group dining & buffets",offerSub:"Go big. Always.",match:"\uD83C\uDF19 Moon Mother",opp:"\u2601\uFE0F Cloud Walker",p:["\uD83D\uDD25","\u2726","\uD83D\uDC32"]},
{id:"cloud",name:"The Cloud Walker",color:"#BAE6FD",bg:"linear-gradient(170deg,#060E18,#0E1E2E 60%,#1A3048)",traits:["Easy-Going","Harmonious","Adaptable","Peaceful"],quote:"<em>\u201CI\u2019m fine with anything, you choose!\u201D</em> \u2014 and you genuinely mean it. The company matters more than the cuisine.",feast:"Whatever everyone else wants, comfort food, buffets",offer:"Up to 50% off casual dining",offerSub:"Easy meals for easy-going souls",match:"\uD83C\uDFDB\uFE0F Jade Magistrate",opp:"\uD83D\uDC32 Dragon Commander",p:["\u2601\uFE0F","\u2726","\u2727"]}
];
var ET=['portal','walk','curtain','impact','drift','spot','doors','ascend'];
var AV=['av-float','av-walk-in','av-drop-in','av-float','av-walk-in','av-float','av-enter-r','av-drop-in'];
var FL=[null,null,null,null,'gold',null,'pink',null];
var QPAR=[
["\uD83D\uDCDC","\u2727","\uD83C\uDF38","\u00B7"],
["\uD83D\uDCA7","\u00B7","\u2727","\u2726"],
["\uD83E\uDD62","\u2726","\uD83C\uDF3F","\u00B7"],
["\uD83D\uDC41\uFE0F","\u2727","\u00B7","\u2726"],
["\uD83C\uDF77","\u2726","\u00B7","\u2727"],
["\uD83C\uDF19","\u2727","\u00B7","\u2726"],
["\uD83D\uDD2E","\u2727","\u00B7","\u2726"],
["\u2B50","\u2727","\u00B7","\u2726"]
];
var QOVL=[
// Q0: Osmanthus flowers — 4 rounded teardrop petals in cross, golden
'<svg viewBox="0 0 100 200" preserveAspectRatio="none">'
// Flower 1 — large, upper-left
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;2,-6;0,0" dur="6s" repeatCount="indefinite"/>'
// top petal
+'<path d="M23 40 Q19 34 23 28 Q27 34 23 40" fill="rgba(255,213,79,.1)" stroke="rgba(255,213,79,.28)" stroke-width=".5"/>'
// right petal
+'<path d="M23 40 Q29 36 35 40 Q29 44 23 40" fill="rgba(255,213,79,.1)" stroke="rgba(255,213,79,.28)" stroke-width=".5"/>'
// bottom petal
+'<path d="M23 40 Q19 46 23 52 Q27 46 23 40" fill="rgba(255,213,79,.1)" stroke="rgba(255,213,79,.28)" stroke-width=".5"/>'
// left petal
+'<path d="M23 40 Q17 36 11 40 Q17 44 23 40" fill="rgba(255,213,79,.1)" stroke="rgba(255,213,79,.28)" stroke-width=".5"/>'
+'<circle cx="23" cy="40" r="1.8" fill="rgba(255,213,79,.35)"/></g>'
// Flower 2 — medium, right
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;-3,4;0,0" dur="8s" repeatCount="indefinite"/>'
+'<path d="M79 86 Q76 81 79 76 Q82 81 79 86" fill="rgba(255,213,79,.08)" stroke="rgba(255,213,79,.22)" stroke-width=".4"/>'
+'<path d="M79 86 Q84 83 89 86 Q84 89 79 86" fill="rgba(255,213,79,.08)" stroke="rgba(255,213,79,.22)" stroke-width=".4"/>'
+'<path d="M79 86 Q76 91 79 96 Q82 91 79 86" fill="rgba(255,213,79,.08)" stroke="rgba(255,213,79,.22)" stroke-width=".4"/>'
+'<path d="M79 86 Q74 83 69 86 Q74 89 79 86" fill="rgba(255,213,79,.08)" stroke="rgba(255,213,79,.22)" stroke-width=".4"/>'
+'<circle cx="79" cy="86" r="1.5" fill="rgba(255,213,79,.28)"/></g>'
// Flower 3 — small, center-bottom
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;3,-4;0,0" dur="7s" repeatCount="indefinite"/>'
+'<path d="M44 146 Q42 142 44 138 Q46 142 44 146" fill="rgba(255,213,79,.06)" stroke="rgba(255,213,79,.18)" stroke-width=".35"/>'
+'<path d="M44 146 Q48 144 52 146 Q48 148 44 146" fill="rgba(255,213,79,.06)" stroke="rgba(255,213,79,.18)" stroke-width=".35"/>'
+'<path d="M44 146 Q42 150 44 154 Q46 150 44 146" fill="rgba(255,213,79,.06)" stroke="rgba(255,213,79,.18)" stroke-width=".35"/>'
+'<path d="M44 146 Q40 144 36 146 Q40 148 44 146" fill="rgba(255,213,79,.06)" stroke="rgba(255,213,79,.18)" stroke-width=".35"/>'
+'<circle cx="44" cy="146" r="1.2" fill="rgba(255,213,79,.22)"/></g>'
// Flower 4 — tiny, top-right
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;-2,3;0,0" dur="9s" repeatCount="indefinite"/>'
+'<path d="M87 22 Q86 19 87 16 Q88 19 87 22" fill="rgba(255,213,79,.05)" stroke="rgba(255,213,79,.14)" stroke-width=".3"/>'
+'<path d="M87 22 Q90 21 93 22 Q90 23 87 22" fill="rgba(255,213,79,.05)" stroke="rgba(255,213,79,.14)" stroke-width=".3"/>'
+'<path d="M87 22 Q86 25 87 28 Q88 25 87 22" fill="rgba(255,213,79,.05)" stroke="rgba(255,213,79,.14)" stroke-width=".3"/>'
+'<path d="M87 22 Q84 21 81 22 Q84 23 87 22" fill="rgba(255,213,79,.05)" stroke="rgba(255,213,79,.14)" stroke-width=".3"/>'
+'<circle cx="87" cy="22" r=".8" fill="rgba(255,213,79,.18)"/></g>'
// Flower 5 — tiny, bottom-left
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;2,5;0,0" dur="10s" repeatCount="indefinite"/>'
+'<path d="M15 168 Q14 165 15 162 Q16 165 15 168" fill="rgba(255,213,79,.05)" stroke="rgba(255,213,79,.13)" stroke-width=".3"/>'
+'<path d="M15 168 Q18 167 21 168 Q18 169 15 168" fill="rgba(255,213,79,.05)" stroke="rgba(255,213,79,.13)" stroke-width=".3"/>'
+'<path d="M15 168 Q14 171 15 174 Q16 171 15 168" fill="rgba(255,213,79,.05)" stroke="rgba(255,213,79,.13)" stroke-width=".3"/>'
+'<path d="M15 168 Q12 167 9 168 Q12 169 15 168" fill="rgba(255,213,79,.05)" stroke="rgba(255,213,79,.13)" stroke-width=".3"/>'
+'<circle cx="15" cy="168" r=".8" fill="rgba(255,213,79,.16)"/></g>'
+'</svg>',
// Q1: Silk lanterns with warm glow + water shimmer
'<svg viewBox="0 0 100 200" preserveAspectRatio="none">'
+'<g><animateTransform attributeName="transform" type="rotate" values="-2,28,0;2,28,0;-2,28,0" dur="4s" repeatCount="indefinite"/>'
+'<line x1="28" y1="0" x2="28" y2="28" stroke="rgba(255,160,80,.12)" stroke-width=".5"/>'
+'<ellipse cx="28" cy="40" rx="8" ry="13" fill="rgba(255,160,80,.08)" stroke="rgba(255,160,80,.2)" stroke-width=".6"/>'
+'<ellipse cx="28" cy="40" rx="4" ry="7" fill="rgba(255,200,100,.06)"/>'
+'<line x1="28" y1="53" x2="28" y2="58" stroke="rgba(255,160,80,.08)" stroke-width=".3"/></g>'
+'<g><animateTransform attributeName="transform" type="rotate" values="1.5,74,0;-1.5,74,0;1.5,74,0" dur="5s" repeatCount="indefinite"/>'
+'<line x1="74" y1="0" x2="74" y2="45" stroke="rgba(255,160,80,.08)" stroke-width=".4"/>'
+'<ellipse cx="74" cy="58" rx="6.5" ry="11" fill="rgba(255,160,80,.06)" stroke="rgba(255,160,80,.16)" stroke-width=".5"/>'
+'<ellipse cx="74" cy="58" rx="3" ry="5.5" fill="rgba(255,200,100,.05)"/></g>'
+'<path d="M0 175 Q25 170 50 175 Q75 180 100 175" stroke="rgba(147,197,253,.08)" stroke-width=".8" fill="none"><animate attributeName="d" values="M0 175 Q25 170 50 175 Q75 180 100 175;M0 175 Q25 180 50 175 Q75 170 100 175;M0 175 Q25 170 50 175 Q75 180 100 175" dur="3.5s" repeatCount="indefinite"/></path>'
+'<path d="M0 182 Q30 178 60 182 Q80 185 100 181" stroke="rgba(147,197,253,.05)" stroke-width=".5" fill="none"><animate attributeName="d" values="M0 182 Q30 178 60 182 Q80 185 100 181;M0 182 Q30 185 60 181 Q80 178 100 182;M0 182 Q30 178 60 182 Q80 185 100 181" dur="4s" repeatCount="indefinite"/></path>'
+'</svg>',
// Q2: Pink sakura/moon-flower petals drifting on emerald — Wicked nod
'<svg viewBox="0 0 100 200" preserveAspectRatio="none">'
// Petal 1 — large, bright pink
+'<g><animateTransform attributeName="transform" type="translate" values="15,-30;22,230" dur="7s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;.7;.6;0" dur="7s" repeatCount="indefinite"/>'
+'<g><animateTransform attributeName="transform" type="rotate" values="0;70;140" dur="7s" repeatCount="indefinite"/>'
+'<path d="M0 0 Q7 -14 0 -24 Q-7 -14 0 0" fill="rgba(255,130,180,.35)" stroke="rgba(255,180,210,.4)" stroke-width=".5"/></g></g>'
// Petal 2 — medium
+'<g><animateTransform attributeName="transform" type="translate" values="65,-20;56,230" dur="9s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;.6;.5;0" dur="9s" repeatCount="indefinite"/>'
+'<g><animateTransform attributeName="transform" type="rotate" values="30;-40;30" dur="9s" repeatCount="indefinite"/>'
+'<path d="M0 0 Q6 -11 0 -20 Q-6 -11 0 0" fill="rgba(255,110,165,.3)" stroke="rgba(255,150,190,.35)" stroke-width=".4"/></g></g>'
// Petal 3 — small, slower
+'<g><animateTransform attributeName="transform" type="translate" values="38,-15;32,230" dur="11s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;.5;.4;0" dur="11s" repeatCount="indefinite"/>'
+'<g><animateTransform attributeName="transform" type="rotate" values="-20;50;-20" dur="11s" repeatCount="indefinite"/>'
+'<path d="M0 0 Q4 -8 0 -15 Q-4 -8 0 0" fill="rgba(255,140,185,.28)"/></g></g>'
// Petal 4 — tiny accent
+'<g><animateTransform attributeName="transform" type="translate" values="85,-10;80,230" dur="8s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;.45;.35;0" dur="8s" repeatCount="indefinite"/>'
+'<g><animateTransform attributeName="transform" type="rotate" values="10;-60;10" dur="8s" repeatCount="indefinite"/>'
+'<path d="M0 0 Q3 -7 0 -12 Q-3 -7 0 0" fill="rgba(255,120,170,.25)"/></g></g>'
// Petal 5 — another large, different timing
+'<g><animateTransform attributeName="transform" type="translate" values="50,-40;45,230" dur="10s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;.6;.5;0" dur="10s" repeatCount="indefinite"/>'
+'<g><animateTransform attributeName="transform" type="rotate" values="45;-30;45" dur="10s" repeatCount="indefinite"/>'
+'<path d="M0 0 Q6 -12 0 -22 Q-6 -12 0 0" fill="rgba(255,130,175,.3)" stroke="rgba(255,170,200,.3)" stroke-width=".4"/></g></g>'
+'</svg>',
// Q3: Porcelain bowl drops and cracks
'<svg viewBox="0 0 100 200" preserveAspectRatio="none">'
+'<g><animate attributeName="opacity" values="0;0;.35;.25;0" dur="5s" repeatCount="indefinite"/>'
+'<animateTransform attributeName="transform" type="translate" values="0,-30;0,40;0,40;0,40" dur="5s" repeatCount="indefinite"/>'
+'<path d="M35 80 Q35 95 50 97 Q65 95 65 80" fill="rgba(255,220,200,.05)" stroke="rgba(255,220,200,.2)" stroke-width=".8" stroke-linecap="round"/>'
+'<line x1="32" y1="80" x2="68" y2="80" stroke="rgba(255,220,200,.15)" stroke-width=".6"/>'
+'<line x1="50" y1="82" x2="48" y2="94" stroke="rgba(255,220,200,.1)" stroke-width=".3"/></g>'
+'<g><animate attributeName="opacity" values="0;0;0;.2;.1" dur="5s" repeatCount="indefinite"/>'
+'<path d="M42 120 L38 128 L45 125 Z" fill="rgba(255,200,180,.08)" stroke="rgba(255,200,180,.18)" stroke-width=".4"><animateTransform attributeName="transform" type="translate" values="0,0;-8,10" dur="2s" begin="3s" repeatCount="indefinite"/></path></g>'
+'<g><animate attributeName="opacity" values="0;0;0;.18;.08" dur="5s" repeatCount="indefinite"/>'
+'<path d="M58 118 L62 126 L55 124 Z" fill="rgba(255,200,180,.06)" stroke="rgba(255,200,180,.15)" stroke-width=".3"><animateTransform attributeName="transform" type="translate" values="0,0;7,8" dur="2.2s" begin="3.2s" repeatCount="indefinite"/></path></g>'
+'</svg>',
// Q4: Crossed chopsticks + steam rising
'<svg viewBox="0 0 100 200" preserveAspectRatio="none">'
+'<g opacity=".15"><line x1="38" y1="65" x2="62" y2="135" stroke="rgba(196,181,253,.2)" stroke-width="1.2" stroke-linecap="round"/>'
+'<line x1="62" y1="65" x2="38" y2="135" stroke="rgba(196,181,253,.2)" stroke-width="1.2" stroke-linecap="round"/></g>'
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;2,-20" dur="4s" repeatCount="indefinite"/><animate attributeName="opacity" values=".08;.02;.08" dur="4s" repeatCount="indefinite"/>'
+'<path d="M42 85 Q50 75 58 85" stroke="rgba(196,181,253,.08)" stroke-width=".8" fill="none"/></g>'
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;-2,-18" dur="5s" repeatCount="indefinite"/><animate attributeName="opacity" values=".06;.01;.06" dur="5s" repeatCount="indefinite"/>'
+'<path d="M45 90 Q50 82 56 90" stroke="rgba(196,181,253,.06)" stroke-width=".6" fill="none"/></g>'
+'</svg>',
// Q5: Chang\'e rising silhouette + moon
'<svg viewBox="0 0 100 200" preserveAspectRatio="none">'
+'<g><animateTransform attributeName="transform" type="translate" values="0,35;0,-8" dur="6s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;.25;.2;.15" dur="6s" repeatCount="indefinite"/>'
// Head
+'<circle cx="50" cy="55" r="4.5" fill="none" stroke="rgba(255,213,79,.18)" stroke-width=".7"/>'
// Hair bun
+'<circle cx="50" cy="50" r="2.5" fill="rgba(255,213,79,.06)" stroke="rgba(255,213,79,.12)" stroke-width=".4"/>'
// Body
+'<path d="M50 59 L50 78" stroke="rgba(255,213,79,.14)" stroke-width=".9"/>'
// Arms outstretched with flowing sleeves
+'<path d="M50 65 Q40 68 32 64 Q30 62 28 66" stroke="rgba(255,213,79,.1)" stroke-width=".5" fill="none"/>'
+'<path d="M50 65 Q60 68 68 64 Q70 62 72 66" stroke="rgba(255,213,79,.1)" stroke-width=".5" fill="none"/>'
// Flowing robe/skirt
+'<path d="M50 78 Q40 95 35 108 Q42 112 50 108 Q58 112 65 108 Q60 95 50 78" fill="rgba(255,213,79,.03)" stroke="rgba(255,213,79,.08)" stroke-width=".4"/>'
// Ribbon sashes flowing
+'<path d="M42 70 Q30 80 26 95" stroke="rgba(255,213,79,.06)" stroke-width=".4" fill="none"><animate attributeName="d" values="M42 70 Q30 80 26 95;M42 70 Q28 82 24 92;M42 70 Q30 80 26 95" dur="3s" repeatCount="indefinite"/></path>'
+'<path d="M58 70 Q70 80 74 95" stroke="rgba(255,213,79,.06)" stroke-width=".4" fill="none"><animate attributeName="d" values="M58 70 Q70 80 74 95;M58 70 Q72 82 76 92;M58 70 Q70 80 74 95" dur="3s" repeatCount="indefinite"/></path>'
+'</g>'
// Moon above
+'<circle cx="50" cy="22" r="9" fill="rgba(255,213,79,.03)" stroke="rgba(255,213,79,.1)" stroke-width=".6"><animate attributeName="r" values="9;11;9" dur="4s" repeatCount="indefinite"/></circle>'
+'<circle cx="47" cy="20" r="2" fill="rgba(255,213,79,.02)"/>'
+'</svg>',
// Q6: Keyhole light beam
'<svg viewBox="0 0 100 200" preserveAspectRatio="none">'
+'<g><animate attributeName="opacity" values=".08;.18;.08" dur="2.5s" repeatCount="indefinite"/>'
+'<path d="M44 65 Q50 55 56 65 L60 120 L40 120 Z" fill="rgba(233,213,255,.04)" stroke="rgba(233,213,255,.1)" stroke-width=".5"/>'
+'<circle cx="50" cy="63" r="7" fill="rgba(233,213,255,.03)" stroke="rgba(233,213,255,.1)" stroke-width=".5"/></g>'
+'<rect x="46" y="0" width="8" height="200" fill="rgba(255,255,255,.015)"><animate attributeName="opacity" values=".01;.04;.01" dur="3s" repeatCount="indefinite"/></rect>'
+'</svg>',
// Q7: Star constellation — dining map
'<svg viewBox="0 0 100 200" preserveAspectRatio="none">'
+'<g><animate attributeName="opacity" values=".12;.22;.12" dur="5s" repeatCount="indefinite"/>'
+'<circle cx="25" cy="40" r="1.5" fill="rgba(255,213,79,.25)"/><circle cx="70" cy="55" r="1.2" fill="rgba(255,213,79,.2)"/><circle cx="45" cy="90" r="1.4" fill="rgba(255,213,79,.22)"/><circle cx="80" cy="120" r="1.5" fill="rgba(255,213,79,.25)"/><circle cx="30" cy="150" r="1.2" fill="rgba(255,213,79,.2)"/><circle cx="60" cy="170" r="1.3" fill="rgba(255,213,79,.22)"/>'
+'<line x1="25" y1="40" x2="70" y2="55" stroke="rgba(255,213,79,.08)" stroke-width=".3"/>'
+'<line x1="70" y1="55" x2="45" y2="90" stroke="rgba(255,213,79,.08)" stroke-width=".3"/>'
+'<line x1="45" y1="90" x2="80" y2="120" stroke="rgba(255,213,79,.08)" stroke-width=".3"/>'
+'<line x1="80" y1="120" x2="30" y2="150" stroke="rgba(255,213,79,.08)" stroke-width=".3"/>'
+'<line x1="30" y1="150" x2="60" y2="170" stroke="rgba(255,213,79,.08)" stroke-width=".3"/></g>'
+'</svg>'
];
/* 8 story bottom scene illustrations */
var SILL=['<svg viewBox="0 0 300 60" fill="none">'
+'<path d="M0 55 Q50 50 100 52 Q150 48 200 52 Q250 50 300 55" stroke="rgba(196,181,253,.1)" stroke-width=".5" fill="none"/>'
+'<g><animateTransform attributeName="transform" type="translate" values="-40,0;340,0" dur="8s" repeatCount="indefinite"/>'
+'<circle cx="0" cy="30" r="2" fill="rgba(255,213,79,.3)"><animate attributeName="opacity" values="0;.6;.6;0" dur="8s" repeatCount="indefinite"/></circle>'
+'<circle cx="12" cy="25" r="1.5" fill="rgba(255,213,79,.2)"><animate attributeName="opacity" values="0;.4;.4;0" dur="8s" repeatCount="indefinite"/></circle></g>'
+'<g opacity=".3"><rect x="135" y="35" width="30" height="20" rx="2" fill="none" stroke="rgba(255,213,79,.3)" stroke-width=".6"/><animate attributeName="opacity" values=".15;.4;.15" dur="3s" repeatCount="indefinite"/>'
+'<animateTransform attributeName="transform" type="translate" values="0,0;0,-5;0,0" dur="3s" repeatCount="indefinite"/></g>'
+'</svg>',
'<svg viewBox="0 0 300 60" fill="none">'
+'<g><animateTransform attributeName="transform" type="rotate" values="-3,80,0;3,80,0;-3,80,0" dur="3s" repeatCount="indefinite"/>'
+'<line x1="80" y1="0" x2="80" y2="22" stroke="rgba(255,213,79,.15)" stroke-width=".5"/>'
+'<rect x="72" y="22" width="16" height="18" rx="8" fill="rgba(255,213,79,.1)" stroke="rgba(255,213,79,.25)" stroke-width=".6"/>'
+'<circle cx="80" cy="31" r="2" fill="rgba(255,213,79,.2)"><animate attributeName="opacity" values=".2;.5;.2" dur="2s" repeatCount="indefinite"/></circle></g>'
+'<g><animateTransform attributeName="transform" type="rotate" values="2,180,0;-2,180,0;2,180,0" dur="3.5s" repeatCount="indefinite"/>'
+'<line x1="180" y1="0" x2="180" y2="18" stroke="rgba(255,213,79,.12)" stroke-width=".5"/>'
+'<rect x="173" y="18" width="14" height="16" rx="7" fill="rgba(255,213,79,.08)" stroke="rgba(255,213,79,.2)" stroke-width=".6"/>'
+'<circle cx="180" cy="26" r="1.5" fill="rgba(255,213,79,.15)"><animate attributeName="opacity" values=".15;.4;.15" dur="2.5s" repeatCount="indefinite"/></circle></g>'
+'<g><animateTransform attributeName="transform" type="rotate" values="-2,260,0;3,260,0;-2,260,0" dur="4s" repeatCount="indefinite"/>'
+'<line x1="260" y1="0" x2="260" y2="15" stroke="rgba(255,213,79,.1)" stroke-width=".5"/>'
+'<rect x="254" y="15" width="12" height="14" rx="6" fill="rgba(255,213,79,.06)" stroke="rgba(255,213,79,.15)" stroke-width=".5"/></g>'
+'</svg>',
'<svg viewBox="0 0 300 60" fill="none">'
+'<path d="M0 48 Q75 42 150 48 Q225 42 300 48" stroke="rgba(110,231,183,.08)" stroke-width=".5" fill="none"/>'
+'<g><animateTransform attributeName="transform" type="translate" values="-30,0;330,0" dur="6s" repeatCount="indefinite"/>'
+'<ellipse cx="0" cy="38" rx="8" ry="6" fill="rgba(110,231,183,.15)" stroke="rgba(110,231,183,.3)" stroke-width=".6"/>'
+'<circle cx="7" cy="32" r="5" fill="rgba(110,231,183,.12)" stroke="rgba(110,231,183,.25)" stroke-width=".6"/>'
+'<ellipse cx="5" cy="22" rx="2" ry="6" fill="rgba(110,231,183,.1)" stroke="rgba(110,231,183,.2)" stroke-width=".4" transform="rotate(-10,5,22)"/>'
+'<ellipse cx="9" cy="23" rx="2" ry="5.5" fill="rgba(110,231,183,.1)" stroke="rgba(110,231,183,.2)" stroke-width=".4" transform="rotate(10,9,23)"/>'
+'<circle cx="9" cy="31" r="1" fill="rgba(110,231,183,.5)"/>'
+'<circle cx="-7" cy="36" r="2.5" fill="rgba(110,231,183,.08)" stroke="rgba(110,231,183,.12)" stroke-width=".4"/>'
+'<animateTransform attributeName="transform" type="translate" values="-30,0;30,-8;90,0;150,-8;210,0;270,-8;330,0" dur="6s" repeatCount="indefinite"/>'
+'</g>'
+'<text x="60" y="50" fill="rgba(110,231,183,.15)" font-size="8">✦</text>'
+'<text x="180" y="45" fill="rgba(110,231,183,.12)" font-size="6">✦</text>'
+'<text x="240" y="50" fill="rgba(110,231,183,.1)" font-size="7">✧</text>'
+'</svg>',
'<svg viewBox="0 0 300 55" fill="none">'
+'<g><animate attributeName="opacity" values="1;1;.3;0" dur="3s" repeatCount="indefinite"/>'
+'<path d="M110 12 Q110 42 150 45 Q190 42 190 12" fill="rgba(255,220,200,.15)" stroke="rgba(255,200,180,.7)" stroke-width="2" stroke-linecap="round"/>'
+'<line x1="104" y1="12" x2="196" y2="12" stroke="rgba(255,200,180,.6)" stroke-width="1.5" stroke-linecap="round"/></g>'
+'<g><animate attributeName="opacity" values="0;0;1;.6" dur="3s" repeatCount="indefinite"/>'
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;-20,-14" dur="1.5s" repeatCount="indefinite"/>'
+'<path d="M128 18 L116 12 L123 7 Z" fill="rgba(255,200,180,.35)" stroke="rgba(255,200,180,.7)" stroke-width=".8"/></g>'
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;3,-20" dur="1.3s" repeatCount="indefinite"/>'
+'<path d="M146 16 L154 4 L160 16 Z" fill="rgba(255,200,180,.35)" stroke="rgba(255,200,180,.7)" stroke-width=".8"/></g>'
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;18,-12" dur="1.6s" repeatCount="indefinite"/>'
+'<path d="M172 18 L184 10 L180 20 Z" fill="rgba(255,200,180,.3)" stroke="rgba(255,200,180,.6)" stroke-width=".7"/></g>'
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;-14,10" dur="1.4s" repeatCount="indefinite"/>'
+'<path d="M122 34 L112 38 L118 44 Z" fill="rgba(255,200,180,.25)" stroke="rgba(255,200,180,.5)" stroke-width=".6"/></g>'
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;15,9" dur="1.7s" repeatCount="indefinite"/>'
+'<path d="M178 34 L188 38 L182 44 Z" fill="rgba(255,200,180,.25)" stroke="rgba(255,200,180,.5)" stroke-width=".6"/></g></g>'
+'</svg>',
'<svg viewBox="0 0 300 70" fill="none">'
// Dragon shadow on ground
+'<ellipse cx="0" cy="64" rx="28" ry="3" fill="rgba(255,213,79,.05)"><animateTransform attributeName="transform" type="translate" values="-80,0;340,0" dur="10s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;.07;.07;0" dur="10s" repeatCount="indefinite"/></ellipse>'
// === DRAGON — filled body with mass, diagonal glide ===
+'<g><animateTransform attributeName="transform" type="translate" values="-100,10;340,-8" dur="10s" repeatCount="indefinite"/>'
// Body — FILLED ribbon shape (top + bottom curves) giving real width
+'<path d="M-8 24 C0 16,10 16,18 22 C26 28,30 30,38 24 C46 18,50 16,58 20 C62 22,66 21,70 18 L72 22 C68 26,64 28,58 28 C50 32,46 34,38 32 C30 38,26 36,18 30 C10 24,0 24,-8 30 Z" fill="rgba(255,213,79,.06)" stroke="rgba(255,213,79,.3)" stroke-width="1">'
+'<animate attributeName="d" values="M-8 24 C0 16,10 16,18 22 C26 28,30 30,38 24 C46 18,50 16,58 20 C62 22,66 21,70 18 L72 22 C68 26,64 28,58 28 C50 32,46 34,38 32 C30 38,26 36,18 30 C10 24,0 24,-8 30 Z;M-8 28 C0 34,10 34,18 28 C26 22,30 20,38 26 C46 32,50 34,58 30 C62 28,66 26,70 22 L72 26 C68 30,64 32,58 36 C50 38,46 36,38 34 C30 28,26 26,18 32 C10 36,0 36,-8 32 Z;M-8 24 C0 16,10 16,18 22 C26 28,30 30,38 24 C46 18,50 16,58 20 C62 22,66 21,70 18 L72 22 C68 26,64 28,58 28 C50 32,46 34,38 32 C30 38,26 36,18 30 C10 24,0 24,-8 30 Z" dur="2s" repeatCount="indefinite"/></path>'
// Scales along spine — small V shapes
+'<g stroke="rgba(255,213,79,.15)" stroke-width=".5" fill="none"><path d="M6 19 L9 15 L12 19"><animate attributeName="d" values="M6 19 L9 15 L12 19;M6 27 L9 31 L12 27;M6 19 L9 15 L12 19" dur="2s" repeatCount="indefinite"/></path>'
+'<path d="M22 24 L25 20 L28 24"><animate attributeName="d" values="M22 24 L25 20 L28 24;M22 24 L25 20 L28 24;M22 24 L25 20 L28 24" dur="2s" repeatCount="indefinite"/></path>'
+'<path d="M38 20 L41 16 L44 20"><animate attributeName="d" values="M38 20 L41 16 L44 20;M38 28 L41 32 L44 28;M38 20 L41 16 L44 20" dur="2s" repeatCount="indefinite"/></path>'
+'<path d="M52 18 L55 14 L58 18"/></g>'
// 4 legs with claws
+'<g stroke="rgba(255,213,79,.2)" stroke-width=".8" fill="none" stroke-linecap="round">'
+'<path d="M14 28 L12 38 L10 39 M12 38 L14 39.5"/>'
+'<path d="M26 32 L24 40 L22 41 M24 40 L26 41.5"/>'
+'<path d="M42 30 L40 39 L38 40 M40 39 L42 40.5"/>'
+'<path d="M56 26 L54 36 L52 37 M54 36 L56 37.5"/></g>'
// Dragon head — angular snout with jaw, brow ridge
+'<path d="M70 18 L78 14 L84 16 L86 20 L84 24 L78 25 L72 22 Z" fill="rgba(255,213,79,.08)" stroke="rgba(255,213,79,.35)" stroke-width="1" stroke-linejoin="round"/>'
// Lower jaw
+'<path d="M72 22 L78 25 L84 24 L82 27 L76 28 L72 25" fill="rgba(255,213,79,.04)" stroke="rgba(255,213,79,.25)" stroke-width=".6" stroke-linejoin="round"/>'
// Brow ridge
+'<path d="M73 18 L78 15 L82 16" stroke="rgba(255,213,79,.3)" stroke-width=".8" fill="none" stroke-linecap="round"/>'
// Eyes — fierce
+'<circle cx="77" cy="18" r="1.5" fill="rgba(255,213,79,.8)"><animate attributeName="r" values="1.5;1;1.5" dur="3s" repeatCount="indefinite"/></circle>'
+'<circle cx="77" cy="18" r=".5" fill="rgba(180,50,0,.6)"/>'
// Horns — swept back, branching
+'<path d="M74 15 L70 8 L68 4 M70 8 L72 5" stroke="rgba(255,213,79,.25)" stroke-width=".8" fill="none" stroke-linecap="round"/>'
+'<path d="M78 14 L78 6 L76 2 M78 6 L80 3" stroke="rgba(255,213,79,.25)" stroke-width=".8" fill="none" stroke-linecap="round"/>'
// Whiskers — long, flowing
+'<path d="M85 18 Q92 12 100 10" stroke="rgba(255,213,79,.2)" stroke-width=".5" fill="none"><animate attributeName="d" values="M85 18 Q92 12 100 10;M85 18 Q94 14 102 14;M85 18 Q92 12 100 10" dur="2.5s" repeatCount="indefinite"/></path>'
+'<path d="M85 22 Q92 20 100 16" stroke="rgba(255,213,79,.15)" stroke-width=".4" fill="none"><animate attributeName="d" values="M85 22 Q92 20 100 16;M85 22 Q94 22 102 20;M85 22 Q92 20 100 16" dur="2.5s" repeatCount="indefinite"/></path>'
// Beard tendrils under jaw
+'<path d="M76 28 Q74 34 72 38" stroke="rgba(255,213,79,.12)" stroke-width=".4" fill="none"><animate attributeName="d" values="M76 28 Q74 34 72 38;M76 28 Q72 34 70 36;M76 28 Q74 34 72 38" dur="3s" repeatCount="indefinite"/></path>'
// Tail — flame tuft
+'<path d="M-8 27 Q-14 22 -18 16 Q-16 20 -22 18 Q-18 24 -14 28" stroke="rgba(255,213,79,.2)" stroke-width=".8" fill="rgba(255,213,79,.04)"><animate attributeName="d" values="M-8 27 Q-14 22 -18 16 Q-16 20 -22 18 Q-18 24 -14 28;M-8 30 Q-14 34 -18 40 Q-16 36 -22 38 Q-18 32 -14 28;M-8 27 Q-14 22 -18 16 Q-16 20 -22 18 Q-18 24 -14 28" dur="2s" repeatCount="indefinite"/></path>'
// Cloud wisps
+'<g opacity=".12"><ellipse cx="20" cy="36" rx="7" ry="3" fill="rgba(255,255,255,.06)"><animate attributeName="rx" values="7;9;7" dur="2.2s" repeatCount="indefinite"/></ellipse>'
+'<ellipse cx="48" cy="34" rx="5" ry="2.5" fill="rgba(255,255,255,.05)"><animate attributeName="rx" values="5;7;5" dur="2.8s" repeatCount="indefinite"/></ellipse></g>'
+'</g>'
// === FOX with monocle — sits below dragon path ===
+'<g><animateTransform attributeName="transform" type="translate" values="-60,0;370,0" dur="12s" repeatCount="indefinite"/>'
// Fox body — sitting pose
+'<ellipse cx="0" cy="52" rx="7" ry="5" fill="rgba(255,180,100,.06)" stroke="rgba(255,180,100,.2)" stroke-width=".7"/>'
// Fox head
+'<circle cx="6" cy="44" r="4.5" fill="rgba(255,180,100,.06)" stroke="rgba(255,180,100,.22)" stroke-width=".7"/>'
// Ears — pointed triangles
+'<path d="M3 40 L1.5 34 L5 38" fill="rgba(255,180,100,.08)" stroke="rgba(255,180,100,.2)" stroke-width=".5"/>'
+'<path d="M8 39 L9.5 33 L6.5 37.5" fill="rgba(255,180,100,.08)" stroke="rgba(255,180,100,.2)" stroke-width=".5"/>'
// Inner ears
+'<path d="M3.2 39.5 L2.2 35.5 L4.5 38.2" fill="rgba(255,140,60,.06)"/>'
+'<path d="M7.8 38.8 L8.8 34 L7 37.8" fill="rgba(255,140,60,.06)"/>'
// Snout
+'<path d="M10 44 L13 43 L10 46" fill="rgba(255,200,150,.06)" stroke="rgba(255,180,100,.18)" stroke-width=".4" stroke-linejoin="round"/>'
// Nose
+'<circle cx="12.5" cy="43.5" r=".8" fill="rgba(80,40,20,.25)"/>'
// Eye (the one without monocle)
+'<circle cx="5" cy="43" r=".7" fill="rgba(80,40,20,.3)"/>'
// Monocle eye — circle lens + handle
+'<circle cx="8.5" cy="42.5" r="2.2" fill="none" stroke="rgba(255,213,79,.35)" stroke-width=".5"/>'
+'<circle cx="8.5" cy="42.5" r=".6" fill="rgba(80,40,20,.3)"/>'
// Monocle handle/chain hanging down
+'<path d="M10.5 43.8 L12 48 L10 52" stroke="rgba(255,213,79,.2)" stroke-width=".3" fill="none"/>'
// Monocle glint
+'<circle cx="7.8" cy="41.8" r=".4" fill="rgba(255,255,255,.2)"><animate attributeName="opacity" values=".1;.3;.1" dur="2s" repeatCount="indefinite"/></circle>'
// Bushy tail — curled up
+'<path d="M-7 50 Q-10 44 -6 40 Q-3 38 -2 42 Q-1 46 -4 50" fill="rgba(255,180,100,.06)" stroke="rgba(255,180,100,.18)" stroke-width=".5"/>'
// White tail tip
+'<path d="M-6 40 Q-4 38 -2 42" stroke="rgba(255,240,220,.15)" stroke-width=".8" fill="none"/>'
// Front legs
+'<line x1="3" y1="55" x2="3" y2="60" stroke="rgba(255,180,100,.15)" stroke-width=".6" stroke-linecap="round"/>'
+'<line x1="6" y1="55" x2="6" y2="60" stroke="rgba(255,180,100,.15)" stroke-width=".6" stroke-linecap="round"/>'
// Fox shadow
+'<ellipse cx="0" cy="61" rx="8" ry="1.5" fill="rgba(255,180,100,.03)"/>'
+'</g>'
+'</svg>',
'<svg viewBox="0 0 300 60" fill="none">'
+'<ellipse cx="150" cy="45" rx="80" ry="4" fill="none" stroke="rgba(255,213,79,.1)" stroke-width=".5"><animate attributeName="rx" values="80;90;80" dur="3s" repeatCount="indefinite"/><animate attributeName="opacity" values=".3;.1;.3" dur="3s" repeatCount="indefinite"/></ellipse>'
+'<ellipse cx="150" cy="45" rx="50" ry="3" fill="none" stroke="rgba(255,213,79,.15)" stroke-width=".5"><animate attributeName="rx" values="50;60;50" dur="2.5s" repeatCount="indefinite"/><animate attributeName="opacity" values=".25;.08;.25" dur="2.5s" repeatCount="indefinite"/></ellipse>'
+'<circle cx="150" cy="30" r="10" fill="rgba(255,213,79,.04)" stroke="rgba(255,213,79,.1)" stroke-width=".5"><animate attributeName="r" values="10;12;10" dur="4s" repeatCount="indefinite"/></circle>'
+'</svg>',
'<svg viewBox="0 0 300 60" fill="none">'
+'<g opacity=".3"><animate attributeName="opacity" values=".15;.4;.15" dur="2s" repeatCount="indefinite"/>'
+'<rect x="130" y="5" width="40" height="52" rx="20 20 3 3" fill="none" stroke="rgba(233,213,255,.4)" stroke-width="1"/>'
+'<circle cx="162" cy="32" r="2" fill="rgba(233,213,255,.3)"/>'
+'<line x1="150" y1="57" x2="150" y2="60" stroke="rgba(233,213,255,.15)" stroke-width="30"/></g>'
+'</svg>',
'<svg viewBox="0 0 300 60" fill="none">'
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="2s" repeatCount="indefinite"/>'
+'<rect x="120" y="38" width="8" height="12" rx="4" fill="rgba(255,213,79,.1)" stroke="rgba(255,213,79,.2)" stroke-width=".5"/></g>'
+'<g><animateTransform attributeName="transform" type="translate" values="0,0;0,-3;0,0" dur="2.3s" repeatCount="indefinite"/>'
+'<rect x="170" y="36" width="9" height="13" rx="4.5" fill="rgba(255,213,79,.12)" stroke="rgba(255,213,79,.25)" stroke-width=".5"/></g>'
+'<g><animate attributeName="opacity" values="0;.5;0" dur="2s" repeatCount="indefinite"/><animateTransform attributeName="transform" type="translate" values="0,0;0,-18" dur="2s" repeatCount="indefinite"/>'
+'<text x="124" y="38" fill="rgba(255,213,79,.4)" font-size="6">✦</text></g>'
+'<g><animate attributeName="opacity" values="0;.4;0" dur="2.5s" repeatCount="indefinite"/><animateTransform attributeName="transform" type="translate" values="0,0;0,-20" dur="2.5s" repeatCount="indefinite"/>'
+'<text x="175" y="36" fill="rgba(255,213,79,.35)" font-size="5">✧</text></g>'
+'</svg>'];
var Q=[
{l:"Scene I \u2014 The Celestial Gates",bg:"linear-gradient(170deg,#06091E,#0E1242 50%,#181060)",p:["\u2726","\u2727","\u00B7","\u2726"],
 st:["The moon hangs impossibly close tonight.","A jade staircase materialises before you, spiralling through clouds of <em>osmanthus</em>.","The Celestial Gates shimmer open. A golden invitation floats into your hands:","<em>\u201CChang\u2019e requests your presence at the Mid-Autumn Feast.\u201D</em>"],
 pr:"It\u2019s the night of the feast. How are you deciding where to dine?",
 ch:[{i:"\uD83D\uDD0D",t:"I researched the best celestial kitchen days ago",s:[0,0,0,0,2,0,0,0,0]},{i:"\uD83C\uDF1F",t:"Somewhere I\u2019ve never been \u2014 surprise me!",s:[0,0,0,0,0,0,2,0,0]},{i:"\uD83C\uDFEE",t:"The same palace I always visit. Why change?",s:[0,0,0,0,0,2,0,0,0]},{i:"\uD83D\uDCAB",t:"Wherever the most impressive spirits gather",s:[0,0,2,0,0,0,0,0,0]},{i:"\uD83E\uDD37",t:"I\u2019ll go wherever my friends are going",s:[0,1,0,0,0,0,0,0,2]}]},
{l:"Scene II \u2014 The Grand Hall",bg:"linear-gradient(170deg,#0A0818,#161040 50%,#221860)",p:["\uD83C\uDF1F","\u2726","\u00B7","\u2727"],
 st:["The gates part like a breath, and you step inside.","The Moon Palace unfolds \u2014 walls of liquid jade, lanterns humming old melodies, floors rippling like dark water.","Everything glows from within, the way Lunaria was always meant to."],
 pr:"What\u2019s the first thing you notice?",
 ch:[{i:"\u2728",t:"Whether the palace is pristine and the details are perfect",s:[2,0,0,0,0,0,0,0,0]},{i:"\uD83C\uDFA8",t:"The atmosphere \u2014 the light, the music, the soul",s:[0,0,0,2,0,0,0,0,0]},{i:"\uD83D\uDC65",t:"Whether the other guests seem happy and comfortable",s:[0,2,0,0,0,0,0,0,1]},{i:"\uD83D\uDCDC",t:"The feast menu \u2014 already scanning for the good stuff",s:[0,0,0,0,0,0,2,1,0]},{i:"\uD83D\uDC40",t:"Who else was invited. Is this the right crowd?",s:[0,0,2,0,0,0,0,0,0]}]},
{l:"Scene III \u2014 The Celestial Kitchen",bg:"linear-gradient(170deg,#0A1E1C,#0E2E28 50%,#163A30)",p:["\uD83E\uDD62","\u2726","\u00B7","\uD83C\uDF3F"],
 st:["The Jade Rabbit scurries past, arms full of star anise and moonflower petals.","You follow it through a curtain of steam into the Celestial Kitchen \u2014 copper woks, jade cleavers, flames burning in seven colours.","Wu Gang turns to you: <em>\u201CEvery guest must contribute one dish. Choose wisely.\u201D</em>"],
 pr:"The table is ordering. What\u2019s your move?",
 ch:[{i:"\uD83D\uDC51",t:"I\u2019ll decide for everyone. I know what\u2019s good.",s:[0,0,0,0,0,0,0,2,0]},{i:"\uD83C\uDF31",t:"The most responsibly sourced, perfectly balanced option",s:[2,0,0,0,0,0,0,0,0]},{i:"\uD83C\uDF7D\uFE0F",t:"Something nobody else would dare to pick",s:[0,0,0,2,0,0,0,0,0]},{i:"\uD83D\uDE0B",t:"A bit of everything! Let\u2019s share the whole menu",s:[0,0,0,0,0,0,2,0,0]},{i:"\uD83D\uDC4D",t:"Same as my friend. What are you getting?",s:[0,0,0,0,0,1,0,0,2]}]},
{l:"Scene IV \u2014 The Fallen Dish",bg:"linear-gradient(170deg,#1A0808,#2E1212 50%,#3A1818)",p:["\u2726","\u00B7","\u2727","\u2726"],
 st:["A thunderclap of porcelain.","<em>Your</em> dish shatters across the jade floor. A hundred eyes turn toward you."],
 pr:"The kitchen gets your order completely wrong. You\u2026",
 ch:[{i:"\u270B",t:"Send it back. Politely, firmly. Standards matter.",s:[2,0,0,0,0,0,0,0,0]},{i:"\uD83D\uDE05",t:"Eat it anyway. I don\u2019t want to make a scene.",s:[0,0,0,0,0,0,0,0,2]},{i:"\uD83D\uDE24",t:"Flag it immediately. I\u2019m a guest of the Moon Goddess.",s:[0,0,0,0,0,0,0,2,0]},{i:"\uD83E\uDD37",t:"Shrug and laugh. There\u2019s always dessert!",s:[0,0,0,0,0,0,2,1,0]},{i:"\uD83D\uDCDD",t:"Quietly note it. I\u2019ll leave a detailed review later.",s:[0,0,0,0,2,0,0,0,0]}]},
{l:"Scene V \u2014 The Banquet Table",bg:"linear-gradient(170deg,#0E0A28,#1A1545 50%,#2D1E6B)",p:["\uD83E\uDD42","\u2726","\u00B7","\u2727"],
 st:["The crisis passes. Laughter returns.","You take your seat at the crescent table. A dragon spirit argues about chilli oil. A fox reads the wine list with a magnifying glass.","Chang\u2019e raises a cup: <em>\u201CShow me who you are at the table.\u201D</em>"],
 pr:"At a group dinner, you naturally become\u2026",
 ch:[{i:"\uD83C\uDF7E",t:"The host \u2014 refilling cups, checking everyone\u2019s happy",s:[0,2,0,0,0,0,0,0,0]},{i:"\uD83C\uDFA4",t:"The entertainer \u2014 stories, energy, keeping spirits high!",s:[0,0,1,0,0,0,2,0,0]},{i:"\uD83E\uDD1D",t:"The commander \u2014 I picked this place, follow my lead",s:[0,0,0,0,0,0,0,2,0]},{i:"\uD83D\uDE0C",t:"The deep talker \u2014 one real conversation, one person",s:[0,0,0,2,1,0,0,0,0]},{i:"\u262E\uFE0F",t:"The peacemaker \u2014 making sure nobody argues",s:[0,0,0,0,0,0,0,0,2]}]},
{l:"Scene VI \u2014 Chang\u2019e\u2019s Question",bg:"linear-gradient(170deg,#14100A,#2A1E0E 50%,#3A2A14)",p:["\uD83C\uDF15","\u2726","\u00B7","\u2727"],
 st:["Chang\u2019e rises \u2014 nine feet tall, robes of liquid starlight, eyes that have watched ten thousand Mid-Autumns.","She walks to your end of the table. The room holds its breath.","Her voice is like moonlight on still water: <em>\u201CWhat makes a feast truly legendary?\u201D</em>"],
 pr:"What makes a restaurant experience truly legendary?",
 ch:[{i:"\uD83C\uDF31",t:"When the food is ethically sourced and thoughtfully made",s:[2,0,0,0,1,0,0,0,0]},{i:"\uD83D\uDE02",t:"When everyone at the table is laughing and connected",s:[0,2,0,0,0,0,0,0,1]},{i:"\uD83D\uDCAB",t:"When the place is exclusive, impressive, unforgettable",s:[0,0,2,0,0,0,0,0,0]},{i:"\uD83C\uDFB6",t:"When it has soul \u2014 ambiance, story, creativity",s:[0,0,0,2,0,0,0,0,0]},{i:"\uD83C\uDF86",t:"When every dish surprises you and there\u2019s always more",s:[0,0,0,0,0,0,2,0,0]}]},
{l:"Scene VII \u2014 The Mysterious Door",bg:"linear-gradient(170deg,#1A0A2E,#2D1545 50%,#3A1A4A)",p:["\uD83D\uDD2E","\u2726","\u00B7","\u2727"],
 st:["A door appears in the wall that wasn\u2019t there a moment ago.","It glows faintly \u2014 the colour of a question you haven\u2019t asked yet.","A voice whispers: <em>\u201CA friend has invited you somewhere you\u2019ve never been.\u201D</em>","The door handle is warm."],
 pr:"A friend invites you somewhere unknown. First thought?",
 ch:[{i:"\uD83D\uDE0D",t:"YES! New places are the best part of any adventure",s:[0,0,0,0,0,0,2,0,0]},{i:"\uD83D\uDD0E",t:"Let me investigate what\u2019s behind this door first\u2026",s:[0,0,0,0,1,2,0,0,0]},{i:"\uD83E\uDD17",t:"I\u2019m happy anywhere as long as we go together",s:[0,1,0,0,0,0,0,0,2]},{i:"\uD83E\uDD28",t:"Intrigued \u2014 but only if it\u2019s somewhere truly unique",s:[0,0,0,2,0,0,0,0,0]},{i:"\uD83D\uDCAA",t:"I\u2019ll open it. But I might redirect us somewhere better.",s:[0,0,1,0,0,0,0,2,0]}]},
{l:"Scene VIII \u2014 The Final Toast",bg:"linear-gradient(170deg,#08101E,#0F1842 50%,#1A1240)",p:["\uD83C\uDF1D","\u2726","\u00B7","\u2727"],
 st:["The moon reaches its zenith.","You step onto the Palace balcony. Below, the earth glows blue-green. Above, a sky of spilled light.","The Jade Rabbit whispers: <em>\u201CThe feast is ending. But how it ends reveals everything about who you are.\u201D</em>"],
 pr:"After a truly perfect meal, you\u2019re most likely to\u2026",
 ch:[{i:"\uD83D\uDCDD",t:"Tell the chef exactly what was excellent. In detail.",s:[2,0,0,0,0,0,0,1,0]},{i:"\uD83D\uDCF8",t:"Tell everyone about this place. They need to know.",s:[0,0,2,0,0,0,1,0,0]},{i:"\uD83D\uDE0C",t:"Sit back. Feel content. Soak in the moment.",s:[0,0,0,0,0,0,0,0,2]},{i:"\u2764\uFE0F",t:"Plan when I can bring someone I love here",s:[0,2,0,0,0,1,0,0,0]},{i:"\uD83C\uDFA8",t:"Reflect on how the whole experience made me feel",s:[0,0,0,2,1,0,0,0,0]}]}
];
var TST=new URLSearchParams(location.search).get("test")==="true";
var qi=0,sc=[0,0,0,0,0,0,0,0,0],ic=[],sbuf=0,lk=false,t0=Date.now();
(function(){
  if(TST){var tp=document.getElementById("tst");tp.classList.add("on");
    ["Magistrate","Mother","Phoenix","Poet","Cartographer","Lantern","Rabbit","Dragon","Cloud"].forEach(function(n,i){var b=document.createElement("button");b.className="tb";b.textContent=n;b.onclick=function(){jumpTo(i)};tp.appendChild(b)})}
  spawnP(["\u2726","\u2727","\u00B7","\u2726"]);
})();
function spawnP(c){var b=document.getElementById("pBox");b.innerHTML="";for(var i=0;i<18;i++){var p=document.createElement("div");p.className="pt";p.textContent=c[i%c.length];p.style.left=(Math.random()*88+6)+"%";p.style.bottom=-(Math.random()*25)+"%";p.style.fontSize=(7+Math.random()*9)+"px";p.style.animationDuration=(6+Math.random()*4)+"s";p.style.animationDelay=(Math.random()*3)+"s";b.appendChild(p)}}
function flash(type){if(!type)return;var f=document.getElementById("flash");f.className="flash";void f.offsetWidth;f.classList.add(type)}
function go(id,eClass,bg,exitType){
  if(lk)return;lk=true;
  var ex=exitType||'exit';
  var all=document.querySelectorAll(".S.on");
  for(var i=0;i<all.length;i++){all[i].classList.add(ex);all[i].classList.remove("on");(function(e){setTimeout(function(){e.className="S"},650)})(all[i])}
  var d=all.length>0?550:30;
  setTimeout(function(){
    if(bg)document.getElementById("modal").style.background=bg;
    var s=document.getElementById("sc-"+id);
    if(s){s.scrollTop=0;s.className="S on e-"+eClass}
    lk=false;
  },d);
}
function startQuiz(){qi=0;sc=[0,0,0,0,0,0,0,0,0];ic=[];sbuf=0;t0=Date.now();pushEv("Story_Started",{});
  go("door","portal","radial-gradient(ellipse at center,#1a1040,#06091E)");
  setTimeout(function(){
    var dw=document.getElementById("doorWrap");dw.classList.add("doors-opening");
    var stars=dw.querySelectorAll(".door-star");
    for(var i=0;i<stars.length;i++){stars[i].style.animationDelay=(0.5+i*0.15)+"s";stars[i].style.animationDuration=".6s"}
  },500);
  setTimeout(function(){showStory(0)},2200);
}
function showStory(idx){
  var q=Q[idx];
  var sid="s"+(sbuf?"b":"a");
  var el=document.getElementById("sc-"+sid);
  el.style.background=q.bg;
  var pg=document.getElementById("pg-"+sid);pg.innerHTML="";
  for(var i=0;i<Q.length;i++){var d=document.createElement("div");d.className="pd"+(i<qi?" lit":"");pg.appendChild(d)}
  var h='<div class="sf-in">';
  h+='<div class="sl" id="sl-'+sid+'">'+q.l+'</div>';
  h+='<div class="aw" id="aw-'+sid+'">'+ART[idx]+'</div>';
  h+='<div class="av '+AV[idx]+(idx%2?' av-r':'')+'" id="av-'+sid+'">'+AVATAR+'</div>';
  h+='<div class="nar" id="nr-'+sid+'">';
  for(var j=0;j<q.st.length;j++) h+='<span class="nl">'+q.st[j]+'</span>';
  h+='</div>';
  h+='<div class="si" id="si-'+sid+'">'+SILL[idx]+'</div>';
  h+='<button class="bc" id="bc-'+sid+'" onclick="toQuestion()">Continue your journey \u203A</button>';
  // Scene IV shatter overlay
  if(idx===3){
    h+='<div class="shatter-ovl" id="shatter-'+sid+'">'
    +'<svg viewBox="0 0 200 300" fill="none">'
    // Bowl at center — intact then cracks
    +'<g class="sh-bowl"><path d="M70 140 Q70 170 100 175 Q130 170 130 140" fill="rgba(255,230,210,.08)" stroke="rgba(255,230,210,.25)" stroke-width="1.2"/>'
    +'<line x1="65" y1="140" x2="135" y2="140" stroke="rgba(255,230,210,.2)" stroke-width="1"/>'
    // Crack lines across bowl
    +'<path d="M100 140 L95 160 L88 175" stroke="rgba(255,200,180,.3)" stroke-width=".6" class="sh-crack"/>'
    +'<path d="M100 140 L108 155 L115 170" stroke="rgba(255,200,180,.25)" stroke-width=".5" class="sh-crack"/></g>'
    // Flying shards
    +'<path class="sh-shard sh-s1" d="M85 155 L78 148 L82 160 Z" fill="rgba(255,220,200,.12)" stroke="rgba(255,220,200,.2)" stroke-width=".5"/>'
    +'<path class="sh-shard sh-s2" d="M115 150 L122 143 L118 158 Z" fill="rgba(255,220,200,.1)" stroke="rgba(255,220,200,.18)" stroke-width=".4"/>'
    +'<path class="sh-shard sh-s3" d="M95 170 L88 178 L98 176 Z" fill="rgba(255,220,200,.08)" stroke="rgba(255,220,200,.15)" stroke-width=".4"/>'
    +'<path class="sh-shard sh-s4" d="M110 168 L118 176 L108 174 Z" fill="rgba(255,220,200,.1)" stroke="rgba(255,220,200,.16)" stroke-width=".4"/>'
    +'<path class="sh-shard sh-s5" d="M100 178 L96 188 L104 188 Z" fill="rgba(255,220,200,.06)" stroke="rgba(255,220,200,.12)" stroke-width=".3"/>'
    // Impact dust ring
    +'<ellipse class="sh-dust" cx="100" cy="175" rx="8" ry="3" fill="rgba(255,220,200,.06)"/>'
    +'</svg></div>';
  }
  h+='</div>';
  document.getElementById("sf-"+sid).innerHTML=h;
  spawnP(q.p);
  flash(FL[idx]);
  // Exit type pairs with entrance for dramatic continuity
  var STORY_EXIT=['exit-dissolve','exit-left','exit-down','exit-dissolve','exit-dissolve','exit-dissolve','exit-dissolve','exit-down'];
  go(sid,ET[idx],q.bg,STORY_EXIT[idx]);
  setTimeout(function(){
    var base=0;
    var sl=document.getElementById("sl-"+sid);if(sl){setTimeout(function(){sl.classList.add("show")},base);base+=200}
    var aw=document.getElementById("aw-"+sid);if(aw){setTimeout(function(){aw.classList.add("show")},base);base+=400}
    var lines=document.getElementById("nr-"+sid);
    if(lines){var nl=lines.querySelectorAll(".nl");for(var i=0;i<nl.length;i++){(function(l,d){setTimeout(function(){l.classList.add("show")},d)})(nl[i],base+i*380)}base+=nl.length*380+150}
    // Scene IV (idx 3) — porcelain shatter moment after last narration line
    if(idx===3){
      var shatterTime=base-80;
      setTimeout(function(){
        // Screen shake
        var m=document.getElementById("modal");m.classList.add("shake");
        setTimeout(function(){m.classList.remove("shake")},600);
        // Vibrate
        try{navigator.vibrate([40,30,60])}catch(e){}
        // Show shatter overlay
        var shEl=document.getElementById("shatter-"+sid);
        if(shEl)shEl.classList.add("show");
      },shatterTime);
    }
    var si=document.getElementById("si-"+sid);if(si)setTimeout(function(){si.classList.add("show")},base-80);
    var bc=document.getElementById("bc-"+sid);if(bc)setTimeout(function(){bc.classList.add("show")},base+50);
  },420);
}
function toQuestion(){
  if(lk)return;
  showQuestion(qi);
}
function showQuestion(qIdx){
  var q=Q[qIdx];
  var qid="q"+(sbuf?"b":"a"); // question buffer: qa or qb
  var QT=['dissolve','slideLeft','petalFall','fallDown','breatheIn','riseUp','zoomIn','rise'];
  var CHDIR=['','ch-left','ch-right','','ch-scale','ch-left','ch-right','ch-scale'];
  var el=document.getElementById("sc-"+qid);
  // Scene-specific question background with radial glow overlays
  var qbg=[
    'radial-gradient(ellipse at 20% 30%,rgba(255,213,79,.04) 0%,transparent 50%),',
    'radial-gradient(ellipse at 50% 85%,rgba(147,197,253,.05) 0%,transparent 35%),',
    'radial-gradient(ellipse at 40% 40%,rgba(255,140,180,.04) 0%,transparent 40%),radial-gradient(ellipse at 70% 70%,rgba(110,231,183,.03) 0%,transparent 40%),',
    'radial-gradient(ellipse at 50% 40%,rgba(252,165,165,.04) 0%,transparent 35%),',
    'radial-gradient(ellipse at 50% 50%,rgba(196,181,253,.04) 0%,transparent 40%),',
    'radial-gradient(ellipse at 50% 70%,rgba(255,213,79,.05) 0%,transparent 30%),',
    'radial-gradient(ellipse at 50% 50%,rgba(233,213,255,.04) 0%,transparent 35%),',
    'radial-gradient(ellipse at 40% 40%,rgba(255,213,79,.03) 0%,transparent 30%),radial-gradient(ellipse at 70% 60%,rgba(255,213,79,.03) 0%,transparent 30%),'
  ];
  el.style.background=qbg[qi]+q.bg;
  var pg=document.getElementById("pg-"+qid);pg.innerHTML="";
  for(var i=0;i<Q.length;i++){var d=document.createElement("div");d.className="pd"+(i<qi?" lit":"");pg.appendChild(d)}
  var h='<div class="qov" id="qov-'+qid+'">'+QOVL[qi]+'</div>';
  h+='<div class="qf">';
  h+='<div class="qp" id="qp-'+qid+'">'+q.pr+'</div>';
  h+='<div class="q-sub" id="qs-'+qid+'">Choose your path</div>';
  h+='<div class="chs" id="cs-'+qid+'">';
  for(var k=0;k<q.ch.length;k++){
    h+='<button class="ch'+(CHDIR[qi]?' '+CHDIR[qi]:'')+'" data-k="'+k+'">';
    h+='<span class="ci">'+q.ch[k].i+'</span>';
    h+='<span class="cx">'+q.ch[k].t+'</span>';
    h+='<span class="ca">\u203A</span></button>';
  }
  h+='</div></div>';
  // Scene VII: add door transition overlay on top
  if(qi===6){
    h+='<div class="door-trans show" id="dt-'+qid+'">';
    h+='<svg viewBox="0 0 80 140" fill="none">';
    h+='<rect x="10" y="5" width="60" height="130" rx="3" fill="rgba(233,213,255,.04)" stroke="rgba(233,213,255,.25)" stroke-width="1.5"/>';
    h+='<rect x="14" y="9" width="52" height="122" rx="2" fill="none" stroke="rgba(233,213,255,.1)" stroke-width=".5"/>';
    h+='<circle cx="58" cy="72" r="3" fill="rgba(255,213,79,.3)" stroke="rgba(255,213,79,.5)" stroke-width="1"><animate attributeName="r" values="3;4.5;3" dur="1s" repeatCount="indefinite"/></circle>';
    h+='<line x1="40" y1="5" x2="40" y2="135" stroke="rgba(233,213,255,.06)" stroke-width=".5"/>';
    h+='<rect x="10" y="5" width="60" height="130" rx="3" fill="none" stroke="rgba(255,213,79,.12)" stroke-width="2"><animate attributeName="stroke-opacity" values=".12;.35;.12" dur="1.5s" repeatCount="indefinite"/></rect>';
    h+='<g opacity="0"><animate attributeName="opacity" values="0;0;.5;.7" dur="1.6s" fill="freeze"/>';
    h+='<animateTransform attributeName="transform" type="translate" values="12,0;0,0" dur="1s" begin=".5s" fill="freeze"/>';
    h+='<path d="M62 68 Q68 66 72 68 Q76 70 74 74 Q72 76 68 76 L62 75" fill="rgba(255,220,200,.12)" stroke="rgba(255,220,200,.25)" stroke-width=".8" stroke-linecap="round"/></g>';
    h+='</svg>';
    h+='<span class="dt-label">The door beckons\u2026</span>';
    h+='</div>';
  }
  document.getElementById("sf-"+qid).innerHTML=h;
  spawnP(QPAR[qi]);
  go(qid,QT[qi],q.bg,'exit-dissolve');
  // Door scene: delay question reveal by 2.2s
  var qDelay=qi===6?2200:0;
  if(qi===6){setTimeout(function(){var dt=document.getElementById("dt-"+qid);if(dt)dt.classList.add("fade")},1800)}
  setTimeout(function(){var ov=document.getElementById("qov-"+qid);if(ov)ov.classList.add("show")},200+qDelay);
  setTimeout(function(){
    var base=100;
    var qp=document.getElementById("qp-"+qid);if(qp)setTimeout(function(){qp.classList.add("show")},base);base+=220;
    var qs=document.getElementById("qs-"+qid);if(qs)setTimeout(function(){qs.classList.add("show")},base);base+=140;
    var chs=document.getElementById("cs-"+qid).querySelectorAll(".ch");
    var gaps=[0,90,150,230]; // Fibonacci-like acceleration
    for(var j=0;j<chs.length;j++){
      (function(c,d,ci){
        setTimeout(function(){c.classList.add("show")},d);
        c.onclick=function(){pick(ci,Q[qi].ch[ci])};
      })(chs[j],base+gaps[j],j);
    }
  },520+qDelay);
}
function pick(ci,ch){
  if(lk)return;lk=true;
  ic.push(ch.i);
  for(var i=0;i<9;i++)sc[i]+=ch.s[i];
  pushEv("Story_Choice_Made",{question:qi+1,choice_index:ci,choice_text:ch.t.substring(0,50),step:qi+1});
  try{navigator.vibrate(12)}catch(e){}
  // Selection ceremony — glow chosen, fade others
  var qid="q"+(sbuf?"b":"a");
  var chs=document.getElementById("cs-"+qid).querySelectorAll(".ch");
  for(var j=0;j<chs.length;j++){
    if(j===ci){chs[j].classList.add("chosen")}
    else{(function(c,d){setTimeout(function(){c.classList.add("unchosen")},d)})(chs[j],j*60)}
  }
  qi++;
  sbuf=1-sbuf;
  // Delay transition to let selection breathe
  setTimeout(function(){
    lk=false;
    if(qi<Q.length)showStory(qi);else doReveal();
  },650);
}
function doReveal(){
  var sc=document.getElementById("rvStars");sc.innerHTML="";
  var starPos=[{t:"12%",l:"15%",s:36,d:0},{t:"8%",r:"18%",s:32,d:.2},{t:"35%",l:"8%",s:28,d:.35},{t:"30%",r:"10%",s:30,d:.5},{t:"55%",l:"12%",s:26,d:.65},{t:"58%",r:"15%",s:34,d:.8},{t:"78%",l:"20%",s:24,d:.9},{t:"75%",r:"22%",s:28,d:1},{t:"18%",l:"45%",s:22,d:.4},{t:"82%",l:"42%",s:20,d:1.1}];
  starPos.forEach(function(p){
    var s=document.createElement("div");s.className="rv-star";s.textContent=Math.random()>.5?"\u2726":"\u2727";
    s.style.top=p.t;if(p.l)s.style.left=p.l;if(p.r)s.style.right=p.r;
    s.style.fontSize=p.s+"px";s.style.color="rgba(255,213,79,"+(0.3+Math.random()*0.4)+")";
    s.style.animationDelay=p.d+"s";s.style.animationDuration=".7s";
    sc.appendChild(s);
  });
  var rt=document.getElementById("rvT");rt.innerHTML="";
  ["The stars are rearranging\u2026","The moon reads your celestial energy\u2026","Your Diner Spirit awakens."].forEach(function(t,i){var sp=document.createElement("span");sp.textContent=t;sp.style.animationDelay=(0.5+i*.7)+"s";rt.appendChild(sp)});
  go("rv","spot","linear-gradient(170deg,#06091E,#0E0A30 50%,#1A0E40)");
  spawnP(["\u2726","\u2727","\u00B7"]);
  setTimeout(showResult,3000);
}
function showResult(force){
  var ri=0;if(typeof force==="number")ri=force;else{var mx=-1;for(var i=0;i<9;i++){if(sc[i]>mx){mx=sc[i];ri=i}}}
  var r=R[ri];spawnP(r.p);
  var pg=document.getElementById("pg-r");pg.innerHTML="";for(var p=0;p<Q.length;p++){var d=document.createElement("div");d.className="pd lit";pg.appendChild(d)}
  var pb=document.getElementById("rP");pb.innerHTML="";
  for(var j=0;j<ic.length;j++){var sp=document.createElement("span");sp.className="r-st";sp.textContent=ic[j];sp.style.animationDelay=(j*.05)+"s";pb.appendChild(sp);if(j<ic.length-1){var ar=document.createElement("span");ar.className="r-ar";ar.textContent="\u203A";pb.appendChild(ar)}}
  document.getElementById("rCh").innerHTML=CHARS[ri];
  var nm=document.getElementById("rNm");nm.textContent=r.name;nm.style.color=r.color;
  var tg=document.getElementById("rTg");tg.innerHTML="";for(var t=0;t<r.traits.length;t++){var tag=document.createElement("span");tag.className="r-t";tag.textContent=r.traits[t];tag.style.color=r.color;tag.style.border="1px solid "+r.color+"30";tg.appendChild(tag)}
  document.getElementById("rQ").innerHTML=r.quote;document.getElementById("rF").textContent=r.feast;document.getElementById("rMt").textContent=r.match;document.getElementById("rOp").textContent=r.opp;document.getElementById("rOf").textContent=r.offer;document.getElementById("rOs").textContent=r.offerSub;
  document.getElementById("sc-res").style.background=r.bg;
  go("res","ascend",r.bg);
  pushEv("Story_Completed",{outcome:r.id,archetype:r.name,scores:sc.join(","),path:ic.join(" "),time_to_complete:Math.round((Date.now()-t0)/1000)});
}
function shareR(){var ri=0,mx=-1;for(var i=0;i<9;i++){if(sc[i]>mx){mx=sc[i];ri=i}}var r=R[ri];var txt=r.name+"\n"+r.traits.join(" \u00B7 ")+"\n\nDiscover your Diner Spirit on eatigo!\n#EatigoDinerSpirit";pushEv("Story_Shared",{archetype:r.name});if(navigator.share)navigator.share({title:r.name,text:txt}).catch(function(){});else navigator.clipboard.writeText(txt).then(function(){var b=document.querySelector(".bsh");b.textContent="Copied!";setTimeout(function(){b.textContent="Share My Spirit"},2e3)})}
function replay(){pushEv("Story_Replayed",{});sbuf=0;var dw=document.getElementById("doorWrap");if(dw)dw.classList.remove("doors-opening");spawnP(["\u2726","\u2727","\u00B7"]);go("cover","drift","linear-gradient(170deg,#06091E,#0E1242 50%,#1A0E40)")}
function ctaTap(){var ri=0,mx=-1;for(var i=0;i<9;i++){if(sc[i]>mx){mx=sc[i];ri=i}}var r=R[ri];pushEv("Story_CTA_Tapped",{archetype:r.name,offer:r.offer,time_on_modal:Math.round((Date.now()-t0)/1000)});try{if(typeof CleverTap!=="undefined"&&CleverTap.openUrl)CleverTap.openUrl("https://eatigo.com/?spirit="+r.id)}catch(e){}}
function dismiss(){
var music=document.getElementById('bgMusic');if(music){music.pause();music.currentTime=0}
pushEv("Story_Dismissed",{screen:qi<Q.length?"scene_"+(qi+1):"result",steps_completed:qi,time_on_modal:Math.round((Date.now()-t0)/1000)});try{if(typeof CleverTap!=="undefined"&&CleverTap.closeInApp)CleverTap.closeInApp()}catch(e){}}

// ═══ MUSIC TOGGLE ═══
function toggleMusic(){
var music=document.getElementById('bgMusic');
var btn=document.getElementById('musicBtn');
var iconOff=document.getElementById('musicOff');
var iconOn=document.getElementById('musicOn');
if(music.paused){
music.volume=0;
music.play().then(function(){
btn.classList.add('playing');
iconOff.style.display='none';iconOn.style.display='block';
var fade=setInterval(function(){if(music.volume<0.35){music.volume=Math.min(music.volume+0.02,0.35)}else{clearInterval(fade)}},50);
}).catch(function(e){console.log('Audio play blocked:',e)});
}else{
var fade=setInterval(function(){if(music.volume>0.01){music.volume=Math.max(music.volume-0.03,0)}else{clearInterval(fade);music.pause();btn.classList.remove('playing');iconOff.style.display='block';iconOn.style.display='none'}},40);
}}
function pushEv(n,p){p=p||{};p.Timestamp=new Date().toISOString();p.Brand="eatigo";p.Template="Diner_Spirit_Enneagram";try{if(typeof CleverTap!=="undefined"&&CleverTap.pushEvent)CleverTap.pushEvent(n,JSON.stringify(p));if(typeof clevertap!=="undefined"&&clevertap.event)clevertap.event.push(n,p);if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.clevertap)window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({type:"event",name:n,props:p}))}catch(e){console.log("[CT]",n,p)}if(TST)console.log("%c[CT] "+n,"color:#E8453C;font-weight:bold",p)}
function jumpTo(i){ic=["\uD83D\uDD2E","\u2728","\uD83C\uDF1F","\uD83C\uDFAD","\uD83C\uDF19","\uD83D\uDC30","\uD83D\uDD25","\u2601\uFE0F"];sc=[0,0,0,0,0,0,0,0,0];sc[i]=10;showResult(i)}
setTimeout(function(){var b=document.querySelector(".bs");if(b)b.classList.add("ready")},2500);
</script>
</body>
</html>
