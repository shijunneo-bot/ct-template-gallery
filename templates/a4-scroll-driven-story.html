<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    const CONFIG = {
      includeDismissButton: true,

      brand: {
        name: "Yes 5G",
        primary: "#7C3AED",
        primaryLight: "#A78BFA",
        dark: "#0A0A14",
        white: "#FFFFFF",
      },

      story: {
        title: "The 5G Leap",
        subtitle: "Why Malaysia is ready",
      },

      chapters: [
        {
          id: "old",
          headline: "Remember\nbuffering?",
          body: "Dropped video calls. Spinning wheels. Waiting 40 seconds for a page to load. That was life on 3G â€” and honestly, 4G wasn't always much better.",
          backgroundColor: "#1A1A2E",
          textColor: "#FFFFFF",
          accentColor: "#6B7280",
          emoji: "â³",
        },
        {
          id: "change",
          headline: "5G changes\neverything",
          body: "Up to 100Ã— faster than 4G. Latency under 10ms â€” that's faster than your brain processes a blink. Downloads that took 5 minutes now take 3 seconds.",
          backgroundColor: "#1E1B4B",
          textColor: "#FFFFFF",
          accentColor: "#7C3AED",
          emoji: "âš¡",
        },
        {
          id: "speed",
          headline: "Speeds that\nsurprise",
          body: "Stream 4K without a stutter. Game with zero lag. Video call a dozen people while your kids stream cartoons. All at once. No compromises.",
          backgroundColor: "#172554",
          textColor: "#FFFFFF",
          accentColor: "#3B82F6",
          emoji: "ðŸš€",
        },
        {
          id: "coverage",
          headline: "Coverage\nacross Malaysia",
          body: "From KL to Kota Kinabalu, Yes 5G is expanding fast. Major cities, suburban areas, and key corridors â€” with more towers going live every month.",
          backgroundColor: "#042F2E",
          textColor: "#FFFFFF",
          accentColor: "#10B981",
          emoji: "ðŸ‡²ðŸ‡¾",
        },
        {
          id: "cta_chapter",
          headline: "Switch\ntoday",
          body: "Keep your number. Pick a plan. Experience the difference in 5 minutes flat. No lock-in contracts, no hidden fees.",
          backgroundColor: "#3B0764",
          textColor: "#FFFFFF",
          accentColor: "#A78BFA",
          emoji: "âœ¨",
          ctaText: "Explore Plans",
          ctaUrl: "yes5g://plans",
        },
      ],

      cta: {
        text: "Switch to Yes 5G",
        url: "yes5g://switch",
      },

      events: {
        storyViewed:      "ScrollStory_Viewed",
        chapterReached:   "ScrollStory_Chapter",
        storyCTAClicked:  "ScrollStory_CTA_Clicked",
        storyDismissed:   "ScrollStory_Dismissed",
      },

      animation: {
        textRevealThreshold: 0.35,
        chapterTransitionDuration: 0.6,
      },
    };
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700;800&display=swap">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg: #1A1A2E;
      --text: #FFFFFF;
      --text-muted: rgba(255,255,255,0.5);
      --accent: #7C3AED;
      --transition-dur: 0.6s;
    }

    body {
      margin: 0; padding: 0;
      font-family: 'Space Grotesk', sans-serif;
      color: var(--text);
      overflow: hidden;
      background: var(--bg);
      transition: background var(--transition-dur) ease;
    }

    .dismiss {
      position: fixed; top: 12px; right: 12px;
      width: 36px; height: 36px; border-radius: 50%;
      background: rgba(0,0,0,0.3);
      backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.1);
      color: rgba(255,255,255,0.5);
      font-size: 18px; cursor: pointer; z-index: 100;
      display: flex; align-items: center; justify-content: center;
    }
    .dismiss:active { transform: scale(0.9); }

    /* Progress bar */
    .progress-bar {
      position: fixed; top: 0; left: 0;
      height: 3px; width: 0%;
      z-index: 100;
      transition: width 0.15s linear, background 0.4s ease;
    }

    /* Scroll container */
    .scroll-wrap {
      height: 100vh;
      overflow-y: auto;
      overflow-x: hidden;
      scroll-snap-type: y proximity;
      -webkit-overflow-scrolling: touch;
    }

    /* Chapter */
    .chapter {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 28px;
      position: relative;
      scroll-snap-align: start;
    }

    .ch-emoji {
      font-size: 56px;
      margin-bottom: 20px;
      opacity: 0;
      transform: scale(0.7);
      transition: opacity 0.6s ease, transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .ch-emoji.visible { opacity: 1; transform: scale(1); }

    .ch-headline {
      font-size: clamp(28px, 8vw, 40px);
      font-weight: 800;
      line-height: 1.1;
      text-align: center;
      white-space: pre-line;
      margin-bottom: 16px;
    }
    /* Word-by-word reveal using spans */
    .ch-headline .word {
      display: inline-block;
      opacity: 0.12;
      transition: opacity 0.5s ease, transform 0.5s ease;
      transform: translateY(4px);
    }
    .ch-headline .word.lit {
      opacity: 1;
      transform: translateY(0);
    }

    .ch-body {
      font-size: 15px;
      line-height: 1.7;
      text-align: center;
      max-width: 320px;
      opacity: 0;
      transform: translateY(12px);
      transition: opacity 0.6s 0.2s ease, transform 0.6s 0.2s ease;
    }
    .ch-body.visible { opacity: 0.65; transform: translateY(0); }

    /* Chapter CTA (inline, for last chapter) */
    .ch-cta {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-top: 28px;
      padding: 16px 36px;
      border-radius: 50px;
      border: none;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px; font-weight: 800;
      cursor: pointer;
      color: var(--bg);
      background: var(--text);
      opacity: 0;
      transform: translateY(12px);
      transition: opacity 0.5s 0.4s ease, transform 0.5s 0.4s ease, background 0.3s ease;
    }
    .ch-cta.visible { opacity: 1; transform: translateY(0); }
    .ch-cta:active { transform: scale(0.96) translateY(0); }

    /* Chapter number indicator */
    .ch-num {
      position: absolute;
      top: 20px; left: 50%;
      transform: translateX(-50%);
      display: flex; gap: 6px;
    }
    .ch-dot {
      width: 6px; height: 6px;
      border-radius: 50%;
      background: rgba(255,255,255,0.15);
      transition: background 0.3s ease, transform 0.3s ease;
    }
    .ch-dot.active {
      background: rgba(255,255,255,0.7);
      transform: scale(1.4);
    }
    .ch-dot.past {
      background: rgba(255,255,255,0.35);
    }

    /* Scroll hint on first chapter */
    .scroll-hint {
      position: absolute;
      bottom: 28px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      opacity: 0.35;
      animation: hintFade 2s ease-in-out infinite;
    }
    .scroll-hint span {
      font-size: 11px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    .scroll-hint-arrow {
      font-size: 16px;
      animation: hintBounce 1.5s ease-in-out infinite;
    }
    @keyframes hintBounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(5px)} }
    @keyframes hintFade { 0%,100%{opacity:0.35} 50%{opacity:0.15} }
  </style>
</head>

<body>
  <div class="progress-bar" id="progressBar"></div>

  <div class="scroll-wrap" id="scrollWrap">
    <div id="chapters"></div>
  </div>

  <script>
    // â”€â”€ Helpers â”€â”€
    function fireEvent(name, props) {
      try {
        if (window.CleverTap) window.CleverTap.pushEvent(name, props || {});
        else if (window.webkit?.messageHandlers?.clevertap)
          window.webkit.messageHandlers.clevertap.postMessage(JSON.stringify({ event: name, properties: props || {} }));
        else if (window.clevertap) window.clevertap.event.push(name, props || {});
      } catch (e) { console.log("CT Event:", name, props); }
    }
    function dismiss() {
      fireEvent(CONFIG.events.storyDismissed);
      try { location.href = "wzrk://exit"; } catch (e) {}
    }

    const reachedChapters = new Set();

    (function init() {
      const root = document.documentElement;
      root.style.setProperty("--transition-dur", CONFIG.animation.chapterTransitionDuration + "s");

      // Dismiss
      if (CONFIG.includeDismissButton) {
        const btn = document.createElement("button");
        btn.className = "dismiss"; btn.innerHTML = "âœ•"; btn.onclick = dismiss;
        document.body.appendChild(btn);
      }

      // Build chapters
      const chaptersWrap = document.getElementById("chapters");
      const total = CONFIG.chapters.length;

      CONFIG.chapters.forEach((ch, i) => {
        const section = document.createElement("section");
        section.className = "chapter";
        section.dataset.bg = ch.backgroundColor;
        section.dataset.accent = ch.accentColor;
        section.dataset.index = i;
        section.dataset.id = ch.id;

        // Chapter nav dots
        let dotsHtml = '<div class="ch-num">';
        for (let d = 0; d < total; d++) {
          dotsHtml += `<div class="ch-dot" data-dot="${d}"></div>`;
        }
        dotsHtml += '</div>';

        // Split headline into word spans
        const words = ch.headline.replace(/\n/g, " \n ").split(" ");
        const wordSpans = words.map(w => {
          if (w === "\n") return "<br>";
          return `<span class="word">${w}</span>`;
        }).join(" ");

        let ctaHtml = "";
        if (ch.ctaText) {
          ctaHtml = `<button class="ch-cta" data-url="${ch.ctaUrl || CONFIG.cta.url}">${ch.ctaText} â†’</button>`;
        }

        let hintHtml = "";
        if (i === 0) {
          hintHtml = `<div class="scroll-hint" id="scrollHint"><span>Scroll to explore</span><div class="scroll-hint-arrow">â†“</div></div>`;
        }

        section.innerHTML = `
          ${dotsHtml}
          <div class="ch-emoji" data-reveal>${ch.emoji}</div>
          <h2 class="ch-headline" data-reveal-words>${wordSpans}</h2>
          <p class="ch-body" data-reveal>${ch.body}</p>
          ${ctaHtml}
          ${hintHtml}
        `;

        chaptersWrap.appendChild(section);
      });

      // â”€â”€ Intersection Observer for chapters â”€â”€
      const wrap = document.getElementById("scrollWrap");

      const chapterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const section = entry.target;
          const idx = parseInt(section.dataset.index);

          if (entry.isIntersecting && entry.intersectionRatio >= 0.4) {
            // Transition background color
            document.body.style.background = section.dataset.bg;

            // Update progress bar color
            document.getElementById("progressBar").style.background = section.dataset.accent;

            // Update dots across ALL chapters
            document.querySelectorAll(".ch-dot").forEach(dot => {
              const d = parseInt(dot.dataset.dot);
              dot.classList.remove("active", "past");
              if (d === idx) dot.classList.add("active");
              else if (d < idx) dot.classList.add("past");
            });

            // Reveal elements
            section.querySelectorAll("[data-reveal]").forEach(el => el.classList.add("visible"));

            // Word-by-word reveal
            const wordEls = section.querySelectorAll(".word");
            wordEls.forEach((w, wi) => {
              setTimeout(() => w.classList.add("lit"), wi * 60);
            });

            // CTA reveal
            const ctaEl = section.querySelector(".ch-cta");
            if (ctaEl) setTimeout(() => ctaEl.classList.add("visible"), wordEls.length * 60 + 200);

            // Hide scroll hint
            const hint = document.getElementById("scrollHint");
            if (hint && idx > 0) hint.style.opacity = "0";

            // Track chapter
            if (!reachedChapters.has(idx)) {
              reachedChapters.add(idx);
              const ch = CONFIG.chapters[idx];
              fireEvent(CONFIG.events.chapterReached, {
                chapter_id: ch.id,
                chapter_number: idx + 1,
                chapter_headline: ch.headline.replace(/\n/g, " "),
              });
            }
          } else if (!entry.isIntersecting) {
            // Reset elements when scrolled away (so re-entry animates again)
            section.querySelectorAll("[data-reveal]").forEach(el => el.classList.remove("visible"));
            section.querySelectorAll(".word").forEach(w => w.classList.remove("lit"));
            const ctaEl = section.querySelector(".ch-cta");
            if (ctaEl) ctaEl.classList.remove("visible");
          }
        });
      }, {
        root: wrap,
        threshold: [0.4],
      });

      document.querySelectorAll(".chapter").forEach(ch => chapterObserver.observe(ch));

      // CTA click handlers
      document.querySelectorAll(".ch-cta").forEach(btn => {
        btn.addEventListener("click", () => {
          fireEvent(CONFIG.events.storyCTAClicked);
          const url = btn.dataset.url;
          if (url) location.href = url;
        });
      });

      // Scroll progress
      wrap.addEventListener("scroll", () => {
        const pct = wrap.scrollTop / (wrap.scrollHeight - wrap.clientHeight);
        document.getElementById("progressBar").style.width = (pct * 100) + "%";
      }, { passive: true });

      // Trigger first chapter immediately
      setTimeout(() => {
        const first = document.querySelector(".chapter");
        first.querySelectorAll("[data-reveal]").forEach(el => el.classList.add("visible"));
        first.querySelectorAll(".word").forEach((w, i) => {
          setTimeout(() => w.classList.add("lit"), 400 + i * 60);
        });
        document.querySelector('.ch-dot[data-dot="0"]').classList.add("active");
      }, 300);

      fireEvent(CONFIG.events.storyViewed, { chapter_count: CONFIG.chapters.length });
    })();
  </script>
</body>

</html>
