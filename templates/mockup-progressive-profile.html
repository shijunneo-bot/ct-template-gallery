<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Progressive Profile</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;600;700&family=Instrument+Serif&display=swap');
  *{margin:0;padding:0;box-sizing:border-box}
  :root{
    --bg:#faf8f5;--card:#fff;--ink:#1a1816;--muted:#8a8580;
    --accent:#6366f1;--accent2:#818cf8;--accent-bg:rgba(99,102,241,0.06);
    --border:rgba(0,0,0,0.06);--green:#10b981;
  }
  body{
    font-family:'Instrument Sans',sans-serif;background:var(--bg);
    color:var(--ink);max-width:390px;margin:0 auto;
    height:100vh;display:flex;flex-direction:column;overflow:hidden;
  }

  /* PROGRESS */
  .progress-header{
    padding:16px 20px;display:flex;align-items:center;gap:12px;
    flex-shrink:0;
  }
  .prog-back{
    width:32px;height:32px;border-radius:50%;border:1px solid var(--border);
    background:var(--card);display:flex;align-items:center;justify-content:center;
    font-size:14px;cursor:pointer;
  }
  .prog-bar{flex:1;height:4px;background:var(--border);border-radius:2px;overflow:hidden;}
  .prog-fill{height:100%;background:var(--accent);border-radius:2px;transition:width 0.4s ease;}
  .prog-step{font-size:11px;color:var(--muted);font-weight:600;min-width:32px;text-align:right;}

  /* STEP VIEW */
  .step-viewport{flex:1;overflow:hidden;position:relative;}
  .step-track{
    display:flex;height:100%;
    transition:transform 0.4s cubic-bezier(0.16,1,0.3,1);
  }
  .step{
    min-width:100%;padding:24px 24px 32px;
    display:flex;flex-direction:column;
  }
  .step-emoji{font-size:40px;margin-bottom:16px;}
  .step-q{
    font-family:'Instrument Serif',serif;font-size:24px;
    line-height:1.3;margin-bottom:6px;
  }
  .step-hint{font-size:12px;color:var(--muted);margin-bottom:24px;line-height:1.5;}

  /* OPTION GRID */
  .options{display:flex;flex-direction:column;gap:10px;flex:1;}
  .opt{
    padding:16px 18px;border-radius:14px;border:1.5px solid var(--border);
    background:var(--card);cursor:pointer;transition:all 0.2s;
    display:flex;align-items:center;gap:12px;
  }
  .opt:active{transform:scale(0.98);}
  .opt.selected{
    border-color:var(--accent);background:var(--accent-bg);
  }
  .opt-icon{font-size:20px;flex-shrink:0;}
  .opt-text{flex:1;}
  .opt-label{font-size:14px;font-weight:600;}
  .opt-desc{font-size:11px;color:var(--muted);margin-top:2px;}
  .opt-check{
    width:20px;height:20px;border-radius:50%;
    border:2px solid var(--border);flex-shrink:0;
    display:flex;align-items:center;justify-content:center;
    font-size:10px;transition:all 0.2s;
  }
  .opt.selected .opt-check{
    border-color:var(--accent);background:var(--accent);color:#fff;
  }

  /* ICON GRID for multi-select */
  .icon-grid{
    display:grid;grid-template-columns:1fr 1fr;gap:10px;flex:1;
  }
  .icon-opt{
    padding:20px 14px;border-radius:16px;border:1.5px solid var(--border);
    background:var(--card);cursor:pointer;text-align:center;
    transition:all 0.2s;
  }
  .icon-opt:active{transform:scale(0.97);}
  .icon-opt.selected{border-color:var(--accent);background:var(--accent-bg);}
  .icon-opt .io-emoji{font-size:28px;margin-bottom:6px;}
  .icon-opt .io-label{font-size:12px;font-weight:600;}

  /* FOOTER */
  .step-footer{
    flex-shrink:0;padding:16px 24px 28px;
  }
  .next-btn{
    width:100%;padding:16px;border-radius:14px;border:none;
    background:var(--accent);font-family:'Instrument Sans',sans-serif;
    font-size:15px;font-weight:700;color:#fff;
    cursor:pointer;transition:all 0.2s;opacity:0.4;
    pointer-events:none;
  }
  .next-btn.active{opacity:1;pointer-events:all;}
  .next-btn:active{transform:scale(0.98);}

  /* RESULT */
  .result{
    min-width:100%;padding:32px 24px;
    display:flex;flex-direction:column;align-items:center;
    justify-content:center;text-align:center;
  }
  .result-emoji{font-size:56px;margin-bottom:16px;}
  .result-title{
    font-family:'Instrument Serif',serif;font-size:26px;
    margin-bottom:8px;
  }
  .result-desc{font-size:13px;color:var(--muted);line-height:1.6;margin-bottom:24px;}
  .result-card{
    background:var(--card);border:1px solid var(--border);
    border-radius:16px;padding:20px;width:100%;margin-bottom:20px;
    text-align:left;
  }
  .result-card .rc-label{font-size:10px;color:var(--accent);font-weight:600;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:8px;}
  .result-card .rc-items{display:flex;flex-wrap:wrap;gap:6px;}
  .rc-tag{
    padding:6px 12px;border-radius:100px;font-size:11px;font-weight:600;
    background:var(--accent-bg);color:var(--accent);
  }
  .result-btn{
    width:100%;padding:16px;border-radius:14px;border:none;
    background:var(--accent);font-family:'Instrument Sans',sans-serif;
    font-size:15px;font-weight:700;color:#fff;cursor:pointer;
  }
</style>
</head>
<body>

<div class="progress-header">
  <button class="prog-back" id="backBtn" onclick="prevStep()">â†</button>
  <div class="prog-bar"><div class="prog-fill" id="progFill" style="width:25%"></div></div>
  <div class="prog-step" id="stepLabel">1/4</div>
</div>

<div class="step-viewport">
  <div class="step-track" id="stepTrack">

    <!-- STEP 1 -->
    <div class="step" data-step="0">
      <div class="step-emoji">ğŸ‘‹</div>
      <div class="step-q">What brings you here today?</div>
      <div class="step-hint">This helps us personalise your experience</div>
      <div class="options" data-step="0">
        <div class="opt" onclick="selectOpt(this,0)"><span class="opt-icon">ğŸ›ï¸</span><div class="opt-text"><div class="opt-label">Shopping for deals</div><div class="opt-desc">Looking for the best prices</div></div><div class="opt-check">âœ“</div></div>
        <div class="opt" onclick="selectOpt(this,0)"><span class="opt-icon">ğŸ”</span><div class="opt-text"><div class="opt-label">Just browsing</div><div class="opt-desc">Exploring what's available</div></div><div class="opt-check">âœ“</div></div>
        <div class="opt" onclick="selectOpt(this,0)"><span class="opt-icon">ğŸ¯</span><div class="opt-text"><div class="opt-label">Specific purchase</div><div class="opt-desc">I know what I want</div></div><div class="opt-check">âœ“</div></div>
        <div class="opt" onclick="selectOpt(this,0)"><span class="opt-icon">ğŸ’¡</span><div class="opt-text"><div class="opt-label">Need inspiration</div><div class="opt-desc">Help me discover new things</div></div><div class="opt-check">âœ“</div></div>
      </div>
    </div>

    <!-- STEP 2 -->
    <div class="step" data-step="1">
      <div class="step-emoji">â¤ï¸</div>
      <div class="step-q">What are you into?</div>
      <div class="step-hint">Pick as many as you like</div>
      <div class="icon-grid" data-step="1">
        <div class="icon-opt" onclick="toggleMulti(this,1)"><div class="io-emoji">ğŸ‘—</div><div class="io-label">Fashion</div></div>
        <div class="icon-opt" onclick="toggleMulti(this,1)"><div class="io-emoji">ğŸ </div><div class="io-label">Home</div></div>
        <div class="icon-opt" onclick="toggleMulti(this,1)"><div class="io-emoji">ğŸ’»</div><div class="io-label">Tech</div></div>
        <div class="icon-opt" onclick="toggleMulti(this,1)"><div class="io-emoji">ğŸƒ</div><div class="io-label">Fitness</div></div>
        <div class="icon-opt" onclick="toggleMulti(this,1)"><div class="io-emoji">ğŸ³</div><div class="io-label">Food</div></div>
        <div class="icon-opt" onclick="toggleMulti(this,1)"><div class="io-emoji">âœˆï¸</div><div class="io-label">Travel</div></div>
      </div>
    </div>

    <!-- STEP 3 -->
    <div class="step" data-step="2">
      <div class="step-emoji">ğŸ’°</div>
      <div class="step-q">What's your sweet spot?</div>
      <div class="step-hint">We'll prioritise products in your range</div>
      <div class="options" data-step="2">
        <div class="opt" onclick="selectOpt(this,2)"><span class="opt-icon">ğŸ·ï¸</span><div class="opt-text"><div class="opt-label">Budget-friendly</div><div class="opt-desc">Under $50</div></div><div class="opt-check">âœ“</div></div>
        <div class="opt" onclick="selectOpt(this,2)"><span class="opt-icon">âš–ï¸</span><div class="opt-text"><div class="opt-label">Mid-range</div><div class="opt-desc">$50 â€“ $200</div></div><div class="opt-check">âœ“</div></div>
        <div class="opt" onclick="selectOpt(this,2)"><span class="opt-icon">âœ¨</span><div class="opt-text"><div class="opt-label">Premium</div><div class="opt-desc">$200+</div></div><div class="opt-check">âœ“</div></div>
        <div class="opt" onclick="selectOpt(this,2)"><span class="opt-icon">ğŸ²</span><div class="opt-text"><div class="opt-label">Surprise me</div><div class="opt-desc">Show me everything</div></div><div class="opt-check">âœ“</div></div>
      </div>
    </div>

    <!-- STEP 4 -->
    <div class="step" data-step="3">
      <div class="step-emoji">ğŸ””</div>
      <div class="step-q">How should we reach you?</div>
      <div class="step-hint">Pick your preferred channels</div>
      <div class="icon-grid" data-step="3">
        <div class="icon-opt" onclick="toggleMulti(this,3)"><div class="io-emoji">ğŸ“±</div><div class="io-label">Push</div></div>
        <div class="icon-opt" onclick="toggleMulti(this,3)"><div class="io-emoji">ğŸ“§</div><div class="io-label">Email</div></div>
        <div class="icon-opt" onclick="toggleMulti(this,3)"><div class="io-emoji">ğŸ’¬</div><div class="io-label">WhatsApp</div></div>
        <div class="icon-opt" onclick="toggleMulti(this,3)"><div class="io-emoji">ğŸ“²</div><div class="io-label">In-app only</div></div>
      </div>
    </div>

    <!-- RESULT -->
    <div class="result">
      <div class="result-emoji">ğŸ‰</div>
      <div class="result-title">You're all set!</div>
      <div class="result-desc">We've personalised your experience based on your preferences. Here's your profile:</div>
      <div class="result-card">
        <div class="rc-label">Your Preferences</div>
        <div class="rc-items" id="resultTags"></div>
      </div>
      <button class="result-btn" onclick="trackEvent('Profile_CTA_Clicked')">Start Exploring â†’</button>
    </div>

  </div>
</div>

<div class="step-footer">
  <button class="next-btn" id="nextBtn" onclick="nextStep()">Continue</button>
</div>

<script>
  let current=0;const totalSteps=4;
  const answers=[[],[],[],[]];
  const track=document.getElementById('stepTrack');

  function goTo(idx){
    current=idx;
    track.style.transform=`translateX(-${current*100}%)`;
    document.getElementById('progFill').style.width=((current+1)/totalSteps*100)+'%';
    document.getElementById('stepLabel').textContent=(current+1)+'/'+totalSteps;
    document.getElementById('backBtn').style.visibility=current===0?'hidden':'visible';
    checkNext();
    if(current>=totalSteps){
      document.querySelector('.step-footer').style.display='none';
      buildResult();
    } else {
      document.querySelector('.step-footer').style.display='block';
    }
  }

  function selectOpt(el,step){
    el.parentElement.querySelectorAll('.opt').forEach(o=>o.classList.remove('selected'));
    el.classList.add('selected');
    answers[step]=[el.querySelector('.opt-label').textContent];
    checkNext();
    trackEvent('Answer_Selected',{step:step+1,answer:answers[step][0]});
  }

  function toggleMulti(el,step){
    el.classList.toggle('selected');
    const sel=el.parentElement.querySelectorAll('.selected');
    answers[step]=Array.from(sel).map(s=>s.querySelector('.io-label').textContent);
    checkNext();
  }

  function checkNext(){
    const btn=document.getElementById('nextBtn');
    btn.classList.toggle('active',answers[current]&&answers[current].length>0);
  }

  function nextStep(){goTo(current+1);}
  function prevStep(){if(current>0) goTo(current-1);}

  function buildResult(){
    const tags=document.getElementById('resultTags');
    const all=answers.flat();
    tags.innerHTML=all.map(a=>`<span class="rc-tag">${a}</span>`).join('');
    trackEvent('Profile_Completed',{preferences:all});
  }

  function trackEvent(n,p){
    console.log('CT:',n,p||{});
    if(window.clevertap) window.clevertap.event.push(n,p||{});
  }
  goTo(0);
  trackEvent('Profile_Started');
</script>
</body>
</html>
